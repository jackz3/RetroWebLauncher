(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))S(d);new MutationObserver(d=>{for(const w of d)if(w.type==="childList")for(const N of w.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&S(N)}).observe(document,{childList:!0,subtree:!0});function O(d){const w={};return d.integrity&&(w.integrity=d.integrity),d.referrerpolicy&&(w.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?w.credentials="include":d.crossorigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function S(d){if(d.ep)return;d.ep=!0;const w=O(d);fetch(d.href,w)}})();const nr={};function Za(_){nr.context=_}const Xa=(_,A)=>_===A,Ya=Symbol("solid-proxy"),qa=Symbol("solid-track"),Jr={equals:Xa};let Wi=Zi;const yr={},Ze=1,Kr=2,Hi={owned:null,cleanups:null,context:null,owner:null};var ae=null;let Tr=null,Jt=null,Nr=null,ce=null,be=null,On=0;function Sn(_,A){const O=Jt,S=ae,d=_.length===0,w=d?Hi:{owned:null,cleanups:null,context:null,owner:A||S},N=d?_:()=>_(()=>Nn(w));ae=w,Jt=null;try{return bn(N,!0)}finally{Jt=O,ae=S}}function Ve(_,A){A=A?Object.assign({},Jr,A):Jr;const O={value:_,observers:null,observerSlots:null,pending:yr,comparator:A.equals||void 0},S=d=>(typeof d=="function"&&(d=d(O.pending!==yr?O.pending:O.value)),kn(O,d));return[Vi.bind(O),S]}function _n(_,A,O){const S=tn(_,A,!0,Ze);gr(S)}function ds(_,A,O){const S=tn(_,A,!1,Ze);gr(S)}function Ga(_,A,O){Wi=es;const S=tn(_,A,!1,Ze);S.user=!0,be?be.push(S):gr(S)}function vr(_,A,O){O=O?Object.assign({},Jr,O):Jr;const S=tn(_,A,!0,0);return S.pending=yr,S.observers=null,S.observerSlots=null,S.comparator=O.equals||void 0,gr(S),Vi.bind(S)}function ys(_,A,O){arguments.length===2?typeof A=="object"&&(O=A,A=_,_=!0):arguments.length===1&&(A=_,_=!0),O||(O={});const S=new Set,[d,w]=Ve(O.initialValue),[N,E]=Ve(void 0,{equals:!1}),[R,m]=Ve(!1),[p,u]=Ve();let v,f=null,D=null,b=null,L=!1,M="initialValue"in O,C=typeof _=="function"&&vr(_);nr.context&&(b=`${nr.context.id}${nr.context.count++}`,nr.load&&(D=nr.load(b)));function J(G,dt,ct,z){return f===G&&(f=null,M=!0,D&&(G===D||dt===D)&&O.onHydrated&&queueMicrotask(()=>O.onHydrated(z,{value:dt})),D=null,u(v=ct),U(dt)),dt}function U(G){Qr(()=>{w(()=>G),m(!1);for(const dt of S.keys())dt.decrement();S.clear()})}function j(){const G=Qa,dt=d();if(v)throw v;return Jt&&!Jt.user&&G&&_n(()=>{N(),f&&(G.resolved||S.has(G)||(G.increment(),S.add(G)))}),dt}function yt(G=!0){if(G&&L)return;L=!1,u(v=void 0);const dt=C?C():_;if(dt==null||dt===!1){J(f,ze(d));return}const ct=D||ze(()=>A(dt,{value:d(),refetching:G}));return typeof ct!="object"||!("then"in ct)?(J(f,ct),ct):(f=ct,L=!0,queueMicrotask(()=>L=!1),Qr(()=>{m(!0),E()}),ct.then(z=>J(ct,z,void 0,dt),z=>J(ct,z,z)))}return Object.defineProperties(j,{loading:{get(){return R()}},error:{get(){return p()}},latest:{get(){if(!M)return j();if(v)throw v;return d()}}}),C?_n(()=>yt(!1)):yt(!1),[j,{refetch:yt,mutate:w}]}function Qr(_){if(Nr)return _();let A;const O=Nr=[];try{A=_()}finally{Nr=null}return bn(()=>{for(let S=0;S<O.length;S+=1){const d=O[S];if(d.pending!==yr){const w=d.pending;d.pending=yr,kn(d,w)}}},!1),A}function ze(_){let A,O=Jt;return Jt=null,A=_(),Jt=O,A}function vs(_,A,O){const S=Array.isArray(_);let d,w=O&&O.defer;return N=>{let E;if(S){E=Array(_.length);for(let m=0;m<_.length;m++)E[m]=_[m]()}else E=_();if(w){w=!1;return}const R=ze(()=>A(E,d,N));return d=E,R}}function gs(_){Ga(()=>ze(_))}function Ja(_){return ae===null||(ae.cleanups===null?ae.cleanups=[_]:ae.cleanups.push(_)),_}function ws(){return Jt}function ms(_){const A=Symbol("context");return{id:A,Provider:rs(A),defaultValue:_}}function Ss(_){let A;return(A=qi(ae,_.id))!==void 0?A:_.defaultValue}function Ka(_){const A=vr(_);return vr(()=>Fn(A()))}let Qa;function Vi(){const _=Tr;if(this.sources&&(this.state||_)){const A=ce;ce=null,this.state===Ze||_?gr(this):$r(this),ce=A}if(Jt){const A=this.observers?this.observers.length:0;Jt.sources?(Jt.sources.push(this),Jt.sourceSlots.push(A)):(Jt.sources=[this],Jt.sourceSlots=[A]),this.observers?(this.observers.push(Jt),this.observerSlots.push(Jt.sources.length-1)):(this.observers=[Jt],this.observerSlots=[Jt.sources.length-1])}return this.value}function kn(_,A,O){if(Nr)return _.pending===yr&&Nr.push(_),_.pending=A,A;if(_.comparator&&_.comparator(_.value,A))return A;let S=!1;return _.value=A,_.observers&&_.observers.length&&bn(()=>{for(let d=0;d<_.observers.length;d+=1){const w=_.observers[d];S&&Tr.disposed.has(w),(S&&!w.tState||!S&&!w.state)&&(w.pure?ce.push(w):be.push(w),w.observers&&Xi(w)),S||(w.state=Ze)}if(ce.length>1e6)throw ce=[],new Error},!1),A}function gr(_){if(!_.fn)return;Nn(_);const A=ae,O=Jt,S=On;Jt=ae=_,$a(_,_.value,S),Jt=O,ae=A}function $a(_,A,O){let S;try{S=_.fn(A)}catch(d){Yi(d)}(!_.updatedAt||_.updatedAt<=O)&&(_.observers&&_.observers.length?kn(_,S):_.value=S,_.updatedAt=O)}function tn(_,A,O,S=Ze,d){const w={fn:_,state:S,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:A,owner:ae,context:null,pure:O};return ae===null||ae!==Hi&&(ae.owned?ae.owned.push(w):ae.owned=[w]),w}function Rr(_){const A=Tr;if(_.state===0||A)return;if(_.state===Kr||A)return $r(_);if(_.suspense&&ze(_.suspense.inFallback))return _.suspense.effects.push(_);const O=[_];for(;(_=_.owner)&&(!_.updatedAt||_.updatedAt<On);)(_.state||A)&&O.push(_);for(let S=O.length-1;S>=0;S--)if(_=O[S],_.state===Ze||A)gr(_);else if(_.state===Kr||A){const d=ce;ce=null,$r(_,O[0]),ce=d}}function bn(_,A){if(ce)return _();let O=!1;A||(ce=[]),be?O=!0:be=[],On++;try{const S=_();return ts(O),S}catch(S){ce||(be=null),Yi(S)}}function ts(_){ce&&(Zi(ce),ce=null),!_&&(be.length?Qr(()=>{Wi(be),be=null}):be=null)}function Zi(_){for(let A=0;A<_.length;A++)Rr(_[A])}function es(_){let A,O=0;for(A=0;A<_.length;A++){const d=_[A];d.user?_[O++]=d:Rr(d)}nr.context&&Za();const S=_.length;for(A=0;A<O;A++)Rr(_[A]);for(A=S;A<_.length;A++)Rr(_[A])}function $r(_,A){const O=Tr;_.state=0;for(let S=0;S<_.sources.length;S+=1){const d=_.sources[S];d.sources&&(d.state===Ze||O?d!==A&&Rr(d):(d.state===Kr||O)&&$r(d,A))}}function Xi(_){const A=Tr;for(let O=0;O<_.observers.length;O+=1){const S=_.observers[O];(!S.state||A)&&(S.state=Kr,S.pure?ce.push(S):be.push(S),S.observers&&Xi(S))}}function Nn(_){let A;if(_.sources)for(;_.sources.length;){const O=_.sources.pop(),S=_.sourceSlots.pop(),d=O.observers;if(d&&d.length){const w=d.pop(),N=O.observerSlots.pop();S<d.length&&(w.sourceSlots[N]=S,d[S]=w,O.observerSlots[S]=N)}}if(_.owned){for(A=0;A<_.owned.length;A++)Nn(_.owned[A]);_.owned=null}if(_.cleanups){for(A=0;A<_.cleanups.length;A++)_.cleanups[A]();_.cleanups=null}_.state=0,_.context=null}function Yi(_){throw _}function qi(_,A){return _?_.context&&_.context[A]!==void 0?_.context[A]:qi(_.owner,A):void 0}function Fn(_){if(typeof _=="function"&&!_.length)return Fn(_());if(Array.isArray(_)){const A=[];for(let O=0;O<_.length;O++){const S=Fn(_[O]);Array.isArray(S)?A.push.apply(A,S):A.push(S)}return A}return _}function rs(_){return function(O){let S;return _n(()=>S=ze(()=>(ae.context={[_]:O.value},Ka(()=>O.children)))),S}}const ns=Symbol("fallback");function ji(_){for(let A=0;A<_.length;A++)_[A]()}function is(_,A,O={}){let S=[],d=[],w=[],N=0,E=A.length>1?[]:null;return Ja(()=>ji(w)),()=>{let R=_()||[],m,p;return R[qa],ze(()=>{let v=R.length,f,D,b,L,M,C,J,U,j;if(v===0)N!==0&&(ji(w),w=[],S=[],d=[],N=0,E&&(E=[])),O.fallback&&(S=[ns],d[0]=Sn(yt=>(w[0]=yt,O.fallback())),N=1);else if(N===0){for(d=new Array(v),p=0;p<v;p++)S[p]=R[p],d[p]=Sn(u);N=v}else{for(b=new Array(v),L=new Array(v),E&&(M=new Array(v)),C=0,J=Math.min(N,v);C<J&&S[C]===R[C];C++);for(J=N-1,U=v-1;J>=C&&U>=C&&S[J]===R[U];J--,U--)b[U]=d[J],L[U]=w[J],E&&(M[U]=E[J]);for(f=new Map,D=new Array(U+1),p=U;p>=C;p--)j=R[p],m=f.get(j),D[p]=m===void 0?-1:m,f.set(j,p);for(m=C;m<=J;m++)j=S[m],p=f.get(j),p!==void 0&&p!==-1?(b[p]=d[m],L[p]=w[m],E&&(M[p]=E[m]),p=D[p],f.set(j,p)):w[m]();for(p=C;p<v;p++)p in b?(d[p]=b[p],w[p]=L[p],E&&(E[p]=M[p],E[p](p))):d[p]=Sn(u);d=d.slice(0,N=v),S=R.slice(0)}return d});function u(v){if(w[p]=v,E){const[f,D]=Ve(p);return E[p]=D,A(R[p],f)}return A(R[p])}}}function Es(_,A){return ze(()=>_(A||{}))}function Gr(){return!0}const Gi={get(_,A,O){return A===Ya?O:_.get(A)},has(_,A){return _.has(A)},set:Gr,deleteProperty:Gr,getOwnPropertyDescriptor(_,A){return{configurable:!0,enumerable:!0,get(){return _.get(A)},set:Gr,deleteProperty:Gr}},ownKeys(_){return _.keys()}};function En(_){return(_=typeof _=="function"?_():_)==null?{}:_}function _s(..._){return new Proxy({get(A){for(let O=_.length-1;O>=0;O--){const S=En(_[O])[A];if(S!==void 0)return S}},has(A){for(let O=_.length-1;O>=0;O--)if(A in En(_[O]))return!0;return!1},keys(){const A=[];for(let O=0;O<_.length;O++)A.push(...Object.keys(En(_[O])));return[...new Set(A)]}},Gi)}function Fs(_,...A){const O=new Set(A.flat()),S=Object.getOwnPropertyDescriptors(_),d=A.map(w=>{const N={};for(let E=0;E<w.length;E++){const R=w[E];Object.defineProperty(N,R,S[R]?S[R]:{get(){return _[R]},set(){return!0}})}return N});return d.push(new Proxy({get(w){return O.has(w)?void 0:_[w]},has(w){return O.has(w)?!1:w in _},keys(){return Object.keys(_).filter(w=>!O.has(w))}},Gi)),d}function Is(_){const A="fallback"in _&&{fallback:()=>_.fallback};return vr(is(()=>_.each,_.children,A||void 0))}function xs(_){let A=!1;const O=vr(()=>_.when,void 0,{equals:(S,d)=>A?S===d:!S==!d});return vr(()=>{const S=O();if(S){const d=_.children;return(A=typeof d=="function"&&d.length>0)?ze(()=>d(S)):d}return _.fallback})}var In=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},te={exports:{}};(function(_,A){(function(S,d){_.exports=d()})(In,function(){return function(O){var S={};function d(w){if(S[w])return S[w].exports;var N=S[w]={exports:{},id:w,loaded:!1};return O[w].call(N.exports,N,N.exports,d),N.loaded=!0,N.exports}return d.m=O,d.c=S,d.p="",d(0)}([function(O,S,d){(function(w,N,E,R){Object.defineProperty(S,"__esModule",{value:!0});var m=d(2),p=d(9),u;(function(n){n[n.EPERM=1]="EPERM",n[n.ENOENT=2]="ENOENT",n[n.EIO=5]="EIO",n[n.EBADF=9]="EBADF",n[n.EACCES=13]="EACCES",n[n.EBUSY=16]="EBUSY",n[n.EEXIST=17]="EEXIST",n[n.ENOTDIR=20]="ENOTDIR",n[n.EISDIR=21]="EISDIR",n[n.EINVAL=22]="EINVAL",n[n.EFBIG=27]="EFBIG",n[n.ENOSPC=28]="ENOSPC",n[n.EROFS=30]="EROFS",n[n.ENOTEMPTY=39]="ENOTEMPTY",n[n.ENOTSUP=95]="ENOTSUP"})(u||(u={}));var v={};v[u.EPERM]="Operation not permitted.",v[u.ENOENT]="No such file or directory.",v[u.EIO]="Input/output error.",v[u.EBADF]="Bad file descriptor.",v[u.EACCES]="Permission denied.",v[u.EBUSY]="Resource busy or locked.",v[u.EEXIST]="File exists.",v[u.ENOTDIR]="File is not a directory.",v[u.EISDIR]="File is a directory.",v[u.EINVAL]="Invalid argument.",v[u.EFBIG]="File is too big.",v[u.ENOSPC]="No space left on disk.",v[u.EROFS]="Cannot modify a read-only file system.",v[u.ENOTEMPTY]="Directory is not empty.",v[u.ENOTSUP]="Operation is not supported.";var f=function(n){function t(r,e,i){e===void 0&&(e=v[r]),n.call(this,e),this.syscall="",this.errno=r,this.code=u[r],this.path=i,this.stack=new n().stack,this.message="Error: "+this.code+": "+e+(this.path?", '"+this.path+"'":"")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.fromJSON=function(e){var i=new t(0);return i.errno=e.errno,i.code=e.code,i.path=e.path,i.stack=e.stack,i.message=e.message,i},t.fromBuffer=function(e,i){return i===void 0&&(i=0),t.fromJSON(JSON.parse(e.toString("utf8",i+4,i+4+e.readUInt32LE(i))))},t.FileError=function(e,i){return new t(e,v[e],i)},t.ENOENT=function(e){return this.FileError(u.ENOENT,e)},t.EEXIST=function(e){return this.FileError(u.EEXIST,e)},t.EISDIR=function(e){return this.FileError(u.EISDIR,e)},t.ENOTDIR=function(e){return this.FileError(u.ENOTDIR,e)},t.EPERM=function(e){return this.FileError(u.EPERM,e)},t.ENOTEMPTY=function(e){return this.FileError(u.ENOTEMPTY,e)},t.prototype.toString=function(){return this.message},t.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},t.prototype.writeToBuffer=function(e,i){e===void 0&&(e=w.alloc(this.bufferSize())),i===void 0&&(i=0);var o=e.write(JSON.stringify(this.toJSON()),i+4);return e.writeUInt32LE(o,i),e},t.prototype.bufferSize=function(){return 4+w.byteLength(JSON.stringify(this.toJSON()))},t}(Error),D=Object.freeze({get ErrorCode(){return u},ErrorStrings:v,ApiError:f}),b;(function(n){n[n.NOP=0]="NOP",n[n.THROW_EXCEPTION=1]="THROW_EXCEPTION",n[n.TRUNCATE_FILE=2]="TRUNCATE_FILE",n[n.CREATE_FILE=3]="CREATE_FILE"})(b||(b={}));var L=function n(t){if(this.flagStr=t,n.validFlagStrs.indexOf(t)<0)throw new f(u.EINVAL,"Invalid flag: "+t)};L.getFileFlag=function(t){return L.flagCache.hasOwnProperty(t)?L.flagCache[t]:L.flagCache[t]=new L(t)},L.prototype.getFlagString=function(){return this.flagStr},L.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},L.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},L.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},L.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},L.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},L.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},L.prototype.pathExistsAction=function(){return this.isExclusive()?b.THROW_EXCEPTION:this.isTruncating()?b.TRUNCATE_FILE:b.NOP},L.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?b.CREATE_FILE:b.THROW_EXCEPTION},L.flagCache={},L.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];var M;(function(n){n[n.FILE=32768]="FILE",n[n.DIRECTORY=16384]="DIRECTORY",n[n.SYMLINK=40960]="SYMLINK"})(M||(M={}));var C=function(t,r,e,i,o,a){if(i===void 0&&(i=new Date),o===void 0&&(o=new Date),a===void 0&&(a=new Date),this.size=r,this.atime=i,this.mtime=o,this.ctime=a,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,e)this.mode=e;else switch(t){case M.FILE:this.mode=420;break;case M.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(r/512),this.mode<4096&&(this.mode|=t)};C.fromBuffer=function(t){var r=t.readUInt32LE(0),e=t.readUInt32LE(4),i=t.readDoubleLE(8),o=t.readDoubleLE(16),a=t.readDoubleLE(24);return new C(e&61440,r,e&4095,new Date(i),new Date(o),new Date(a))},C.prototype.toBuffer=function(){var t=w.alloc(32);return t.writeUInt32LE(this.size,0),t.writeUInt32LE(this.mode,4),t.writeDoubleLE(this.atime.getTime(),8),t.writeDoubleLE(this.mtime.getTime(),16),t.writeDoubleLE(this.ctime.getTime(),24),t},C.prototype.clone=function(){return new C(this.mode&61440,this.size,this.mode&4095,this.atime,this.mtime,this.ctime)},C.prototype.isFile=function(){return(this.mode&61440)===M.FILE},C.prototype.isDirectory=function(){return(this.mode&61440)===M.DIRECTORY},C.prototype.isSymbolicLink=function(){return(this.mode&61440)===M.SYMLINK},C.prototype.chmod=function(t){this.mode=this.mode&61440|t},C.prototype.isSocket=function(){return!1},C.prototype.isBlockDevice=function(){return!1},C.prototype.isCharacterDevice=function(){return!1},C.prototype.isFIFO=function(){return!1};var J=function(n,t){return n};function U(n){if(n)return n;throw new f(u.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function j(n,t){switch(typeof n){case"number":return n;case"string":var r=parseInt(n,8);return isNaN(r)?t:r;default:return t}}function yt(n){if(n instanceof Date)return n;if(typeof n=="number")return new Date(n*1e3);throw new f(u.EINVAL,"Invalid time.")}function G(n){if(n.indexOf("\0")>=0)throw new f(u.EINVAL,"Path must be a string without null bytes.");if(n==="")throw new f(u.EINVAL,"Path must not be empty.");return p.resolve(n)}function dt(n,t,r,e){switch(typeof n){case"object":return{encoding:typeof n.encoding<"u"?n.encoding:t,flag:typeof n.flag<"u"?n.flag:r,mode:j(n.mode,e)};case"string":return{encoding:n,flag:r,mode:e};default:return{encoding:t,flag:r,mode:e}}}function ct(){}var z=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};z.prototype.initialize=function(t){if(!t.constructor.isAvailable())throw new f(u.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=t},z.prototype._toUnixTimestamp=function(t){if(typeof t=="number")return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},z.prototype.getRootFS=function(){return this.root?this.root:null},z.prototype.rename=function(t,r,e){e===void 0&&(e=ct);var i=J(e,1);try{U(this.root).rename(G(t),G(r),i)}catch(o){i(o)}},z.prototype.renameSync=function(t,r){U(this.root).renameSync(G(t),G(r))},z.prototype.exists=function(t,r){r===void 0&&(r=ct);var e=J(r,1);try{return U(this.root).exists(G(t),e)}catch{return e(!1)}},z.prototype.existsSync=function(t){try{return U(this.root).existsSync(G(t))}catch{return!1}},z.prototype.stat=function(t,r){r===void 0&&(r=ct);var e=J(r,2);try{return U(this.root).stat(G(t),!1,e)}catch(i){return e(i)}},z.prototype.statSync=function(t){return U(this.root).statSync(G(t),!1)},z.prototype.lstat=function(t,r){r===void 0&&(r=ct);var e=J(r,2);try{return U(this.root).stat(G(t),!0,e)}catch(i){return e(i)}},z.prototype.lstatSync=function(t){return U(this.root).statSync(G(t),!0)},z.prototype.truncate=function(t,r,e){r===void 0&&(r=0),e===void 0&&(e=ct);var i=0;typeof r=="function"?e=r:typeof r=="number"&&(i=r);var o=J(e,1);try{if(i<0)throw new f(u.EINVAL);return U(this.root).truncate(G(t),i,o)}catch(a){return o(a)}},z.prototype.truncateSync=function(t,r){if(r===void 0&&(r=0),r<0)throw new f(u.EINVAL);return U(this.root).truncateSync(G(t),r)},z.prototype.unlink=function(t,r){r===void 0&&(r=ct);var e=J(r,1);try{return U(this.root).unlink(G(t),e)}catch(i){return e(i)}},z.prototype.unlinkSync=function(t){return U(this.root).unlinkSync(G(t))},z.prototype.open=function(t,r,e,i){var o=this;i===void 0&&(i=ct);var a=j(e,420);i=typeof e=="function"?e:i;var s=J(i,2);try{U(this.root).open(G(t),L.getFileFlag(r),a,function(h,y){y?s(h,o.getFdForFile(y)):s(h)})}catch(h){s(h)}},z.prototype.openSync=function(t,r,e){return e===void 0&&(e=420),this.getFdForFile(U(this.root).openSync(G(t),L.getFileFlag(r),j(e,420)))},z.prototype.readFile=function(t,r,e){r===void 0&&(r={}),e===void 0&&(e=ct);var i=dt(r,null,"r",null);e=typeof r=="function"?r:e;var o=J(e,2);try{var a=L.getFileFlag(i.flag);return a.isReadable()?U(this.root).readFile(G(t),i.encoding,a,o):o(new f(u.EINVAL,"Flag passed to readFile must allow for reading."))}catch(s){return o(s)}},z.prototype.readFileSync=function(t,r){r===void 0&&(r={});var e=dt(r,null,"r",null),i=L.getFileFlag(e.flag);if(!i.isReadable())throw new f(u.EINVAL,"Flag passed to readFile must allow for reading.");return U(this.root).readFileSync(G(t),e.encoding,i)},z.prototype.writeFile=function(t,r,e,i){e===void 0&&(e={}),i===void 0&&(i=ct);var o=dt(e,"utf8","w",420);i=typeof e=="function"?e:i;var a=J(i,1);try{var s=L.getFileFlag(o.flag);return s.isWriteable()?U(this.root).writeFile(G(t),r,o.encoding,s,o.mode,a):a(new f(u.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(h){return a(h)}},z.prototype.writeFileSync=function(t,r,e){var i=dt(e,"utf8","w",420),o=L.getFileFlag(i.flag);if(!o.isWriteable())throw new f(u.EINVAL,"Flag passed to writeFile must allow for writing.");return U(this.root).writeFileSync(G(t),r,i.encoding,o,i.mode)},z.prototype.appendFile=function(t,r,e,i){i===void 0&&(i=ct);var o=dt(e,"utf8","a",420);i=typeof e=="function"?e:i;var a=J(i,1);try{var s=L.getFileFlag(o.flag);if(!s.isAppendable())return a(new f(u.EINVAL,"Flag passed to appendFile must allow for appending."));U(this.root).appendFile(G(t),r,o.encoding,s,o.mode,a)}catch(h){a(h)}},z.prototype.appendFileSync=function(t,r,e){var i=dt(e,"utf8","a",420),o=L.getFileFlag(i.flag);if(!o.isAppendable())throw new f(u.EINVAL,"Flag passed to appendFile must allow for appending.");return U(this.root).appendFileSync(G(t),r,i.encoding,o,i.mode)},z.prototype.fstat=function(t,r){r===void 0&&(r=ct);var e=J(r,2);try{var i=this.fd2file(t);i.stat(e)}catch(o){e(o)}},z.prototype.fstatSync=function(t){return this.fd2file(t).statSync()},z.prototype.close=function(t,r){var e=this;r===void 0&&(r=ct);var i=J(r,1);try{this.fd2file(t).close(function(o){o||e.closeFd(t),i(o)})}catch(o){i(o)}},z.prototype.closeSync=function(t){this.fd2file(t).closeSync(),this.closeFd(t)},z.prototype.ftruncate=function(t,r,e){e===void 0&&(e=ct);var i=typeof r=="number"?r:0;e=typeof r=="function"?r:e;var o=J(e,1);try{var a=this.fd2file(t);if(i<0)throw new f(u.EINVAL);a.truncate(i,o)}catch(s){o(s)}},z.prototype.ftruncateSync=function(t,r){r===void 0&&(r=0);var e=this.fd2file(t);if(r<0)throw new f(u.EINVAL);e.truncateSync(r)},z.prototype.fsync=function(t,r){r===void 0&&(r=ct);var e=J(r,1);try{this.fd2file(t).sync(e)}catch(i){e(i)}},z.prototype.fsyncSync=function(t){this.fd2file(t).syncSync()},z.prototype.fdatasync=function(t,r){r===void 0&&(r=ct);var e=J(r,1);try{this.fd2file(t).datasync(e)}catch(i){e(i)}},z.prototype.fdatasyncSync=function(t){this.fd2file(t).datasyncSync()},z.prototype.write=function(t,r,e,i,o,a){a===void 0&&(a=ct);var s,h,y,T=null;if(typeof r=="string"){var P="utf8";switch(typeof e){case"function":a=e;break;case"number":T=e,P=typeof i=="string"?i:"utf8",a=typeof o=="function"?o:a;break;default:return a=typeof i=="function"?i:typeof o=="function"?o:a,a(new f(u.EINVAL,"Invalid arguments."))}s=w.from(r,P),h=0,y=s.length}else s=r,h=e,y=i,T=typeof o=="number"?o:null,a=typeof o=="function"?o:a;var Z=J(a,3);try{var et=this.fd2file(t);T==null&&(T=et.getPos()),et.write(s,h,y,T,Z)}catch(nt){Z(nt)}},z.prototype.writeSync=function(t,r,e,i,o){var a,s=0,h,y;if(typeof r=="string"){y=typeof e=="number"?e:null;var T=typeof i=="string"?i:"utf8";s=0,a=w.from(r,T),h=a.length}else a=r,s=e,h=i,y=typeof o=="number"?o:null;var P=this.fd2file(t);return y==null&&(y=P.getPos()),P.writeSync(a,s,h,y)},z.prototype.read=function(t,r,e,i,o,a){a===void 0&&(a=ct);var s,h,y,T,P;if(typeof r=="number"){y=r,s=e;var Z=i;a=typeof o=="function"?o:a,h=0,T=w.alloc(y),P=J(function(nt,lt,gt){if(nt)return a(nt);a(nt,gt.toString(Z),lt)},3)}else T=r,h=e,y=i,s=o,P=J(a,3);try{var et=this.fd2file(t);s==null&&(s=et.getPos()),et.read(T,h,y,s,P)}catch(nt){P(nt)}},z.prototype.readSync=function(t,r,e,i,o){var a=!1,s,h,y,T,P="utf8";typeof r=="number"?(y=r,T=e,P=i,h=0,s=w.alloc(y),a=!0):(s=r,h=e,y=i,T=o);var Z=this.fd2file(t);T==null&&(T=Z.getPos());var et=Z.readSync(s,h,y,T);return a?[s.toString(P),et]:et},z.prototype.fchown=function(t,r,e,i){i===void 0&&(i=ct);var o=J(i,1);try{this.fd2file(t).chown(r,e,o)}catch(a){o(a)}},z.prototype.fchownSync=function(t,r,e){this.fd2file(t).chownSync(r,e)},z.prototype.fchmod=function(t,r,e){var i=J(e,1);try{var o=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmod(o,i)}catch(a){i(a)}},z.prototype.fchmodSync=function(t,r){var e=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmodSync(e)},z.prototype.futimes=function(t,r,e,i){i===void 0&&(i=ct);var o=J(i,1);try{var a=this.fd2file(t);typeof r=="number"&&(r=new Date(r*1e3)),typeof e=="number"&&(e=new Date(e*1e3)),a.utimes(r,e,o)}catch(s){o(s)}},z.prototype.futimesSync=function(t,r,e){this.fd2file(t).utimesSync(yt(r),yt(e))},z.prototype.rmdir=function(t,r){r===void 0&&(r=ct);var e=J(r,1);try{t=G(t),U(this.root).rmdir(t,e)}catch(i){e(i)}},z.prototype.rmdirSync=function(t){return t=G(t),U(this.root).rmdirSync(t)},z.prototype.mkdir=function(t,r,e){e===void 0&&(e=ct),typeof r=="function"&&(e=r,r=511);var i=J(e,1);try{t=G(t),U(this.root).mkdir(t,r,i)}catch(o){i(o)}},z.prototype.mkdirSync=function(t,r){U(this.root).mkdirSync(G(t),j(r,511))},z.prototype.readdir=function(t,r){r===void 0&&(r=ct);var e=J(r,2);try{t=G(t),U(this.root).readdir(t,e)}catch(i){e(i)}},z.prototype.readdirSync=function(t){return t=G(t),U(this.root).readdirSync(t)},z.prototype.link=function(t,r,e){e===void 0&&(e=ct);var i=J(e,1);try{t=G(t),r=G(r),U(this.root).link(t,r,i)}catch(o){i(o)}},z.prototype.linkSync=function(t,r){return t=G(t),r=G(r),U(this.root).linkSync(t,r)},z.prototype.symlink=function(t,r,e,i){i===void 0&&(i=ct);var o=typeof e=="string"?e:"file";i=typeof e=="function"?e:i;var a=J(i,1);try{if(o!=="file"&&o!=="dir")return a(new f(u.EINVAL,"Invalid type: "+o));t=G(t),r=G(r),U(this.root).symlink(t,r,o,a)}catch(s){a(s)}},z.prototype.symlinkSync=function(t,r,e){if(!e)e="file";else if(e!=="file"&&e!=="dir")throw new f(u.EINVAL,"Invalid type: "+e);return t=G(t),r=G(r),U(this.root).symlinkSync(t,r,e)},z.prototype.readlink=function(t,r){r===void 0&&(r=ct);var e=J(r,2);try{t=G(t),U(this.root).readlink(t,e)}catch(i){e(i)}},z.prototype.readlinkSync=function(t){return t=G(t),U(this.root).readlinkSync(t)},z.prototype.chown=function(t,r,e,i){i===void 0&&(i=ct);var o=J(i,1);try{t=G(t),U(this.root).chown(t,!1,r,e,o)}catch(a){o(a)}},z.prototype.chownSync=function(t,r,e){t=G(t),U(this.root).chownSync(t,!1,r,e)},z.prototype.lchown=function(t,r,e,i){i===void 0&&(i=ct);var o=J(i,1);try{t=G(t),U(this.root).chown(t,!0,r,e,o)}catch(a){o(a)}},z.prototype.lchownSync=function(t,r,e){t=G(t),U(this.root).chownSync(t,!0,r,e)},z.prototype.chmod=function(t,r,e){e===void 0&&(e=ct);var i=J(e,1);try{var o=j(r,-1);if(o<0)throw new f(u.EINVAL,"Invalid mode.");U(this.root).chmod(G(t),!1,o,i)}catch(a){i(a)}},z.prototype.chmodSync=function(t,r){var e=j(r,-1);if(e<0)throw new f(u.EINVAL,"Invalid mode.");t=G(t),U(this.root).chmodSync(t,!1,e)},z.prototype.lchmod=function(t,r,e){e===void 0&&(e=ct);var i=J(e,1);try{var o=j(r,-1);if(o<0)throw new f(u.EINVAL,"Invalid mode.");U(this.root).chmod(G(t),!0,o,i)}catch(a){i(a)}},z.prototype.lchmodSync=function(t,r){var e=j(r,-1);if(e<1)throw new f(u.EINVAL,"Invalid mode.");U(this.root).chmodSync(G(t),!0,e)},z.prototype.utimes=function(t,r,e,i){i===void 0&&(i=ct);var o=J(i,1);try{U(this.root).utimes(G(t),yt(r),yt(e),o)}catch(a){o(a)}},z.prototype.utimesSync=function(t,r,e){U(this.root).utimesSync(G(t),yt(r),yt(e))},z.prototype.realpath=function(t,r,e){e===void 0&&(e=ct);var i=typeof r=="object"?r:{};e=typeof r=="function"?r:ct;var o=J(e,2);try{t=G(t),U(this.root).realpath(t,i,o)}catch(a){o(a)}},z.prototype.realpathSync=function(t,r){return r===void 0&&(r={}),t=G(t),U(this.root).realpathSync(t,r)},z.prototype.watchFile=function(t,r,e){throw new f(u.ENOTSUP)},z.prototype.unwatchFile=function(t,r){throw new f(u.ENOTSUP)},z.prototype.watch=function(t,r,e){throw new f(u.ENOTSUP)},z.prototype.access=function(t,r,e){throw new f(u.ENOTSUP)},z.prototype.accessSync=function(t,r){throw new f(u.ENOTSUP)},z.prototype.createReadStream=function(t,r){throw new f(u.ENOTSUP)},z.prototype.createWriteStream=function(t,r){throw new f(u.ENOTSUP)},z.prototype.wrapCallbacks=function(t){J=t},z.prototype.getFdForFile=function(t){var r=this.nextFd++;return this.fdMap[r]=t,r},z.prototype.fd2file=function(t){var r=this.fdMap[t];if(r)return r;throw new f(u.EBADF,"Invalid file descriptor.")},z.prototype.closeFd=function(t){delete this.fdMap[t]},z.Stats=C;var rt=new z,ft={},Nt=z.prototype;Object.keys(Nt).forEach(function(n){typeof rt[n]=="function"?ft[n]=function(){return rt[n].apply(rt,arguments)}:ft[n]=rt[n]}),ft.changeFSModule=function(n){rt=n},ft.getFSModule=function(){return rt},ft.FS=z;function wt(n,t,r,e,i){return n<t||r<t?n>r?r+1:n+1:e===i?t:t+1}function At(n,t){if(n===t)return 0;if(n.length>t.length){var r=n;n=t,t=r}for(var e=n.length,i=t.length;e>0&&n.charCodeAt(e-1)===t.charCodeAt(i-1);)e--,i--;for(var o=0;o<e&&n.charCodeAt(o)===t.charCodeAt(o);)o++;if(e-=o,i-=o,e===0||i===1)return i;for(var a=new Array(e<<1),s=0;s<e;)a[e+s]=n.charCodeAt(o+s),a[s]=++s;var h,y,T,P,Z;for(h=0;h+3<i;)for(var et=t.charCodeAt(o+(y=h)),nt=t.charCodeAt(o+(T=h+1)),lt=t.charCodeAt(o+(P=h+2)),gt=t.charCodeAt(o+(Z=h+3)),xt=h+=4,Zt=0;Zt<e;){var fe=a[e+Zt],Le=a[Zt];y=wt(Le,y,T,et,fe),T=wt(y,T,P,nt,fe),P=wt(T,P,Z,lt,fe),xt=wt(P,Z,xt,gt,fe),a[Zt++]=xt,Z=P,P=T,T=y,y=Le}for(var De=0;h<i;){var dr=t.charCodeAt(o+(y=h));De=++h;for(var Be=0;Be<e;Be++){var Ue=a[Be];a[Be]=De=Ue<y||De<y?Ue>De?De+1:Ue+1:dr===a[e+Be]?y:y+1,y=Ue}}return De}function kt(n,t,r){n&&console.warn("["+t+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+t+".Create("+JSON.stringify(r)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}var _t=typeof navigator<"u"&&!!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident")!==-1),qt=typeof window>"u";function H(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function W(n,t,r){r.existsSync(n)||(W(p.dirname(n),t,r),r.mkdirSync(n,t))}function $(n){var t=ht(n),r=t.byteOffset,e=t.byteLength;return r===0&&e===t.buffer.byteLength?t.buffer:t.buffer.slice(r,r+e)}function ht(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function Ot(n){return n instanceof w?n:n instanceof Uint8Array?St(n):w.from(n)}function St(n){return n instanceof w?n:n.byteOffset===0&&n.byteLength===n.buffer.byteLength?Ft(n.buffer):w.from(n.buffer,n.byteOffset,n.byteLength)}function Ft(n){return w.from(n)}function Rt(n,t,r){if(t===void 0&&(t=0),r===void 0&&(r=n.length),t<0||r<0||r>n.length||t>r)throw new TypeError("Invalid slice bounds on buffer of length "+n.length+": ["+t+", "+r+"]");if(n.length===0)return Mt();var e=ht(n),i=n[0],o=(i+1)%255;return n[0]=o,e[0]===o?(e[0]=i,St(e.slice(t,r))):(n[0]=i,St(e.subarray(t,r)))}var Wt=null;function Mt(){return Wt||(Wt=w.alloc(0))}function x(n,t){w.isBuffer(n)?t():t(new f(u.EINVAL,"option must be a Buffer."))}function k(n,t,r){var e=n.Options,i=n.Name,o=0,a=!1,s=!1;function h(Z){a||(Z&&(a=!0,r(Z)),o--,o===0&&s&&r())}var y=function(Z){if(e.hasOwnProperty(Z)){var et=e[Z],nt=t[Z];if(nt==null){if(!et.optional){var lt=Object.keys(t).filter(function(xt){return!(xt in e)}).map(function(xt){return{str:xt,distance:At(Z,xt)}}).filter(function(xt){return xt.distance<5}).sort(function(xt,Zt){return xt.distance-Zt.distance});return a?{}:(a=!0,{v:r(new f(u.EINVAL,"["+i+"] Required option '"+Z+"' not provided."+(lt.length>0?" You provided unrecognized option '"+lt[0].str+"'; perhaps you meant to type '"+Z+"'.":"")+`
Option description: `+et.description))})}}else{var gt=!1;if(Array.isArray(et.type)?gt=et.type.indexOf(typeof nt)!==-1:gt=typeof nt===et.type,gt)et.validator&&(o++,et.validator(nt,h));else return a?{}:(a=!0,{v:r(new f(u.EINVAL,"["+i+"] Value provided for option "+Z+" is not the proper type. Expected "+(Array.isArray(et.type)?"one of {"+et.type.join(", ")+"}":et.type)+", but received "+typeof nt+`
Option description: `+et.description))})}}};for(var T in e){var P=y(T);if(P)return P.v}s=!0,o===0&&!a&&r()}var K=Object.freeze({deprecationMessage:kt,isIE:_t,isWebWorker:qt,fail:H,mkdirpSync:W,buffer2ArrayBuffer:$,buffer2Uint8array:ht,arrayish2Buffer:Ot,uint8Array2Buffer:St,arrayBuffer2Buffer:Ft,copyingSlice:Rt,emptyBuffer:Mt,bufferValidator:x,checkOptions:k}),it=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};it.prototype.open=function(t){var r=this.fs.realPath(t.node),e=this.FS;try{e.isFile(t.node.mode)&&(t.nfd=this.nodefs.openSync(r,this.fs.flagsToPermissionString(t.flags)))}catch(i){throw i.code?new e.ErrnoError(this.ERRNO_CODES[i.code]):i}},it.prototype.close=function(t){var r=this.FS;try{r.isFile(t.node.mode)&&t.nfd&&this.nodefs.closeSync(t.nfd)}catch(e){throw e.code?new r.ErrnoError(this.ERRNO_CODES[e.code]):e}},it.prototype.read=function(t,r,e,i,o){try{return this.nodefs.readSync(t.nfd,St(r),e,i,o)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},it.prototype.write=function(t,r,e,i,o){try{return this.nodefs.writeSync(t.nfd,St(r),e,i,o)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},it.prototype.llseek=function(t,r,e){var i=r;if(e===1)i+=t.position;else if(e===2&&this.FS.isFile(t.node.mode))try{var o=this.nodefs.fstatSync(t.nfd);i+=o.size}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}if(i<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return t.position=i,i};var vt=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};vt.prototype.getattr=function(t){var r=this.fs.realPath(t),e;try{e=this.nodefs.lstatSync(r)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}return{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},vt.prototype.setattr=function(t,r){var e=this.fs.realPath(t);try{if(r.mode!==void 0&&(this.nodefs.chmodSync(e,r.mode),t.mode=r.mode),r.timestamp!==void 0){var i=new Date(r.timestamp);this.nodefs.utimesSync(e,i,i)}}catch(o){if(!o.code)throw o;if(o.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[o.code])}if(r.size!==void 0)try{this.nodefs.truncateSync(e,r.size)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},vt.prototype.lookup=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r),i=this.fs.getMode(e);return this.fs.createNode(t,r,i)},vt.prototype.mknod=function(t,r,e,i){var o=this.fs.createNode(t,r,e,i),a=this.fs.realPath(o);try{this.FS.isDir(o.mode)?this.nodefs.mkdirSync(a,o.mode):this.nodefs.writeFileSync(a,"",{mode:o.mode})}catch(s){throw s.code?new this.FS.ErrnoError(this.ERRNO_CODES[s.code]):s}return o},vt.prototype.rename=function(t,r,e){var i=this.fs.realPath(t),o=this.PATH.join2(this.fs.realPath(r),e);try{this.nodefs.renameSync(i,o),t.name=e,t.parent=r}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},vt.prototype.unlink=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.unlinkSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},vt.prototype.rmdir=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.rmdirSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},vt.prototype.readdir=function(t){var r=this.fs.realPath(t);try{var e=this.nodefs.readdirSync(r);return e.push(".",".."),e}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},vt.prototype.symlink=function(t,r,e){var i=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.symlinkSync(e,i)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},vt.prototype.readlink=function(t){var r=this.fs.realPath(t);try{return this.nodefs.readlinkSync(r)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}};var It=function(t,r,e,i){t===void 0&&(t=self.FS),r===void 0&&(r=self.PATH),e===void 0&&(e=self.ERRNO_CODES),i===void 0&&(i=ft),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=i,this.FS=t,this.PATH=r,this.ERRNO_CODES=e,this.node_ops=new vt(this),this.stream_ops=new it(this)};It.prototype.mount=function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},It.prototype.createNode=function(t,r,e,i){var o=this.FS;if(!o.isDir(e)&&!o.isFile(e)&&!o.isLink(e))throw new o.ErrnoError(this.ERRNO_CODES.EINVAL);var a=o.createNode(t,r,e);return a.node_ops=this.node_ops,a.stream_ops=this.stream_ops,a},It.prototype.getMode=function(t){var r;try{r=this.nodefs.lstatSync(t)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}return r.mode},It.prototype.realPath=function(t){for(var r=[];t.parent!==t;)r.push(t.name),t=t.parent;return r.push(t.mount.opts.root),r.reverse(),this.PATH.join.apply(null,r)},It.prototype.flagsToPermissionString=function(t){var r=typeof t=="string"?parseInt(t,10):t;return r&=8191,r in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[r]:t},It.prototype.getNodeFS=function(){return this.nodefs},It.prototype.getFS=function(){return this.FS},It.prototype.getPATH=function(){return this.PATH},It.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var tt=function(){};tt.prototype.supportsLinks=function(){return!1},tt.prototype.diskSpace=function(t,r){r(0,0)},tt.prototype.openFile=function(t,r,e){throw new f(u.ENOTSUP)},tt.prototype.createFile=function(t,r,e,i){throw new f(u.ENOTSUP)},tt.prototype.open=function(t,r,e,i){var o=this,a=function(s,h){if(s)switch(r.pathNotExistsAction()){case b.CREATE_FILE:return o.stat(p.dirname(t),!1,function(y,T){y?i(y):T&&!T.isDirectory()?i(f.ENOTDIR(p.dirname(t))):o.createFile(t,r,e,i)});case b.THROW_EXCEPTION:return i(f.ENOENT(t));default:return i(new f(u.EINVAL,"Invalid FileFlag object."))}else{if(h&&h.isDirectory())return i(f.EISDIR(t));switch(r.pathExistsAction()){case b.THROW_EXCEPTION:return i(f.EEXIST(t));case b.TRUNCATE_FILE:return o.openFile(t,r,function(y,T){y?i(y):T?T.truncate(0,function(){T.sync(function(){i(null,T)})}):H()});case b.NOP:return o.openFile(t,r,i);default:return i(new f(u.EINVAL,"Invalid FileFlag object."))}}};this.stat(t,!1,a)},tt.prototype.rename=function(t,r,e){e(new f(u.ENOTSUP))},tt.prototype.renameSync=function(t,r){throw new f(u.ENOTSUP)},tt.prototype.stat=function(t,r,e){e(new f(u.ENOTSUP))},tt.prototype.statSync=function(t,r){throw new f(u.ENOTSUP)},tt.prototype.openFileSync=function(t,r,e){throw new f(u.ENOTSUP)},tt.prototype.createFileSync=function(t,r,e){throw new f(u.ENOTSUP)},tt.prototype.openSync=function(t,r,e){var i;try{i=this.statSync(t,!1)}catch{switch(r.pathNotExistsAction()){case b.CREATE_FILE:var o=this.statSync(p.dirname(t),!1);if(!o.isDirectory())throw f.ENOTDIR(p.dirname(t));return this.createFileSync(t,r,e);case b.THROW_EXCEPTION:throw f.ENOENT(t);default:throw new f(u.EINVAL,"Invalid FileFlag object.")}}if(i.isDirectory())throw f.EISDIR(t);switch(r.pathExistsAction()){case b.THROW_EXCEPTION:throw f.EEXIST(t);case b.TRUNCATE_FILE:return this.unlinkSync(t),this.createFileSync(t,r,i.mode);case b.NOP:return this.openFileSync(t,r,e);default:throw new f(u.EINVAL,"Invalid FileFlag object.")}},tt.prototype.unlink=function(t,r){r(new f(u.ENOTSUP))},tt.prototype.unlinkSync=function(t){throw new f(u.ENOTSUP)},tt.prototype.rmdir=function(t,r){r(new f(u.ENOTSUP))},tt.prototype.rmdirSync=function(t){throw new f(u.ENOTSUP)},tt.prototype.mkdir=function(t,r,e){e(new f(u.ENOTSUP))},tt.prototype.mkdirSync=function(t,r){throw new f(u.ENOTSUP)},tt.prototype.readdir=function(t,r){r(new f(u.ENOTSUP))},tt.prototype.readdirSync=function(t){throw new f(u.ENOTSUP)},tt.prototype.exists=function(t,r){this.stat(t,null,function(e){r(!e)})},tt.prototype.existsSync=function(t){try{return this.statSync(t,!0),!0}catch{return!1}},tt.prototype.realpath=function(t,r,e){if(this.supportsLinks())for(var i=t.split(p.sep),o=0;o<i.length;o++){var a=i.slice(0,o+1);i[o]=p.join.apply(null,a)}else this.exists(t,function(s){s?e(null,t):e(f.ENOENT(t))})},tt.prototype.realpathSync=function(t,r){if(this.supportsLinks()){for(var e=t.split(p.sep),i=0;i<e.length;i++){var o=e.slice(0,i+1);e[i]=p.join.apply(p,o)}return e.join(p.sep)}else{if(this.existsSync(t))return t;throw f.ENOENT(t)}},tt.prototype.truncate=function(t,r,e){this.open(t,L.getFileFlag("r+"),420,function(i,o){if(i)return e(i);o.truncate(r,function(a){o.close(function(s){e(a||s)})})})},tt.prototype.truncateSync=function(t,r){var e=this.openSync(t,L.getFileFlag("r+"),420);try{e.truncateSync(r)}catch(i){throw i}finally{e.closeSync()}},tt.prototype.readFile=function(t,r,e,i){var o=i;this.open(t,e,420,function(a,s){if(a)return i(a);i=function(h,y){s.close(function(T){return h||(h=T),o(h,y)})},s.stat(function(h,y){if(h)return i(h);var T=w.alloc(y.size);s.read(T,0,y.size,0,function(P){if(P)return i(P);if(r===null)return i(P,T);try{i(null,T.toString(r))}catch(Z){i(Z)}})})})},tt.prototype.readFileSync=function(t,r,e){var i=this.openSync(t,e,420);try{var o=i.statSync(),a=w.alloc(o.size);return i.readSync(a,0,o.size,0),i.closeSync(),r===null?a:a.toString(r)}finally{i.closeSync()}},tt.prototype.writeFile=function(t,r,e,i,o,a){var s=a;this.open(t,i,420,function(h,y){if(h)return a(h);a=function(T){y.close(function(P){s(T||P)})};try{typeof r=="string"&&(r=w.from(r,e))}catch(T){return a(T)}y.write(r,0,r.length,0,a)})},tt.prototype.writeFileSync=function(t,r,e,i,o){var a=this.openSync(t,i,o);try{typeof r=="string"&&(r=w.from(r,e)),a.writeSync(r,0,r.length,0)}finally{a.closeSync()}},tt.prototype.appendFile=function(t,r,e,i,o,a){var s=a;this.open(t,i,o,function(h,y){if(h)return a(h);a=function(T){y.close(function(P){s(T||P)})},typeof r=="string"&&(r=w.from(r,e)),y.write(r,0,r.length,null,a)})},tt.prototype.appendFileSync=function(t,r,e,i,o){var a=this.openSync(t,i,o);try{typeof r=="string"&&(r=w.from(r,e)),a.writeSync(r,0,r.length,null)}finally{a.closeSync()}},tt.prototype.chmod=function(t,r,e,i){i(new f(u.ENOTSUP))},tt.prototype.chmodSync=function(t,r,e){throw new f(u.ENOTSUP)},tt.prototype.chown=function(t,r,e,i,o){o(new f(u.ENOTSUP))},tt.prototype.chownSync=function(t,r,e,i){throw new f(u.ENOTSUP)},tt.prototype.utimes=function(t,r,e,i){i(new f(u.ENOTSUP))},tt.prototype.utimesSync=function(t,r,e){throw new f(u.ENOTSUP)},tt.prototype.link=function(t,r,e){e(new f(u.ENOTSUP))},tt.prototype.linkSync=function(t,r){throw new f(u.ENOTSUP)},tt.prototype.symlink=function(t,r,e,i){i(new f(u.ENOTSUP))},tt.prototype.symlinkSync=function(t,r,e){throw new f(u.ENOTSUP)},tt.prototype.readlink=function(t,r){r(new f(u.ENOTSUP))},tt.prototype.readlinkSync=function(t){throw new f(u.ENOTSUP)};var ne=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.supportsSynch=function(){return!0},t.prototype.rename=function(e,i,o){try{this.renameSync(e,i),o()}catch(a){o(a)}},t.prototype.stat=function(e,i,o){try{o(null,this.statSync(e,i))}catch(a){o(a)}},t.prototype.open=function(e,i,o,a){try{a(null,this.openSync(e,i,o))}catch(s){a(s)}},t.prototype.unlink=function(e,i){try{this.unlinkSync(e),i()}catch(o){i(o)}},t.prototype.rmdir=function(e,i){try{this.rmdirSync(e),i()}catch(o){i(o)}},t.prototype.mkdir=function(e,i,o){try{this.mkdirSync(e,i),o()}catch(a){o(a)}},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.chmod=function(e,i,o,a){try{this.chmodSync(e,i,o),a()}catch(s){a(s)}},t.prototype.chown=function(e,i,o,a,s){try{this.chownSync(e,i,o,a),s()}catch(h){s(h)}},t.prototype.utimes=function(e,i,o,a){try{this.utimesSync(e,i,o),a()}catch(s){a(s)}},t.prototype.link=function(e,i,o){try{this.linkSync(e,i),o()}catch(a){o(a)}},t.prototype.symlink=function(e,i,o,a){try{this.symlinkSync(e,i,o),a()}catch(s){a(s)}},t.prototype.readlink=function(e,i){try{i(null,this.readlinkSync(e))}catch(o){i(o)}},t}(tt),mt=function(){};mt.prototype.sync=function(t){t(new f(u.ENOTSUP))},mt.prototype.syncSync=function(){throw new f(u.ENOTSUP)},mt.prototype.datasync=function(t){this.sync(t)},mt.prototype.datasyncSync=function(){return this.syncSync()},mt.prototype.chown=function(t,r,e){e(new f(u.ENOTSUP))},mt.prototype.chownSync=function(t,r){throw new f(u.ENOTSUP)},mt.prototype.chmod=function(t,r){r(new f(u.ENOTSUP))},mt.prototype.chmodSync=function(t){throw new f(u.ENOTSUP)},mt.prototype.utimes=function(t,r,e){e(new f(u.ENOTSUP))},mt.prototype.utimesSync=function(t,r){throw new f(u.ENOTSUP)};var se=function(n){function t(r,e,i,o,a){if(n.call(this),this._pos=0,this._dirty=!1,this._fs=r,this._path=e,this._flag=i,this._stat=o,a?this._buffer=a:this._buffer=Mt(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getBuffer=function(){return this._buffer},t.prototype.getStats=function(){return this._stat},t.prototype.getFlag=function(){return this._flag},t.prototype.getPath=function(){return this._path},t.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},t.prototype.advancePos=function(e){return this._pos+=e},t.prototype.setPos=function(e){return this._pos=e},t.prototype.sync=function(e){try{this.syncSync(),e()}catch(i){e(i)}},t.prototype.syncSync=function(){throw new f(u.ENOTSUP)},t.prototype.close=function(e){try{this.closeSync(),e()}catch(i){e(i)}},t.prototype.closeSync=function(){throw new f(u.ENOTSUP)},t.prototype.stat=function(e){try{e(null,this._stat.clone())}catch(i){e(i)}},t.prototype.statSync=function(){return this._stat.clone()},t.prototype.truncate=function(e,i){try{this.truncateSync(e),this._flag.isSynchronous()&&!ft.getRootFS().supportsSynch()&&this.sync(i),i()}catch(o){return i(o)}},t.prototype.truncateSync=function(e){if(this._dirty=!0,!this._flag.isWriteable())throw new f(u.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,e>this._buffer.length){var i=w.alloc(e-this._buffer.length,0);this.writeSync(i,0,i.length,this._buffer.length),this._flag.isSynchronous()&&ft.getRootFS().supportsSynch()&&this.syncSync();return}this._stat.size=e;var o=w.alloc(e);this._buffer.copy(o,0,0,e),this._buffer=o,this._flag.isSynchronous()&&ft.getRootFS().supportsSynch()&&this.syncSync()},t.prototype.write=function(e,i,o,a,s){try{s(null,this.writeSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.writeSync=function(e,i,o,a){if(this._dirty=!0,a==null&&(a=this.getPos()),!this._flag.isWriteable())throw new f(u.EPERM,"File not opened with a writeable mode.");var s=a+o;if(s>this._stat.size&&(this._stat.size=s,s>this._buffer.length)){var h=w.alloc(s);this._buffer.copy(h),this._buffer=h}var y=e.copy(this._buffer,a,i,i+o);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),y):(this.setPos(a+y),y)},t.prototype.read=function(e,i,o,a,s){try{s(null,this.readSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.readSync=function(e,i,o,a){if(!this._flag.isReadable())throw new f(u.EPERM,"File not opened with a readable mode.");a==null&&(a=this.getPos());var s=a+o;s>this._stat.size&&(o=this._stat.size-a);var h=this._buffer.copy(e,i,a,a+o);return this._stat.atime=new Date,this._pos=a+o,h},t.prototype.chmod=function(e,i){try{this.chmodSync(e),i()}catch(o){i(o)}},t.prototype.chmodSync=function(e){if(!this._fs.supportsProps())throw new f(u.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()},t.prototype.isDirty=function(){return this._dirty},t.prototype.resetDirty=function(){this._dirty=!1},t}(mt),le=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.close=function(e){e()},t.prototype.closeSync=function(){},t}(se),xe=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(se),F=function(n){function t(r,e,i){if(i===void 0&&(i=!0),n.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=r,this._async=e,!r.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");kt(i,t.Name,{sync:"sync file system instance",async:"async file system instance"})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.sync,e.async,!1);o.initialize(function(a){a?i(a):i(null,o)},!1)}catch(a){i(a)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){return t.Name},t.prototype._syncSync=function(e){this._sync.writeFileSync(e.getPath(),e.getBuffer(),null,L.getFileFlag("w"),e.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[e.getPath(),e.getBuffer(),null,e.getFlag(),e.getStats().mode]})},t.prototype.initialize=function(e,i){var o=this;i===void 0&&(i=!0),i&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var a=this._initializeCallbacks,s=function(P){o._isInitialized=!P,o._initializeCallbacks=[],a.forEach(function(Z){return Z(P)})};if(this._isInitialized)e();else if(a.push(e)===1){var h=function(P,Z,et){P!=="/"&&o._sync.mkdirSync(P,Z),o._async.readdir(P,function(nt,lt){var gt=0;function xt(Zt){Zt?et(Zt):gt<lt.length?(T(p.join(P,lt[gt]),xt),gt++):et()}nt?et(nt):xt()})},y=function(P,Z,et){o._async.readFile(P,null,L.getFileFlag("r"),function(nt,lt){if(nt)et(nt);else try{o._sync.writeFileSync(P,lt,null,L.getFileFlag("w"),Z)}catch(gt){nt=gt}finally{et(nt)}})},T=function(P,Z){o._async.stat(P,!1,function(et,nt){et?Z(et):nt.isDirectory()?h(P,nt.mode,Z):y(P,nt.mode,Z)})};h("/",0,s)}},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},t.prototype.renameSync=function(e,i){this.checkInitialized(),this._sync.renameSync(e,i),this.enqueueOp({apiMethod:"rename",arguments:[e,i]})},t.prototype.statSync=function(e,i){return this.checkInitialized(),this._sync.statSync(e,i)},t.prototype.openSync=function(e,i,o){this.checkInitialized();var a=this._sync.openSync(e,i,o);return a.closeSync(),new xe(this,e,i,this._sync.statSync(e,!1),this._sync.readFileSync(e,null,L.getFileFlag("r")))},t.prototype.unlinkSync=function(e){this.checkInitialized(),this._sync.unlinkSync(e),this.enqueueOp({apiMethod:"unlink",arguments:[e]})},t.prototype.rmdirSync=function(e){this.checkInitialized(),this._sync.rmdirSync(e),this.enqueueOp({apiMethod:"rmdir",arguments:[e]})},t.prototype.mkdirSync=function(e,i){this.checkInitialized(),this._sync.mkdirSync(e,i),this.enqueueOp({apiMethod:"mkdir",arguments:[e,i]})},t.prototype.readdirSync=function(e){return this.checkInitialized(),this._sync.readdirSync(e)},t.prototype.existsSync=function(e){return this.checkInitialized(),this._sync.existsSync(e)},t.prototype.chmodSync=function(e,i,o){this.checkInitialized(),this._sync.chmodSync(e,i,o),this.enqueueOp({apiMethod:"chmod",arguments:[e,i,o]})},t.prototype.chownSync=function(e,i,o,a){this.checkInitialized(),this._sync.chownSync(e,i,o,a),this.enqueueOp({apiMethod:"chown",arguments:[e,i,o,a]})},t.prototype.utimesSync=function(e,i,o){this.checkInitialized(),this._sync.utimesSync(e,i,o),this.enqueueOp({apiMethod:"utimes",arguments:[e,i,o]})},t.prototype.checkInitialized=function(){if(!this._isInitialized)throw new f(u.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},t.prototype.enqueueOp=function(e){var i=this;if(this._queue.push(e),!this._queueRunning){this._queueRunning=!0;var o=function(a){if(a&&console.error("WARNING: File system has desynchronized. Received following error: "+a+`
$`),i._queue.length>0){var s=i._queue.shift(),h=s.arguments;h.push(o),i._async[s.apiMethod].apply(i._async,h)}else i._queueRunning=!1};o()}},t}(ne);F.Name="AsyncMirror",F.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};function c(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}var l=Math.max;function I(n,t,r){return t=l(t===void 0?n.length-1:t,0),function(){for(var e=arguments,i=-1,o=l(e.length-t,0),a=Array(o);++i<o;)a[i]=e[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=e[i];return s[t]=r(a),c(n,this,s)}}function B(n){return n}function X(n,t){return I(n,t,B)}var Q=function(n){return X(function(t){var r=t.pop();n.call(this,t,r)})};function bt(n){return X(function(t,r){var e=Q(function(i,o){var a=this;return n(t,function(s,h){s.apply(a,i.concat(h))},o)});return r.length?e.apply(this,r):e})}var Dt=typeof N=="object"&&N&&N.Object===Object&&N,Pt=typeof self=="object"&&self&&self.Object===Object&&self,Gt=Dt||Pt||Function("return this")(),Ct=Gt.Symbol,Oe=Object.prototype,ir=Oe.hasOwnProperty,Xe=Oe.toString,Ye=Ct?Ct.toStringTag:void 0;function en(n){var t=ir.call(n,Ye),r=n[Ye];try{n[Ye]=void 0;var e=!0}catch{}var i=Xe.call(n);return e&&(t?n[Ye]=r:delete n[Ye]),i}var rn=Object.prototype,nn=rn.toString;function V(n){return nn.call(n)}var at="[object Null]",g="[object Undefined]",ut=Ct?Ct.toStringTag:void 0;function Bt(n){return n==null?n===void 0?g:at:ut&&ut in Object(n)?en(n):V(n)}function ot(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var pe="[object AsyncFunction]",st="[object Function]",Kt="[object GeneratorFunction]",q="[object Proxy]";function Y(n){if(!ot(n))return!1;var t=Bt(n);return t==st||t==Kt||t==pe||t==q}var or=9007199254740991;function Ut(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=or}function pt(n){return n!=null&&Ut(n.length)&&!Y(n)}var qe={};function Ae(){}function Ht(n){return function(){if(n!==null){var t=n;n=null,t.apply(this,arguments)}}}var Tt=typeof Symbol=="function"&&Symbol.iterator,ie=function(n){return Tt&&n[Tt]&&n[Tt]()};function he(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function oe(n){return n!=null&&typeof n=="object"}var ar="[object Arguments]";function Ge(n){return oe(n)&&Bt(n)==ar}var Xt=Object.prototype,de=Xt.hasOwnProperty,re=Xt.propertyIsEnumerable,ke=Ge(function(){return arguments}())?Ge:function(n){return oe(n)&&de.call(n,"callee")&&!re.call(n,"callee")},_e=Array.isArray;function Lr(){return!1}var Rn=typeof S=="object"&&S&&!S.nodeType&&S,Tn=Rn&&typeof E=="object"&&E&&!E.nodeType&&E,Ki=Tn&&Tn.exports===Rn,Ln=Ki?Gt.Buffer:void 0,Qi=Ln?Ln.isBuffer:void 0,$i=Qi||Lr,to=9007199254740991,eo=/^(?:0|[1-9]\d*)$/;function ro(n,t){return t=t??to,!!t&&(typeof n=="number"||eo.test(n))&&n>-1&&n%1==0&&n<t}var no="[object Arguments]",io="[object Array]",oo="[object Boolean]",ao="[object Date]",so="[object Error]",uo="[object Function]",fo="[object Map]",co="[object Number]",lo="[object Object]",ho="[object RegExp]",po="[object Set]",yo="[object String]",vo="[object WeakMap]",go="[object ArrayBuffer]",wo="[object DataView]",mo="[object Float32Array]",So="[object Float64Array]",Eo="[object Int8Array]",_o="[object Int16Array]",Fo="[object Int32Array]",Io="[object Uint8Array]",xo="[object Uint8ClampedArray]",Oo="[object Uint16Array]",ko="[object Uint32Array]",zt={};zt[mo]=zt[So]=zt[Eo]=zt[_o]=zt[Fo]=zt[Io]=zt[xo]=zt[Oo]=zt[ko]=!0,zt[no]=zt[io]=zt[go]=zt[oo]=zt[wo]=zt[ao]=zt[so]=zt[uo]=zt[fo]=zt[co]=zt[lo]=zt[ho]=zt[po]=zt[yo]=zt[vo]=!1;function bo(n){return oe(n)&&Ut(n.length)&&!!zt[Bt(n)]}function No(n){return function(t){return n(t)}}var Dn=typeof S=="object"&&S&&!S.nodeType&&S,An=Dn&&typeof E=="object"&&E&&!E.nodeType&&E,Ro=An&&An.exports===Dn,on=Ro&&Dt.process,Cn=function(){try{return on&&on.binding&&on.binding("util")}catch{}}(),Mn=Cn&&Cn.isTypedArray,To=Mn?No(Mn):bo,Lo=Object.prototype,Do=Lo.hasOwnProperty;function Ao(n,t){var r=_e(n),e=!r&&ke(n),i=!r&&!e&&$i(n),o=!r&&!e&&!i&&To(n),a=r||e||i||o,s=a?he(n.length,String):[],h=s.length;for(var y in n)(t||Do.call(n,y))&&!(a&&(y=="length"||i&&(y=="offset"||y=="parent")||o&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||ro(y,h)))&&s.push(y);return s}var Co=Object.prototype;function Mo(n){var t=n&&n.constructor,r=typeof t=="function"&&t.prototype||Co;return n===r}function Po(n,t){return function(r){return n(t(r))}}var Bo=Po(Object.keys,Object),Uo=Object.prototype,zo=Uo.hasOwnProperty;function jo(n){if(!Mo(n))return Bo(n);var t=[];for(var r in Object(n))zo.call(n,r)&&r!="constructor"&&t.push(r);return t}function Wo(n){return pt(n)?Ao(n):jo(n)}function Ho(n){var t=-1,r=n.length;return function(){return++t<r?{value:n[t],key:t}:null}}function Vo(n){var t=-1;return function(){var e=n.next();return e.done?null:(t++,{value:e.value,key:t})}}function Zo(n){var t=Wo(n),r=-1,e=t.length;return function(){var o=t[++r];return r<e?{value:n[o],key:o}:null}}function Xo(n){if(pt(n))return Ho(n);var t=ie(n);return t?Vo(t):Zo(n)}function Pn(n){return function(){if(n===null)throw new Error("Callback was already called.");var t=n;n=null,t.apply(this,arguments)}}function Bn(n){return function(t,r,e){if(e=Ht(e||Ae),n<=0||!t)return e(null);var i=Xo(t),o=!1,a=0;function s(y,T){if(a-=1,y)o=!0,e(y);else{if(T===qe||o&&a<=0)return o=!0,e(null);h()}}function h(){for(;a<n&&!o;){var y=i();if(y===null){o=!0,a<=0&&e(null);return}a+=1,r(y.value,y.key,Pn(s))}}h()}}function Un(n,t,r,e){Bn(t)(n,r,e)}function an(n,t){return function(r,e,i){return n(r,t,e,i)}}function Yo(n,t,r){r=Ht(r||Ae);var e=0,i=0,o=n.length;o===0&&r(null);function a(s,h){s?r(s):(++i===o||h===qe)&&r(null)}for(;e<o;e++)t(n[e],e,Pn(a))}var qo=an(Un,1/0),zn=function(n,t,r){var e=pt(n)?Yo:qo;e(n,t,r)};function Go(n){return function(t,r,e){return n(zn,t,r,e)}}function jn(n,t,r,e){e=e||Ae,t=t||[];var i=[],o=0;n(t,function(a,s,h){var y=o++;r(a,function(T,P){i[y]=P,h(T)})},function(a){e(a,i)})}var Jo=Go(jn);bt(Jo);function Ko(n){return function(t,r,e,i){return n(Bn(r),t,e,i)}}var Qo=Ko(jn),$o=an(Qo,1);bt($o),X(function(n,t){return X(function(r){return n.apply(null,t.concat(r))})});function ta(n,t){for(var r=-1,e=n==null?0:n.length;++r<e&&t(n[r],r,n)!==!1;);return n}var Wn=typeof setImmediate=="function"&&setImmediate,Hn=typeof R=="object"&&typeof R.nextTick=="function";function Vn(n){setTimeout(n,0)}function Zn(n){return X(function(t,r){n(function(){t.apply(null,r)})})}var Dr;Wn?Dr=setImmediate:Hn?Dr=R.nextTick:Dr=Vn,Zn(Dr);var ea=an(Un,1);function ra(n,t,r,e){e=Ht(e||Ae),ea(n,function(i,o,a){r(t,i,function(s,h){t=h,a(s)})},function(i){e(i,t)})}var na=X(function(t){return X(function(r){var e=this,i=r[r.length-1];typeof i=="function"?r.pop():i=Ae,ra(t,r,function(o,a,s){a.apply(e,o.concat(X(function(h,y){s(h,y)})))},function(o,a){i.apply(e,[o].concat(a))})})});X(function(n){return na.apply(null,n.reverse())}),X(function(n){var t=[null].concat(n);return Q(function(r,e){return e.apply(this,t)})});function Xn(n){return X(function(t,r){t.apply(null,r.concat(X(function(e,i){typeof console=="object"&&(e?console.error&&console.error(e):console[n]&&ta(i,function(o){console[n](o)}))})))})}Xn("dir");function ia(n){return function(t,r,e){return n(t,e)}}function Yn(n,t,r){zn(n,ia(t),r)}Xn("log");var Ar;Hn?Ar=R.nextTick:Wn?Ar=setImmediate:Ar=Vn,Zn(Ar);var ye;function oa(){ye||(ye={},ye[Dropbox.ApiError.NETWORK_ERROR]=u.EIO,ye[Dropbox.ApiError.INVALID_PARAM]=u.EINVAL,ye[Dropbox.ApiError.INVALID_TOKEN]=u.EPERM,ye[Dropbox.ApiError.OAUTH_ERROR]=u.EPERM,ye[Dropbox.ApiError.NOT_FOUND]=u.ENOENT,ye[Dropbox.ApiError.INVALID_METHOD]=u.EINVAL,ye[Dropbox.ApiError.NOT_ACCEPTABLE]=u.EINVAL,ye[Dropbox.ApiError.CONFLICT]=u.EINVAL,ye[Dropbox.ApiError.RATE_LIMITED]=u.EBUSY,ye[Dropbox.ApiError.SERVER_ERROR]=u.EBUSY,ye[Dropbox.ApiError.OVER_QUOTA]=u.ENOSPC)}function aa(n){return n&&n.stat.isFile}function sa(n){return n&&n.stat.isFolder}function ua(n){return n==null||typeof n=="object"&&typeof n.byteLength=="number"}var ue=function(t){this._cache={},this._client=t};ue.prototype.readdir=function(t,r){var e=this,i=this.getCachedDirInfo(t);this._wrap(function(o){i!==null&&i.contents?e._client.readdir(t,{contentHash:i.stat.contentHash},o):e._client.readdir(t,o)},function(o,a,s,h){o?o.status===Dropbox.ApiError.NO_CONTENT&&i!==null?r(null,i.contents.slice(0)):r(o):(e.updateCachedDirInfo(t,s,a.slice(0)),h.forEach(function(y){e.updateCachedInfo(p.join(t,y.name),y)}),r(null,a))})},ue.prototype.remove=function(t,r){var e=this;this._wrap(function(i){e._client.remove(t,i)},function(i,o){i||e.updateCachedInfo(t,o),r(i)})},ue.prototype.move=function(t,r,e){var i=this;this._wrap(function(o){i._client.move(t,r,o)},function(o,a){o||(i.deleteCachedInfo(t),i.updateCachedInfo(r,a)),e(o)})},ue.prototype.stat=function(t,r){var e=this;this._wrap(function(i){e._client.stat(t,i)},function(i,o){i||e.updateCachedInfo(t,o),r(i,o)})},ue.prototype.readFile=function(t,r){var e=this,i=this.getCachedFileInfo(t);i!==null&&i.contents!==null?this.stat(t,function(o,a){o?r(o):a.contentHash===i.stat.contentHash?r(o,i.contents.slice(0),i.stat):e.readFile(t,r)}):this._wrap(function(o){e._client.readFile(t,{arrayBuffer:!0},o)},function(o,a,s){o||e.updateCachedInfo(t,s,a.slice(0)),r(o,a,s)})},ue.prototype.writeFile=function(t,r,e){var i=this;this._wrap(function(o){i._client.writeFile(t,r,o)},function(o,a){o||i.updateCachedInfo(t,a,r.slice(0)),e(o,a)})},ue.prototype.mkdir=function(t,r){var e=this;this._wrap(function(i){e._client.mkdir(t,i)},function(i,o){i||e.updateCachedInfo(t,o,[]),r(i)})},ue.prototype._wrap=function(t,r){var e=0,i=function(o){var a=2;if(o&&3>++e)switch(o.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){t(i)},a*1e3);break;default:r.apply(null,arguments);break}else r.apply(null,arguments)};t(i)},ue.prototype.getCachedInfo=function(t){return this._cache[t.toLowerCase()]},ue.prototype.putCachedInfo=function(t,r){this._cache[t.toLowerCase()]=r},ue.prototype.deleteCachedInfo=function(t){delete this._cache[t.toLowerCase()]},ue.prototype.getCachedDirInfo=function(t){var r=this.getCachedInfo(t);return sa(r)?r:null},ue.prototype.getCachedFileInfo=function(t){var r=this.getCachedInfo(t);return aa(r)?r:null},ue.prototype.updateCachedDirInfo=function(t,r,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);r.contentHash!==null&&(i===void 0||i.stat.contentHash!==r.contentHash)&&this.putCachedInfo(t,{stat:r,contents:e})},ue.prototype.updateCachedFileInfo=function(t,r,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);r.versionTag!==null&&(i===void 0||i.stat.versionTag!==r.versionTag)&&this.putCachedInfo(t,{stat:r,contents:e})},ue.prototype.updateCachedInfo=function(t,r,e){e===void 0&&(e=null),r.isFile&&ua(e)?this.updateCachedFileInfo(t,r,e):r.isFolder&&Array.isArray(e)&&this.updateCachedDirInfo(t,r,e)};var fa=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(this.isDirty()){var o=this.getBuffer(),a=$(o);this._fs._writeFileStrict(this.getPath(),a,function(s){s||i.resetDirty(),e(s)})}else e()},t.prototype.close=function(e){this.sync(e)},t}(se),Cr=function(n){function t(r,e){e===void 0&&(e=!0),n.call(this),this._client=new ue(r),kt(e,t.Name,{client:"authenticated dropbox client instance"}),oa()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.client,!1))},t.isAvailable=function(){return typeof Dropbox<"u"},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this._client.readdir("/",function(o,a){if(o)e(i.convert(o,"/"));else{var s=function(y,T){var P=p.join("/",y);i._client.remove(P,function(Z){T(Z?i.convert(Z,P):null)})},h=function(y){y?e(y):e()};Yn(a,s,h)}})},t.prototype.rename=function(e,i,o){var a=this;this._client.move(e,i,function(s){s?a._client.stat(i,function(h,y){if(h||y.isFolder){var T=s.response.error.indexOf(e)>-1?e:i;o(a.convert(s,T))}else a._client.remove(i,function(P){P?o(a.convert(P,i)):a.rename(e,i,o)})}):o()})},t.prototype.stat=function(e,i,o){var a=this;this._client.stat(e,function(s,h){if(s)o(a.convert(s,e));else if(h&&h.isRemoved)o(f.FileError(u.ENOENT,e));else{var y=new C(a._statType(h),h.size);return o(null,y)}})},t.prototype.open=function(e,i,o,a){var s=this;this._client.readFile(e,function(h,y,T){if(h)if(i.isReadable())a(s.convert(h,e));else switch(h.status){case Dropbox.ApiError.NOT_FOUND:var P=new ArrayBuffer(0);return s._writeFileStrict(e,P,function(nt,lt){if(nt)a(nt);else{var gt=s._makeFile(e,i,lt,Ft(P));a(null,gt)}});default:return a(s.convert(h,e))}else{var Z;y===null?Z=Mt():Z=Ft(y);var et=s._makeFile(e,i,T,Z);return a(null,et)}})},t.prototype._writeFileStrict=function(e,i,o){var a=this,s=p.dirname(e);this.stat(s,!1,function(h,y){h?o(f.FileError(u.ENOENT,s)):a._client.writeFile(e,i,function(T,P){T?o(a.convert(T,e)):o(null,P)})})},t.prototype._statType=function(e){return e.isFile?M.FILE:M.DIRECTORY},t.prototype._makeFile=function(e,i,o,a){var s=this._statType(o),h=new C(s,o.size);return new fa(this,e,i,h,a)},t.prototype._remove=function(e,i,o){var a=this;this._client.stat(e,function(s,h){s?i(a.convert(s,e)):h.isFile&&!o?i(f.FileError(u.ENOTDIR,e)):!h.isFile&&o?i(f.FileError(u.EISDIR,e)):a._client.remove(e,function(y){i(y?a.convert(y,e):null)})})},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){this._remove(e,i,!1)},t.prototype.mkdir=function(e,i,o){var a=this,s=p.dirname(e);this._client.stat(s,function(h,y){h?o(a.convert(h,s)):a._client.mkdir(e,function(T){o(T?f.FileError(u.EEXIST,e):null)})})},t.prototype.readdir=function(e,i){var o=this;this._client.readdir(e,function(a,s){return a?i(o.convert(a)):i(null,s)})},t.prototype.convert=function(e,i){i===void 0&&(i=null);var o=ye[e.status];return o===void 0&&(o=u.EIO),i?f.FileError(o,i):new f(o)},t}(tt);Cr.Name="Dropbox",Cr.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(n,t){n.isAuthenticated&&n.isAuthenticated()?t():t(new f(u.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};function Yt(n,t){t===void 0&&(t="");for(var r=n.errno,e=n.node,i=[];e&&(i.unshift(e.name),e!==e.parent);)e=e.parent;return new f(r,v[r],i.length>0?"/"+i.join("/"):t)}var ca=function(n){function t(r,e,i,o){n.call(this),this._fs=r,this._FS=e,this._path=i,this._stream=o}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getPos=function(){},t.prototype.close=function(e){var i=null;try{this.closeSync()}catch(o){i=o}finally{e(i)}},t.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(e){throw Yt(e,this._path)}},t.prototype.stat=function(e){try{e(null,this.statSync())}catch(i){e(i)}},t.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(e){throw Yt(e,this._path)}},t.prototype.truncate=function(e,i){var o=null;try{this.truncateSync(e)}catch(a){o=a}finally{i(o)}},t.prototype.truncateSync=function(e){try{this._FS.ftruncate(this._stream.fd,e)}catch(i){throw Yt(i,this._path)}},t.prototype.write=function(e,i,o,a,s){try{s(null,this.writeSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.writeSync=function(e,i,o,a){try{var s=ht(e),h=a===null?void 0:a;return this._FS.write(this._stream,s,i,o,h)}catch(y){throw Yt(y,this._path)}},t.prototype.read=function(e,i,o,a,s){try{s(null,this.readSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.readSync=function(e,i,o,a){try{var s=ht(e),h=a===null?void 0:a;return this._FS.read(this._stream,s,i,o,h)}catch(y){throw Yt(y,this._path)}},t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.chown=function(e,i,o){var a=null;try{this.chownSync(e,i)}catch(s){a=s}finally{o(a)}},t.prototype.chownSync=function(e,i){try{this._FS.fchown(this._stream.fd,e,i)}catch(o){throw Yt(o,this._path)}},t.prototype.chmod=function(e,i){var o=null;try{this.chmodSync(e)}catch(a){o=a}finally{i(o)}},t.prototype.chmodSync=function(e){try{this._FS.fchmod(this._stream.fd,e)}catch(i){throw Yt(i,this._path)}},t.prototype.utimes=function(e,i,o){var a=null;try{this.utimesSync(e,i)}catch(s){a=s}finally{o(a)}},t.prototype.utimesSync=function(e,i){this._fs.utimesSync(this._path,e,i)},t}(mt),Mr=function(n){function t(r){n.call(this),this._FS=r}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.FS))},t.isAvailable=function(){return!0},t.prototype.getName=function(){return this._FS.DB_NAME()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!0},t.prototype.supportsProps=function(){return!0},t.prototype.supportsSynch=function(){return!0},t.prototype.renameSync=function(e,i){try{this._FS.rename(e,i)}catch(o){throw o.errno===u.ENOENT?Yt(o,this.existsSync(e)?i:e):Yt(o)}},t.prototype.statSync=function(e,i){try{var o=i?this._FS.lstat(e):this._FS.stat(e),a=this.modeToFileType(o.mode);return new C(a,o.size,o.mode,o.atime,o.mtime,o.ctime)}catch(s){throw Yt(s,e)}},t.prototype.openSync=function(e,i,o){try{var a=this._FS.open(e,i.getFlagString(),o);if(this._FS.isDir(a.node.mode))throw this._FS.close(a),f.EISDIR(e);return new ca(this,this._FS,e,a)}catch(s){throw Yt(s,e)}},t.prototype.unlinkSync=function(e){try{this._FS.unlink(e)}catch(i){throw Yt(i,e)}},t.prototype.rmdirSync=function(e){try{this._FS.rmdir(e)}catch(i){throw Yt(i,e)}},t.prototype.mkdirSync=function(e,i){try{this._FS.mkdir(e,i)}catch(o){throw Yt(o,e)}},t.prototype.readdirSync=function(e){try{return this._FS.readdir(e).filter(function(i){return i!=="."&&i!==".."})}catch(i){throw Yt(i,e)}},t.prototype.truncateSync=function(e,i){try{this._FS.truncate(e,i)}catch(o){throw Yt(o,e)}},t.prototype.readFileSync=function(e,i,o){try{var a=this._FS.readFile(e,{flags:o.getFlagString()}),s=St(a);return i?s.toString(i):s}catch(h){throw Yt(h,e)}},t.prototype.writeFileSync=function(e,i,o,a,s){try{o&&(i=w.from(i,o));var h=ht(i);this._FS.writeFile(e,h,{flags:a.getFlagString(),encoding:"binary"}),this._FS.chmod(e,s)}catch(y){throw Yt(y,e)}},t.prototype.chmodSync=function(e,i,o){try{i?this._FS.lchmod(e,o):this._FS.chmod(e,o)}catch(a){throw Yt(a,e)}},t.prototype.chownSync=function(e,i,o,a){try{i?this._FS.lchown(e,o,a):this._FS.chown(e,o,a)}catch(s){throw Yt(s,e)}},t.prototype.symlinkSync=function(e,i,o){try{this._FS.symlink(e,i)}catch(a){throw Yt(a)}},t.prototype.readlinkSync=function(e){try{return this._FS.readlink(e)}catch(i){throw Yt(i,e)}},t.prototype.utimesSync=function(e,i,o){try{this._FS.utime(e,i.getTime(),o.getTime())}catch(a){throw Yt(a,e)}},t.prototype.modeToFileType=function(e){if(this._FS.isDir(e))return M.DIRECTORY;if(this._FS.isFile(e))return M.FILE;if(this._FS.isLink(e))return M.SYMLINK;throw f.EPERM("Invalid mode: "+e)},t}(ne);Mr.Name="EmscriptenFileSystem",Mr.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var sr=function(n){function t(r,e){n.call(this),this._folder=r,this._wrapped=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.folder,e.wrapped))},t.isAvailable=function(){return!0},t.prototype.initialize=function(e){var i=this;this._wrapped.exists(this._folder,function(o){o?e():i._wrapped.isReadOnly()?e(f.ENOENT(i._folder)):i._wrapped.mkdir(i._folder,511,e)})},t.prototype.getName=function(){return this._wrapped.getName()},t.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},t.prototype.supportsProps=function(){return this._wrapped.supportsProps()},t.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t}(tt);sr.Name="FolderAdapter",sr.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}};function qn(n,t){if(t!==null&&typeof t=="object"){var r=t,e=r.path;e&&(e="/"+p.relative(n,e),r.message=r.message.replace(r.path,e),r.path=e)}return t}function la(n,t){return typeof t=="function"?function(r){arguments.length>0&&(arguments[0]=qn(n,r)),t.apply(null,arguments)}:t}function Gn(n,t,r){return n.slice(n.length-4)!=="Sync"?function(){return arguments.length>0&&(t&&(arguments[0]=p.join(this._folder,arguments[0])),r&&(arguments[1]=p.join(this._folder,arguments[1])),arguments[arguments.length-1]=la(this._folder,arguments[arguments.length-1])),this._wrapped[n].apply(this._wrapped,arguments)}:function(){try{return t&&(arguments[0]=p.join(this._folder,arguments[0])),r&&(arguments[1]=p.join(this._folder,arguments[1])),this._wrapped[n].apply(this._wrapped,arguments)}catch(e){throw qn(this._folder,e)}}}["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(n){sr.prototype[n]=Gn(n,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(n){sr.prototype[n]=Gn(n,!0,!0)});var Pr;typeof window<"u"?Pr=window:typeof self<"u"?Pr=self:Pr=N;var Qt=Pr;function ha(n){return n.isDirectory}var sn=Qt.webkitRequestFileSystem||Qt.requestFileSystem||null;function pa(n,t,r,e){if(typeof navigator.webkitPersistentStorage<"u")switch(n){case Qt.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(t,r,e);break;case Qt.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(t,r,e);break;default:e(new TypeError("Invalid storage type: "+n));break}else Qt.webkitStorageInfo.requestQuota(n,t,r,e)}function da(n){return Array.prototype.slice.call(n||[],0)}function Ne(n,t,r){switch(n.name){case"PathExistsError":return f.EEXIST(t);case"QuotaExceededError":return f.FileError(u.ENOSPC,t);case"NotFoundError":return f.ENOENT(t);case"SecurityError":return f.FileError(u.EACCES,t);case"InvalidModificationError":return f.FileError(u.EPERM,t);case"TypeMismatchError":return f.FileError(r?u.ENOTDIR:u.EISDIR,t);case"EncodingError":case"InvalidStateError":case"NoModificationAllowedError":default:return f.FileError(u.EINVAL,t)}}var ya=function(n){function t(r,e,i,o,a,s){n.call(this,r,i,o,a,s),this._entry=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty())return e();this._entry.createWriter(function(o){var a=i.getBuffer(),s=new Blob([$(a)]),h=s.size;o.onwriteend=function(y){o.onwriteend=null,o.onerror=null,o.truncate(h),i.resetDirty(),e()},o.onerror=function(y){e(Ne(y,i.getPath(),!1))},o.write(s)})},t.prototype.close=function(e){this.sync(e)},t}(se),Br=function(n){function t(r,e,i){r===void 0&&(r=5),e===void 0&&(e=Qt.PERSISTENT),i===void 0&&(i=!0),n.call(this),this.size=1024*1024*r,this.type=e,kt(i,t.Name,{size:r,type:e})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.size,e.type,!1);o.allocate(function(a){return a?i(a):i(null,o)},!1)},t.isAvailable=function(){return!!sn},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.allocate=function(e,i){var o=this;e===void 0&&(e=function(){}),i===void 0&&(i=!0),i&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var a=function(h){o.fs=h,e()},s=function(h){e(Ne(h,"/",!0))};this.type===Qt.PERSISTENT?pa(this.type,this.size,function(h){sn(o.type,h,a,s)},s):sn(this.type,this.size,a,s)},t.prototype.empty=function(e){this._readdir("/",function(i,o){if(i)console.error("Failed to empty FS"),e(i);else{var a=function(h){i?(console.error("Failed to empty FS"),e(i)):e()},s=function(h,y){var T=function(){y()},P=function(Z){y(Ne(Z,h.fullPath,!h.isDirectory))};ha(h)?h.removeRecursively(T,P):h.remove(T,P)};Yn(o,s,a)}})},t.prototype.rename=function(e,i,o){var a=this,s=2,h=0,y=this.fs.root,T=e,P=function(et){--s<=0&&o(Ne(et,T,!1))},Z=function(et){if(++h===2)return o(new f(u.EINVAL,"Something was identified as both a file and a directory. This should never happen."));if(e===i)return o();T=p.dirname(i),y.getDirectory(T,{},function(nt){T=p.basename(i),et.moveTo(nt,T,function(lt){o()},function(lt){et.isDirectory?(T=i,a.unlink(i,function(gt){gt?P(lt):a.rename(e,i,o)})):P(lt)})},P)};y.getFile(e,{},Z,P),y.getDirectory(e,{},Z,P)},t.prototype.stat=function(e,i,o){var a=this,s={create:!1},h=function(Z){var et=function(nt){var lt=new C(M.FILE,nt.size);o(null,lt)};Z.file(et,T)},y=function(Z){var et=4096,nt=new C(M.DIRECTORY,et);o(null,nt)},T=function(Z){o(Ne(Z,e,!1))},P=function(){a.fs.root.getDirectory(e,s,y,T)};this.fs.root.getFile(e,s,h,P)},t.prototype.open=function(e,i,o,a){var s=this,h=function(y){y.name==="InvalidModificationError"&&i.isExclusive()?a(f.EEXIST(e)):a(Ne(y,e,!1))};this.fs.root.getFile(e,{create:i.pathNotExistsAction()===b.CREATE_FILE,exclusive:i.isExclusive()},function(y){y.file(function(T){var P=new FileReader;P.onloadend=function(Z){var et=s._makeFile(e,y,i,T,P.result);a(null,et)},P.onerror=function(Z){h(P.error)},P.readAsArrayBuffer(T)},h)},h)},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(a,s){a?i(a):s.length>0?i(f.ENOTEMPTY(e)):o._remove(e,i,!1)})},t.prototype.mkdir=function(e,i,o){var a={create:!0,exclusive:!0},s=function(y){o()},h=function(y){o(Ne(y,e,!0))};this.fs.root.getDirectory(e,a,s,h)},t.prototype.readdir=function(e,i){this._readdir(e,function(o,a){if(a){for(var s=[],h=0,y=a;h<y.length;h+=1){var T=y[h];s.push(T.name)}i(null,s)}else return i(o)})},t.prototype._makeFile=function(e,i,o,a,s){s===void 0&&(s=new ArrayBuffer(0));var h=new C(M.FILE,a.size),y=Ft(s);return new ya(this,i,e,o,h,y)},t.prototype._readdir=function(e,i){var o=function(a){i(Ne(a,e,!0))};this.fs.root.getDirectory(e,{create:!1},function(a){var s=a.createReader(),h=[],y=function(){s.readEntries(function(T){T.length?(h=h.concat(da(T)),y()):i(null,h)},o)};y()},o)},t.prototype._remove=function(e,i,o){var a=function(y){var T=function(){i()},P=function(Z){i(Ne(Z,e,!o))};y.remove(T,P)},s=function(y){i(Ne(y,e,!o))},h={create:!1};o?this.fs.root.getFile(e,h,a,s):this.fs.root.getDirectory(e,h,a,s)},t}(tt);Br.Name="HTML5FS",Br.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var ve=function(t,r,e,i,o,a){this.id=t,this.size=r,this.mode=e,this.atime=i,this.mtime=o,this.ctime=a};ve.fromBuffer=function(t){if(t===void 0)throw new Error("NO");return new ve(t.toString("ascii",30),t.readUInt32LE(0),t.readUInt16LE(4),t.readDoubleLE(6),t.readDoubleLE(14),t.readDoubleLE(22))},ve.prototype.toStats=function(){return new C((this.mode&61440)===M.DIRECTORY?M.DIRECTORY:M.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},ve.prototype.getSize=function(){return 30+this.id.length},ve.prototype.toBuffer=function(t){return t===void 0&&(t=w.alloc(this.getSize())),t.writeUInt32LE(this.size,0),t.writeUInt16LE(this.mode,4),t.writeDoubleLE(this.atime,6),t.writeDoubleLE(this.mtime,14),t.writeDoubleLE(this.ctime,22),t.write(this.id,30,this.id.length,"ascii"),t},ve.prototype.update=function(t){var r=!1;this.size!==t.size&&(this.size=t.size,r=!0),this.mode!==t.mode&&(this.mode=t.mode,r=!0);var e=t.atime.getTime();this.atime!==e&&(this.atime=e,r=!0);var i=t.mtime.getTime();this.mtime!==i&&(this.mtime=i,r=!0);var o=t.ctime.getTime();return this.ctime!==o&&(this.ctime=o,r=!0),r},ve.prototype.isFile=function(){return(this.mode&61440)===M.FILE},ve.prototype.isDirectory=function(){return(this.mode&61440)===M.DIRECTORY};var We="/",un=null;function Jn(){return un||(un=w.from("{}"))}function Ur(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,r=n==="x"?t:t&3|8;return r.toString(16)})}function me(n,t){return n?(t(n),!1):!0}function ee(n,t,r){return n?(t.abort(function(){r(n)}),!1):!0}var Ce=function(t){this.store=t,this.originalData={},this.modifiedKeys=[]};Ce.prototype.get=function(t){var r=this.store.get(t);return this.stashOldValue(t,r),r},Ce.prototype.put=function(t,r,e){return this.markModified(t),this.store.put(t,r,e)},Ce.prototype.del=function(t){this.markModified(t),this.store.del(t)},Ce.prototype.commit=function(){},Ce.prototype.abort=function(){for(var t=this,r=0,e=t.modifiedKeys;r<e.length;r+=1){var i=e[r],o=t.originalData[i];o?t.store.put(i,o,!0):t.store.del(i)}},Ce.prototype.stashOldValue=function(t,r){this.originalData.hasOwnProperty(t)||(this.originalData[t]=r)},Ce.prototype.markModified=function(t){this.modifiedKeys.indexOf(t)===-1&&(this.modifiedKeys.push(t),this.originalData.hasOwnProperty(t)||(this.originalData[t]=this.store.get(t)))};var Kn=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(se),Qn=function(n){function t(r){n.call(this),this.store=r.store,this.makeRootDirectory()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},t.prototype.renameSync=function(e,i){var o=this.store.beginTransaction("readwrite"),a=p.dirname(e),s=p.basename(e),h=p.dirname(i),y=p.basename(i),T=this.findINode(o,a),P=this.getDirListing(o,a,T);if(!P[s])throw f.ENOENT(e);var Z=P[s];if(delete P[s],(h+"/").indexOf(e+"/")===0)throw new f(u.EBUSY,a);var et,nt;if(h===a?(et=T,nt=P):(et=this.findINode(o,h),nt=this.getDirListing(o,h,et)),nt[y]){var lt=this.getINode(o,i,nt[y]);if(lt.isFile())try{o.del(lt.id),o.del(nt[y])}catch(gt){throw o.abort(),gt}else throw f.EPERM(i)}nt[y]=Z;try{o.put(T.id,w.from(JSON.stringify(P)),!0),o.put(et.id,w.from(JSON.stringify(nt)),!0)}catch(gt){throw o.abort(),gt}o.commit()},t.prototype.statSync=function(e,i){return this.findINode(this.store.beginTransaction("readonly"),e).toStats()},t.prototype.createFileSync=function(e,i,o){var a=this.store.beginTransaction("readwrite"),s=Mt(),h=this.commitNewFile(a,e,M.FILE,o,s);return new Kn(this,e,i,h.toStats(),s)},t.prototype.openFileSync=function(e,i){var o=this.store.beginTransaction("readonly"),a=this.findINode(o,e),s=o.get(a.id);if(s===void 0)throw f.ENOENT(e);return new Kn(this,e,i,a.toStats(),s)},t.prototype.unlinkSync=function(e){this.removeEntry(e,!1)},t.prototype.rmdirSync=function(e){if(this.readdirSync(e).length>0)throw f.ENOTEMPTY(e);this.removeEntry(e,!0)},t.prototype.mkdirSync=function(e,i){var o=this.store.beginTransaction("readwrite"),a=w.from("{}");this.commitNewFile(o,e,M.DIRECTORY,i,a)},t.prototype.readdirSync=function(e){var i=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(i,e,this.findINode(i,e)))},t.prototype._syncSync=function(e,i,o){var a=this.store.beginTransaction("readwrite"),s=this._findINode(a,p.dirname(e),p.basename(e)),h=this.getINode(a,e,s),y=h.update(o);try{a.put(h.id,i,!0),y&&a.put(s,h.toBuffer(),!0)}catch(T){throw a.abort(),T}a.commit()},t.prototype.makeRootDirectory=function(){var e=this.store.beginTransaction("readwrite");if(e.get(We)===void 0){var i=new Date().getTime(),o=new ve(Ur(),4096,511|M.DIRECTORY,i,i,i);e.put(o.id,Jn(),!1),e.put(We,o.toBuffer(),!1),e.commit()}},t.prototype._findINode=function(e,i,o){var a=this,s=function(h){var y=a.getDirListing(e,i,h);if(y[o])return y[o];throw f.ENOENT(p.resolve(i,o))};return i==="/"?o===""?We:s(this.getINode(e,i,We)):s(this.getINode(e,i+p.sep+o,this._findINode(e,p.dirname(i),p.basename(i))))},t.prototype.findINode=function(e,i){return this.getINode(e,i,this._findINode(e,p.dirname(i),p.basename(i)))},t.prototype.getINode=function(e,i,o){var a=e.get(o);if(a===void 0)throw f.ENOENT(i);return ve.fromBuffer(a)},t.prototype.getDirListing=function(e,i,o){if(!o.isDirectory())throw f.ENOTDIR(i);var a=e.get(o.id);if(a===void 0)throw f.ENOENT(i);return JSON.parse(a.toString())},t.prototype.addNewNode=function(e,i){for(var o=0,a;o<5;)try{return a=Ur(),e.put(a,i,!1),a}catch{}throw new f(u.EIO,"Unable to commit data to key-value store.")},t.prototype.commitNewFile=function(e,i,o,a,s){var h=p.dirname(i),y=p.basename(i),T=this.findINode(e,h),P=this.getDirListing(e,h,T),Z=new Date().getTime();if(i==="/"||P[y])throw f.EEXIST(i);var et;try{var nt=this.addNewNode(e,s);et=new ve(nt,s.length,a|o,Z,Z,Z);var lt=this.addNewNode(e,et.toBuffer());P[y]=lt,e.put(T.id,w.from(JSON.stringify(P)),!0)}catch(gt){throw e.abort(),gt}return e.commit(),et},t.prototype.removeEntry=function(e,i){var o=this.store.beginTransaction("readwrite"),a=p.dirname(e),s=this.findINode(o,a),h=this.getDirListing(o,a,s),y=p.basename(e);if(!h[y])throw f.ENOENT(e);var T=h[y];delete h[y];var P=this.getINode(o,e,T);if(!i&&P.isDirectory())throw f.EISDIR(e);if(i&&!P.isDirectory())throw f.ENOTDIR(e);try{o.del(P.id),o.del(T),o.put(s.id,w.from(JSON.stringify(h)),!0)}catch(Z){throw o.abort(),Z}o.commit()},t}(ne),$n=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(o){o||i.resetDirty(),e(o)}):e()},t.prototype.close=function(e){this.sync(e)},t}(se),va=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.init=function(e,i){this.store=e,this.makeRootDirectory(i)},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this.store.clear(function(o){me(o,e)&&i.makeRootDirectory(e)})},t.prototype.rename=function(e,i,o){var a=this,s=this.store.beginTransaction("readwrite"),h=p.dirname(e),y=p.basename(e),T=p.dirname(i),P=p.basename(i),Z={},et={},nt=!1;if((T+"/").indexOf(e+"/")===0)return o(new f(u.EBUSY,h));var lt=function(){if(!(nt||!et.hasOwnProperty(h)||!et.hasOwnProperty(T))){var xt=et[h],Zt=Z[h],fe=et[T],Le=Z[T];if(!xt[y])o(f.ENOENT(e));else{var De=xt[y];delete xt[y];var dr=function(){fe[P]=De,s.put(Zt.id,w.from(JSON.stringify(xt)),!0,function(Be){ee(Be,s,o)&&(h===T?s.commit(o):s.put(Le.id,w.from(JSON.stringify(fe)),!0,function(Ue){ee(Ue,s,o)&&s.commit(o)}))})};fe[P]?a.getINode(s,i,fe[P],function(Be,Ue){ee(Be,s,o)&&(Ue.isFile()?s.del(Ue.id,function(zi){ee(zi,s,o)&&s.del(fe[P],function(Va){ee(Va,s,o)&&dr()})}):s.abort(function(zi){o(f.EPERM(i))}))}):dr()}}},gt=function(xt){a.findINodeAndDirListing(s,xt,function(Zt,fe,Le){Zt?nt||(nt=!0,s.abort(function(){o(Zt)})):(Z[xt]=fe,et[xt]=Le,lt())})};gt(h),h!==T&&gt(T)},t.prototype.stat=function(e,i,o){var a=this.store.beginTransaction("readonly");this.findINode(a,e,function(s,h){me(s,o)&&o(null,h.toStats())})},t.prototype.createFile=function(e,i,o,a){var s=this,h=this.store.beginTransaction("readwrite"),y=Mt();this.commitNewFile(h,e,M.FILE,o,y,function(T,P){me(T,a)&&a(null,new $n(s,e,i,P.toStats(),y))})},t.prototype.openFile=function(e,i,o){var a=this,s=this.store.beginTransaction("readonly");this.findINode(s,e,function(h,y){me(h,o)&&s.get(y.id,function(T,P){me(T,o)&&(P===void 0?o(f.ENOENT(e)):o(null,new $n(a,e,i,y.toStats(),P)))})})},t.prototype.unlink=function(e,i){this.removeEntry(e,!1,i)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(a,s){a?i(a):s.length>0?i(f.ENOTEMPTY(e)):o.removeEntry(e,!0,i)})},t.prototype.mkdir=function(e,i,o){var a=this.store.beginTransaction("readwrite"),s=w.from("{}");this.commitNewFile(a,e,M.DIRECTORY,i,s,o)},t.prototype.readdir=function(e,i){var o=this,a=this.store.beginTransaction("readonly");this.findINode(a,e,function(s,h){me(s,i)&&o.getDirListing(a,e,h,function(y,T){me(y,i)&&i(null,Object.keys(T))})})},t.prototype._sync=function(e,i,o,a){var s=this,h=this.store.beginTransaction("readwrite");this._findINode(h,p.dirname(e),p.basename(e),function(y,T){ee(y,h,a)&&s.getINode(h,e,T,function(P,Z){if(ee(P,h,a)){var et=Z.update(o);h.put(Z.id,i,!0,function(nt){ee(nt,h,a)&&(et?h.put(T,Z.toBuffer(),!0,function(lt){ee(lt,h,a)&&h.commit(a)}):h.commit(a))})}})})},t.prototype.makeRootDirectory=function(e){var i=this.store.beginTransaction("readwrite");i.get(We,function(o,a){if(o||a===void 0){var s=new Date().getTime(),h=new ve(Ur(),4096,511|M.DIRECTORY,s,s,s);i.put(h.id,Jn(),!1,function(y){ee(y,i,e)&&i.put(We,h.toBuffer(),!1,function(T){T?i.abort(function(){e(T)}):i.commit(e)})})}else i.commit(e)})},t.prototype._findINode=function(e,i,o,a){var s=this,h=function(y,T,P){y?a(y):P[o]?a(null,P[o]):a(f.ENOENT(p.resolve(i,o)))};i==="/"?o===""?a(null,We):this.getINode(e,i,We,function(y,T){me(y,a)&&s.getDirListing(e,i,T,function(P,Z){h(P,T,Z)})}):this.findINodeAndDirListing(e,i,h)},t.prototype.findINode=function(e,i,o){var a=this;this._findINode(e,p.dirname(i),p.basename(i),function(s,h){me(s,o)&&a.getINode(e,i,h,o)})},t.prototype.getINode=function(e,i,o,a){e.get(o,function(s,h){me(s,a)&&(h===void 0?a(f.ENOENT(i)):a(null,ve.fromBuffer(h)))})},t.prototype.getDirListing=function(e,i,o,a){o.isDirectory()?e.get(o.id,function(s,h){if(me(s,a))try{a(null,JSON.parse(h.toString()))}catch{a(f.ENOENT(i))}}):a(f.ENOTDIR(i))},t.prototype.findINodeAndDirListing=function(e,i,o){var a=this;this.findINode(e,i,function(s,h){me(s,o)&&a.getDirListing(e,i,h,function(y,T){me(y,o)&&o(null,h,T)})})},t.prototype.addNewNode=function(e,i,o){var a=0,s,h=function(){++a===5?o(new f(u.EIO,"Unable to commit data to key-value store.")):(s=Ur(),e.put(s,i,!1,function(y,T){y||!T?h():o(null,s)}))};h()},t.prototype.commitNewFile=function(e,i,o,a,s,h){var y=this,T=p.dirname(i),P=p.basename(i),Z=new Date().getTime();if(i==="/")return h(f.EEXIST(i));this.findINodeAndDirListing(e,T,function(et,nt,lt){ee(et,e,h)&&(lt[P]?e.abort(function(){h(f.EEXIST(i))}):y.addNewNode(e,s,function(gt,xt){if(ee(gt,e,h)){var Zt=new ve(xt,s.length,a|o,Z,Z,Z);y.addNewNode(e,Zt.toBuffer(),function(fe,Le){ee(fe,e,h)&&(lt[P]=Le,e.put(nt.id,w.from(JSON.stringify(lt)),!0,function(De){ee(De,e,h)&&e.commit(function(dr){ee(dr,e,h)&&h(null,Zt)})}))})}}))})},t.prototype.removeEntry=function(e,i,o){var a=this,s=this.store.beginTransaction("readwrite"),h=p.dirname(e),y=p.basename(e);this.findINodeAndDirListing(s,h,function(T,P,Z){if(ee(T,s,o))if(!Z[y])s.abort(function(){o(f.ENOENT(e))});else{var et=Z[y];delete Z[y],a.getINode(s,e,et,function(nt,lt){ee(nt,s,o)&&(!i&&lt.isDirectory()?s.abort(function(){o(f.EISDIR(e))}):i&&!lt.isDirectory()?s.abort(function(){o(f.ENOTDIR(e))}):s.del(lt.id,function(gt){ee(gt,s,o)&&s.del(et,function(xt){ee(xt,s,o)&&s.put(P.id,w.from(JSON.stringify(Z)),!0,function(Zt){ee(Zt,s,o)&&s.commit(o)})})}))})}})},t}(tt),Je=function(){this.store={}};Je.prototype.name=function(){return ur.Name},Je.prototype.clear=function(){this.store={}},Je.prototype.beginTransaction=function(t){return new Ce(this)},Je.prototype.get=function(t){return this.store[t]},Je.prototype.put=function(t,r,e){return!e&&this.store.hasOwnProperty(t)?!1:(this.store[t]=r,!0)},Je.prototype.del=function(t){delete this.store[t]};var ur=function(n){function t(){n.call(this,{store:new Je})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t}(Qn);ur.Name="InMemory",ur.Options={};var fn=Qt.indexedDB||Qt.mozIndexedDB||Qt.webkitIndexedDB||Qt.msIndexedDB;function wr(n,t){switch(t===void 0&&(t=n.toString()),n.name){case"NotFoundError":return new f(u.ENOENT,t);case"QuotaExceededError":return new f(u.ENOSPC,t);default:return new f(u.EIO,t)}}function mr(n,t,r){return t===void 0&&(t=u.EIO),r===void 0&&(r=null),function(e){e.preventDefault(),n(new f(t,r!==null?r:void 0))}}var cn=function(t,r){this.tx=t,this.store=r};cn.prototype.get=function(t,r){try{var e=this.store.get(t);e.onerror=mr(r),e.onsuccess=function(i){var o=i.target.result;o===void 0?r(null,o):r(null,Ft(o))}}catch(i){r(wr(i))}};var ga=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.put=function(e,i,o,a){try{var s=$(i),h;o?h=this.store.put(s,e):h=this.store.add(s,e),h.onerror=mr(a),h.onsuccess=function(y){a(null,!0)}}catch(y){a(wr(y))}},t.prototype.del=function(e,i){try{var o=this.store.delete(e);o.onerror=mr(i),o.onsuccess=function(a){i()}}catch(a){i(wr(a))}},t.prototype.commit=function(e){setTimeout(e,0)},t.prototype.abort=function(e){var i=null;try{this.tx.abort()}catch(o){i=wr(o)}finally{e(i)}},t}(cn),zr=function(t,r){var e=this;r===void 0&&(r="browserfs"),this.storeName=r;var i=fn.open(this.storeName,1);i.onupgradeneeded=function(o){var a=o.target.result;a.objectStoreNames.contains(e.storeName)&&a.deleteObjectStore(e.storeName),a.createObjectStore(e.storeName)},i.onsuccess=function(o){e.db=o.target.result,t(null,e)},i.onerror=mr(t,u.EACCES)};zr.prototype.name=function(){return Sr.Name+" - "+this.storeName},zr.prototype.clear=function(t){try{var r=this.db.transaction(this.storeName,"readwrite"),e=r.objectStore(this.storeName),i=e.clear();i.onsuccess=function(o){setTimeout(t,0)},i.onerror=mr(t)}catch(o){t(wr(o))}},zr.prototype.beginTransaction=function(t){t===void 0&&(t="readonly");var r=this.db.transaction(this.storeName,t),e=r.objectStore(this.storeName);if(t==="readwrite")return new ga(r,e);if(t==="readonly")return new cn(r,e);throw new f(u.EINVAL,"Invalid transaction type.")};var Sr=function(n){function t(r,e,i){var o=this;i===void 0&&(i=!0),n.call(this),this.store=new zr(function(a){a?r(a):o.init(o.store,function(s){r(s,o)})},e),kt(i,t.Name,{storeName:e})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){new t(i,e.storeName,!1)},t.isAvailable=function(){try{return typeof fn<"u"&&fn.open("__browserfs_test__")!==null}catch{return!1}},t}(va);Sr.Name="IndexedDB",Sr.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var ln=!1,Er;try{Qt.localStorage.setItem("__test__",String.fromCharCode(55296)),ln=Qt.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch{ln=!1}Er=ln?"binary_string":"binary_string_ie",w.isEncoding(Er)||(Er="base64");var Ke=function(){};Ke.prototype.name=function(){return _r.Name},Ke.prototype.clear=function(){Qt.localStorage.clear()},Ke.prototype.beginTransaction=function(t){return new Ce(this)},Ke.prototype.get=function(t){try{var r=Qt.localStorage.getItem(t);if(r!==null)return w.from(r,Er)}catch{}},Ke.prototype.put=function(t,r,e){try{return!e&&Qt.localStorage.getItem(t)!==null?!1:(Qt.localStorage.setItem(t,r.toString(Er)),!0)}catch{throw new f(u.ENOSPC,"LocalStorage is full.")}},Ke.prototype.del=function(t){try{Qt.localStorage.removeItem(t)}catch(r){throw new f(u.EIO,"Unable to delete key "+t+": "+r)}};var _r=function(n){function t(){n.call(this,{store:new Ke})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t.isAvailable=function(){return typeof Qt.localStorage<"u"},t}(Qn);_r.Name="LocalStorage",_r.Options={};var fr=function(n){function t(){n.call(this),this.mountList=[],this.mntMap={},this.rootFs=new ur}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t;Object.keys(e).forEach(function(a){o.mount(a,e[a])}),i(null,o)},t.isAvailable=function(){return!0},t.prototype.mount=function(e,i){if(e[0]!=="/"&&(e="/"+e),e=p.resolve(e),this.mntMap[e])throw new f(u.EINVAL,"Mount point "+e+" is already taken.");W(e,511,this.rootFs),this.mntMap[e]=i,this.mountList.push(e),this.mountList=this.mountList.sort(function(o,a){return a.length-o.length})},t.prototype.umount=function(e){var i=this;if(e[0]!=="/"&&(e="/"+e),e=p.resolve(e),!this.mntMap[e])throw new f(u.EINVAL,"Mount point "+e+" is already unmounted.");for(delete this.mntMap[e],this.mountList.splice(this.mountList.indexOf(e),1);e!=="/"&&i.rootFs.readdirSync(e).length===0;)i.rootFs.rmdirSync(e),e=p.dirname(e)},t.prototype._getFs=function(e){for(var i=this,o=this.mountList,a=o.length,s=0;s<a;s++){var h=o[s];if(h.length<=e.length&&e.indexOf(h)===0)return e=e.substr(h.length>1?h.length:0),e===""&&(e="/"),{fs:i.mntMap[h],path:e}}return{fs:this.rootFs,path:e}},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.standardizeError=function(e,i,o){var a=e.message.indexOf(i);return a!==-1&&(e.message=e.message.substr(0,a)+o+e.message.substr(a+i.length),e.path=o),e},t.prototype.rename=function(e,i,o){var a=this,s=this._getFs(e),h=this._getFs(i);return s.fs===h.fs?s.fs.rename(s.path,h.path,function(y){y&&a.standardizeError(a.standardizeError(y,s.path,e),h.path,i),o(y)}):ft.readFile(e,function(y,T){if(y)return o(y);ft.writeFile(i,T,function(P){if(P)return o(P);ft.unlink(e,o)})})},t.prototype.renameSync=function(e,i){var o=this._getFs(e),a=this._getFs(i);if(o.fs===a.fs)try{return o.fs.renameSync(o.path,a.path)}catch(h){throw this.standardizeError(this.standardizeError(h,o.path,e),a.path,i),h}var s=ft.readFileSync(e);return ft.writeFileSync(i,s),ft.unlinkSync(e)},t.prototype.readdirSync=function(e){var i=this._getFs(e),o=null;if(i.fs!==this.rootFs)try{o=this.rootFs.readdirSync(e)}catch{}try{var a=i.fs.readdirSync(i.path);return o===null?a:a.concat(o.filter(function(s){return a.indexOf(s)===-1}))}catch(s){if(o===null)throw this.standardizeError(s,i.path,e);return o}},t.prototype.readdir=function(e,i){var o=this,a=this._getFs(e);a.fs.readdir(a.path,function(s,h){if(a.fs!==o.rootFs)try{var y=o.rootFs.readdirSync(e);h?h=h.concat(y.filter(function(T){return h.indexOf(T)===-1})):h=y}catch{if(s)return i(o.standardizeError(s,a.path,e))}else if(s)return i(o.standardizeError(s,a.path,e));i(null,h)})},t.prototype.rmdirSync=function(e){var i=this._getFs(e);if(this._containsMountPt(e))throw f.ENOTEMPTY(e);try{i.fs.rmdirSync(i.path)}catch(o){throw this.standardizeError(o,i.path,e)}},t.prototype.rmdir=function(e,i){var o=this,a=this._getFs(e);this._containsMountPt(e)?i(f.ENOTEMPTY(e)):a.fs.rmdir(a.path,function(s){i(s?o.standardizeError(s,a.path,e):null)})},t.prototype._containsMountPt=function(e){for(var i=this.mountList,o=i.length,a=0;a<o;a++){var s=i[a];if(s.length>=e.length&&s.slice(0,e.length)===e)return!0}return!1},t}(tt);fr.Name="MountableFileSystem",fr.Options={};function ti(n,t,r){return t?function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var o=e[0],a=this._getFs(o);e[0]=a.path;try{return a.fs[n].apply(a.fs,e)}catch(s){throw this.standardizeError(s,a.path,o),s}}:function(){for(var e=this,i=[],o=arguments.length;o--;)i[o]=arguments[o];var a=i[0],s=this._getFs(a);if(i[0]=s.path,typeof i[i.length-1]=="function"){var h=i[i.length-1];i[i.length-1]=function(){for(var y=[],T=arguments.length;T--;)y[T]=arguments[T];y.length>0&&y[0]instanceof f&&e.standardizeError(y[0],s.path,a),h.apply(null,y)}}return s.fs[n].apply(s.fs,i)}}for(var ei=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],hn=0;hn<ei.length;hn++)for(var wa=ei[hn],pn=0,ri=wa;pn<ri.length;pn+=1){var jr=ri[pn];fr.prototype[jr]=ti(jr,!1),fr.prototype[jr+"Sync"]=ti(jr+"Sync",!0)}var Fr;if(typeof setImmediate<"u")Fr=setImmediate;else{var Fe=Qt,cr=[],ni="zero-timeout-message",ma=function(){if(typeof Fe.importScripts<"u"||!Fe.postMessage)return!1;var n=!0,t=Fe.onmessage;return Fe.onmessage=function(){n=!1},Fe.postMessage("","*"),Fe.onmessage=t,n};if(ma()){Fr=function(n){cr.push(n),Fe.postMessage(ni,"*")};var ii=function(n){if(n.source===self&&n.data===ni&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,cr.length>0)){var t=cr.shift();return t()}};Fe.addEventListener?Fe.addEventListener("message",ii,!0):Fe.attachEvent("onmessage",ii)}else if(Fe.MessageChannel){var oi=new Fe.MessageChannel;oi.port1.onmessage=function(n){if(cr.length>0)return cr.shift()()},Fr=function(n){cr.push(n),oi.port2.postMessage("")}}else Fr=function(n){return setTimeout(n,0)}}var dn=Fr,Ir=function(){this._locked=!1,this._waiters=[]};Ir.prototype.lock=function(t){if(this._locked){this._waiters.push(t);return}this._locked=!0,t()},Ir.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var t=this._waiters.shift();if(t){dn(t);return}this._locked=!1},Ir.prototype.tryLock=function(){return this._locked?!1:(this._locked=!0,!0)},Ir.prototype.isLocked=function(){return this._locked};var Et=function(t){this._fs=t,this._mu=new Ir};Et.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},Et.prototype.getFSUnlocked=function(){return this._fs},Et.prototype.initialize=function(t){this._fs.initialize(t)},Et.prototype.diskSpace=function(t,r){this._fs.diskSpace(t,r)},Et.prototype.isReadOnly=function(){return this._fs.isReadOnly()},Et.prototype.supportsLinks=function(){return this._fs.supportsLinks()},Et.prototype.supportsProps=function(){return this._fs.supportsProps()},Et.prototype.supportsSynch=function(){return this._fs.supportsSynch()},Et.prototype.rename=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.rename(t,r,function(o){i._mu.unlock(),e(o)})})},Et.prototype.renameSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(t,r)},Et.prototype.stat=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.stat(t,r,function(o,a){i._mu.unlock(),e(o,a)})})},Et.prototype.statSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(t,r)},Et.prototype.open=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.open(t,r,e,function(a,s){o._mu.unlock(),i(a,s)})})},Et.prototype.openSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(t,r,e)},Et.prototype.unlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.unlink(t,function(i){e._mu.unlock(),r(i)})})},Et.prototype.unlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(t)},Et.prototype.rmdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.rmdir(t,function(i){e._mu.unlock(),r(i)})})},Et.prototype.rmdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(t)},Et.prototype.mkdir=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.mkdir(t,r,function(o){i._mu.unlock(),e(o)})})},Et.prototype.mkdirSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(t,r)},Et.prototype.readdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.readdir(t,function(i,o){e._mu.unlock(),r(i,o)})})},Et.prototype.readdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(t)},Et.prototype.exists=function(t,r){var e=this;this._mu.lock(function(){e._fs.exists(t,function(i){e._mu.unlock(),r(i)})})},Et.prototype.existsSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(t)},Et.prototype.realpath=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.realpath(t,r,function(o,a){i._mu.unlock(),e(o,a)})})},Et.prototype.realpathSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(t,r)},Et.prototype.truncate=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.truncate(t,r,function(o){i._mu.unlock(),e(o)})})},Et.prototype.truncateSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(t,r)},Et.prototype.readFile=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.readFile(t,r,e,function(a,s){o._mu.unlock(),i(a,s)})})},Et.prototype.readFileSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(t,r,e)},Et.prototype.writeFile=function(t,r,e,i,o,a){var s=this;this._mu.lock(function(){s._fs.writeFile(t,r,e,i,o,function(h){s._mu.unlock(),a(h)})})},Et.prototype.writeFileSync=function(t,r,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(t,r,e,i,o)},Et.prototype.appendFile=function(t,r,e,i,o,a){var s=this;this._mu.lock(function(){s._fs.appendFile(t,r,e,i,o,function(h){s._mu.unlock(),a(h)})})},Et.prototype.appendFileSync=function(t,r,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(t,r,e,i,o)},Et.prototype.chmod=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.chmod(t,r,e,function(a){o._mu.unlock(),i(a)})})},Et.prototype.chmodSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(t,r,e)},Et.prototype.chown=function(t,r,e,i,o){var a=this;this._mu.lock(function(){a._fs.chown(t,r,e,i,function(s){a._mu.unlock(),o(s)})})},Et.prototype.chownSync=function(t,r,e,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(t,r,e,i)},Et.prototype.utimes=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.utimes(t,r,e,function(a){o._mu.unlock(),i(a)})})},Et.prototype.utimesSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(t,r,e)},Et.prototype.link=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.link(t,r,function(o){i._mu.unlock(),e(o)})})},Et.prototype.linkSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(t,r)},Et.prototype.symlink=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.symlink(t,r,e,function(a){o._mu.unlock(),i(a)})})},Et.prototype.symlinkSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(t,r,e)},Et.prototype.readlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.readlink(t,function(i,o){e._mu.unlock(),r(i,o)})})},Et.prototype.readlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(t)};var Me="/.deletedFiles.log";function ai(n){return 146|n}function Se(n){return L.getFileFlag(n)}var si=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty()){e(null);return}this._fs._syncAsync(this,function(o){i.resetDirty(),e(o)})},t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.close=function(e){this.sync(e)},t.prototype.closeSync=function(){this.syncSync()},t}(se),ui=function(n){function t(r,e){if(n.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=r,this._readable=e,this._writable.isReadOnly())throw new f(u.EINVAL,"Writable file system must be writable.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},t.prototype._syncAsync=function(e,i){var o=this;this.createParentDirectoriesAsync(e.getPath(),function(a){if(a)return i(a);o._writable.writeFile(e.getPath(),e.getBuffer(),null,Se("w"),e.getStats().mode,i)})},t.prototype._syncSync=function(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,Se("w"),e.getStats().mode)},t.prototype.getName=function(){return xr.Name},t.prototype.initialize=function(e){var i=this,o=this._initializeCallbacks,a=function(s){i._isInitialized=!s,i._initializeCallbacks=[],o.forEach(function(h){return h(s)})};if(this._isInitialized)return e();o.push(e),o.length===1&&this._writable.readFile(Me,"utf8",Se("r"),function(s,h){if(s){if(s.errno!==u.ENOENT)return a(s)}else i._deleteLog=h;i._reparseDeletionLog(),a()})},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},t.prototype.getDeletionLog=function(){return this._deleteLog},t.prototype.restoreDeletionLog=function(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog("")},t.prototype.rename=function(e,i,o){var a=this;if(!(!this.checkInitAsync(o)||this.checkPathAsync(e,o)||this.checkPathAsync(i,o))){if(e===Me||i===Me)return o(f.EPERM("Cannot rename deletion log."));if(e===i)return o();this.stat(e,!1,function(s,h){return s?o(s):a.stat(i,!1,function(y,T){var P=a;function Z(nt){var lt=nt.shift();if(!lt)return o();var gt=p.resolve(e,lt),xt=p.resolve(i,lt);P.rename(gt,xt,function(Zt){if(Zt)return o(Zt);Z(nt)})}var et=511;if(h.isDirectory()){if(y)return y.errno!==u.ENOENT?o(y):a._writable.exists(e,function(nt){if(nt)return a._writable.rename(e,i,o);a._writable.mkdir(i,et,function(lt){if(lt)return o(lt);a._readable.readdir(e,function(gt,xt){if(gt)return o();Z(xt)})})});if(et=T.mode,!T.isDirectory())return o(f.ENOTDIR(i));a.readdir(i,function(nt,lt){if(lt&&lt.length)return o(f.ENOTEMPTY(i));a._readable.readdir(e,function(gt,xt){if(gt)return o();Z(xt)})})}if(T&&T.isDirectory())return o(f.EISDIR(i));a.readFile(e,null,Se("r"),function(nt,lt){return nt?o(nt):a.writeFile(i,lt,null,Se("w"),h.mode,function(gt){return gt?o(gt):a.unlink(e,o)})})})})}},t.prototype.renameSync=function(e,i){var o=this;if(this.checkInitialized(),this.checkPath(e),this.checkPath(i),e===Me||i===Me)throw f.EPERM("Cannot rename deletion log.");var a=this.statSync(e,!1);if(a.isDirectory()){if(e===i)return;var s=511;if(this.existsSync(i)){var h=this.statSync(i,!1);if(s=h.mode,h.isDirectory()){if(this.readdirSync(i).length>0)throw f.ENOTEMPTY(i)}else throw f.ENOTDIR(i)}this._writable.existsSync(e)?this._writable.renameSync(e,i):this._writable.existsSync(i)||this._writable.mkdirSync(i,s),this._readable.existsSync(e)&&this._readable.readdirSync(e).forEach(function(y){o.renameSync(p.resolve(e,y),p.resolve(i,y))})}else{if(this.existsSync(i)&&this.statSync(i,!1).isDirectory())throw f.EISDIR(i);this.writeFileSync(i,this.readFileSync(e,null,Se("r")),null,Se("w"),a.mode)}e!==i&&this.existsSync(e)&&this.unlinkSync(e)},t.prototype.stat=function(e,i,o){var a=this;!this.checkInitAsync(o)||this._writable.stat(e,i,function(s,h){s&&s.errno===u.ENOENT?(a._deletedFiles[e]&&o(f.ENOENT(e)),a._readable.stat(e,i,function(y,T){T&&(T=T.clone(),T.mode=ai(T.mode)),o(y,T)})):o(s,h)})},t.prototype.statSync=function(e,i){this.checkInitialized();try{return this._writable.statSync(e,i)}catch{if(this._deletedFiles[e])throw f.ENOENT(e);var o=this._readable.statSync(e,i).clone();return o.mode=ai(o.mode),o}},t.prototype.open=function(e,i,o,a){var s=this;!this.checkInitAsync(a)||this.checkPathAsync(e,a)||this.stat(e,!1,function(h,y){if(y)switch(i.pathExistsAction()){case b.TRUNCATE_FILE:return s.createParentDirectoriesAsync(e,function(T){if(T)return a(T);s._writable.open(e,i,o,a)});case b.NOP:return s._writable.exists(e,function(T){T?s._writable.open(e,i,o,a):(y=y.clone(),y.mode=o,s._readable.readFile(e,null,Se("r"),function(P,Z){if(P)return a(P);y.size===-1&&(y.size=Z.length);var et=new si(s,e,i,y,Z);a(null,et)}))});default:return a(f.EEXIST(e))}else switch(i.pathNotExistsAction()){case b.CREATE_FILE:return s.createParentDirectoriesAsync(e,function(T){return T?a(T):s._writable.open(e,i,o,a)});default:return a(f.ENOENT(e))}})},t.prototype.openSync=function(e,i,o){if(this.checkInitialized(),this.checkPath(e),e===Me)throw f.EPERM("Cannot open deletion log.");if(this.existsSync(e))switch(i.pathExistsAction()){case b.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,i,o);case b.NOP:if(this._writable.existsSync(e))return this._writable.openSync(e,i,o);var a=this._readable.readFileSync(e,null,Se("r")),s=this._readable.statSync(e,!1).clone();return s.mode=o,new si(this,e,i,s,a);default:throw f.EEXIST(e)}else switch(i.pathNotExistsAction()){case b.CREATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,i,o);default:throw f.ENOENT(e)}},t.prototype.unlink=function(e,i){var o=this;!this.checkInitAsync(i)||this.checkPathAsync(e,i)||this.exists(e,function(a){if(!a)return i(f.ENOENT(e));o._writable.exists(e,function(s){if(s)return o._writable.unlink(e,function(h){if(h)return i(h);o.exists(e,function(y){y&&o.deletePath(e),i(null)})});o.deletePath(e),i(null)})})},t.prototype.unlinkSync=function(e){if(this.checkInitialized(),this.checkPath(e),this.existsSync(e))this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e);else throw f.ENOENT(e)},t.prototype.rmdir=function(e,i){var o=this;if(!!this.checkInitAsync(i)){var a=function(){o.readdir(e,function(s,h){if(s)return i(s);if(h.length)return i(f.ENOTEMPTY(e));o.deletePath(e),i(null)})};this.exists(e,function(s){if(!s)return i(f.ENOENT(e));o._writable.exists(e,function(h){h?o._writable.rmdir(e,function(y){if(y)return i(y);o._readable.exists(e,function(T){T?a():i()})}):a()})})}},t.prototype.rmdirSync=function(e){if(this.checkInitialized(),this.existsSync(e)){if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(this.readdirSync(e).length>0)throw f.ENOTEMPTY(e);this.deletePath(e)}}else throw f.ENOENT(e)},t.prototype.mkdir=function(e,i,o){var a=this;!this.checkInitAsync(o)||this.exists(e,function(s){if(s)return o(f.EEXIST(e));a.createParentDirectoriesAsync(e,function(h){if(h)return o(h);a._writable.mkdir(e,i,o)})})},t.prototype.mkdirSync=function(e,i){if(this.checkInitialized(),this.existsSync(e))throw f.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,i)},t.prototype.readdir=function(e,i){var o=this;!this.checkInitAsync(i)||this.stat(e,!1,function(a,s){if(a)return i(a);if(!s.isDirectory())return i(f.ENOTDIR(e));o._writable.readdir(e,function(h,y){if(h&&h.code!=="ENOENT")return i(h);(h||!y)&&(y=[]),o._readable.readdir(e,function(T,P){(T||!P)&&(P=[]);var Z={},et=y.concat(P.filter(function(nt){return!o._deletedFiles[e+"/"+nt]})).filter(function(nt){var lt=!Z[nt];return Z[nt]=!0,lt});i(null,et)})})})},t.prototype.readdirSync=function(e){var i=this;this.checkInitialized();var o=this.statSync(e,!1);if(!o.isDirectory())throw f.ENOTDIR(e);var a=[];try{a=a.concat(this._writable.readdirSync(e))}catch{}try{a=a.concat(this._readable.readdirSync(e).filter(function(h){return!i._deletedFiles[e+"/"+h]}))}catch{}var s={};return a.filter(function(h){var y=!s[h];return s[h]=!0,y})},t.prototype.exists=function(e,i){var o=this;this.checkInitialized(),this._writable.exists(e,function(a){if(a)return i(!0);o._readable.exists(e,function(s){i(s&&o._deletedFiles[e]!==!0)})})},t.prototype.existsSync=function(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&this._deletedFiles[e]!==!0},t.prototype.chmod=function(e,i,o,a){var s=this;!this.checkInitAsync(a)||this.operateOnWritableAsync(e,function(h){if(h)return a(h);s._writable.chmod(e,i,o,a)})},t.prototype.chmodSync=function(e,i,o){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.chmodSync(e,i,o)})},t.prototype.chown=function(e,i,o,a,s){var h=this;!this.checkInitAsync(s)||this.operateOnWritableAsync(e,function(y){if(y)return s(y);h._writable.chown(e,i,o,a,s)})},t.prototype.chownSync=function(e,i,o,a){var s=this;this.checkInitialized(),this.operateOnWritable(e,function(){s._writable.chownSync(e,i,o,a)})},t.prototype.utimes=function(e,i,o,a){var s=this;!this.checkInitAsync(a)||this.operateOnWritableAsync(e,function(h){if(h)return a(h);s._writable.utimes(e,i,o,a)})},t.prototype.utimesSync=function(e,i,o){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.utimesSync(e,i,o)})},t.prototype.deletePath=function(e){this._deletedFiles[e]=!0,this.updateLog("d"+e+`
`)},t.prototype.updateLog=function(e){var i=this;this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(Me,this._deleteLog,"utf8",L.getFileFlag("w"),420,function(o){i._deleteLogUpdatePending=!1,o?i._deleteLogError=o:i._deleteLogUpdateNeeded&&(i._deleteLogUpdateNeeded=!1,i.updateLog(""))}))},t.prototype._reparseDeletionLog=function(){var e=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(i){e._deletedFiles[i.slice(1)]=i.slice(0,1)==="d"})},t.prototype.checkInitialized=function(){if(this._isInitialized){if(this._deleteLogError!==null){var e=this._deleteLogError;throw this._deleteLogError=null,e}}else throw new f(u.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")},t.prototype.checkInitAsync=function(e){if(this._isInitialized){if(this._deleteLogError!==null){var i=this._deleteLogError;return this._deleteLogError=null,e(i),!1}}else return e(new f(u.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;return!0},t.prototype.checkPath=function(e){if(e===Me)throw f.EPERM(e)},t.prototype.checkPathAsync=function(e,i){return e===Me?(i(f.EPERM(e)),!0):!1},t.prototype.createParentDirectoriesAsync=function(e,i){var o=p.dirname(e),a=[],s=this;this._writable.stat(o,!1,h);function h(T,P){T?(a.push(o),o=p.dirname(o),s._writable.stat(o,!1,h)):y()}function y(){if(!a.length)return i();var T=a.pop();s._readable.stat(T,!1,function(P,Z){if(!Z)return i();s._writable.mkdir(T,Z.mode,function(et){if(et)return i(et);y()})})}},t.prototype.createParentDirectories=function(e){for(var i=this,o=p.dirname(e),a=[];!this._writable.existsSync(o);)a.push(o),o=p.dirname(o);a=a.reverse(),a.forEach(function(s){i._writable.mkdirSync(s,i.statSync(s,!1).mode)})},t.prototype.operateOnWritable=function(e,i){if(this.existsSync(e))this._writable.existsSync(e)||this.copyToWritable(e),i();else throw f.ENOENT(e)},t.prototype.operateOnWritableAsync=function(e,i){var o=this;this.exists(e,function(a){if(!a)return i(f.ENOENT(e));o._writable.exists(e,function(s){if(s)i();else return o.copyToWritableAsync(e,i)})})},t.prototype.copyToWritable=function(e){var i=this.statSync(e,!1);i.isDirectory()?this._writable.mkdirSync(e,i.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,Se("r")),null,Se("w"),this.statSync(e,!1).mode)},t.prototype.copyToWritableAsync=function(e,i){var o=this;this.stat(e,!1,function(a,s){if(a)return i(a);if(s.isDirectory())return o._writable.mkdir(e,s.mode,i);o._readable.readFile(e,null,Se("r"),function(h,y){if(h)return i(h);o.writeFile(e,y,null,Se("w"),s.mode,i)})})},t}(tt),xr=function(n){function t(r,e,i){i===void 0&&(i=!0),n.call(this,new ui(r,e)),kt(i,t.Name,{readable:"readable file system",writable:"writable file system"})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.writable,e.readable,!1);o.initialize(function(a){i(a,o)},!1)}catch(a){i(a)}},t.isAvailable=function(){return ui.isAvailable()},t.prototype.initialize=function(e,i){i===void 0&&(i=!0),i&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),n.prototype.initialize.call(this,e)},t.prototype.getOverlayedFileSystems=function(){return n.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},t.prototype.unwrap=function(){return n.prototype.getFSUnlocked.call(this)},t}(Et);xr.Name="OverlayFS",xr.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}};var Vt;(function(n){n[n.CB=0]="CB",n[n.FD=1]="FD",n[n.API_ERROR=2]="API_ERROR",n[n.STATS=3]="STATS",n[n.PROBE=4]="PROBE",n[n.FILEFLAG=5]="FILEFLAG",n[n.BUFFER=6]="BUFFER",n[n.ERROR=7]="ERROR"})(Vt||(Vt={}));var yn=function(){this._callbacks={},this._nextId=0};yn.prototype.toRemoteArg=function(t){var r=this._nextId++;return this._callbacks[r]=t,{type:Vt.CB,id:r}},yn.prototype.toLocalArg=function(t){var r=this._callbacks[t];return delete this._callbacks[t],r};var Wr=function(){this._fileDescriptors={},this._nextId=0};Wr.prototype.toRemoteArg=function(t,r,e,i){var o=this._nextId++,a,s;this._fileDescriptors[o]=t,t.stat(function(h,y){h?i(h):(s=Qe(y.toBuffer()),e.isReadable()?t.read(w.alloc(y.size),0,y.size,0,function(T,P,Z){T?i(T):(a=Qe(Z),i(null,{type:Vt.FD,id:o,data:a,stat:s,path:r,flag:e.getFlagString()}))}):i(null,{type:Vt.FD,id:o,data:new ArrayBuffer(0),stat:s,path:r,flag:e.getFlagString()}))})},Wr.prototype.applyFdAPIRequest=function(t,r){var e=this,i=t.args[0];this._applyFdChanges(i,function(o,a){o?r(o):a[t.method](function(s){t.method==="close"&&delete e._fileDescriptors[i.id],r(s)})})},Wr.prototype._applyFdChanges=function(t,r){var e=this._fileDescriptors[t.id],i=$e(t.data),o=C.fromBuffer($e(t.stat)),a=L.getFileFlag(t.flag);a.isWriteable()?e.write(i,0,i.length,a.isAppendable()?e.getPos():0,function(s){function h(){e.stat(function(y,T){y?r(y):T.mode!==o.mode?e.chmod(o.mode,function(P){r(P,e)}):r(y,e)})}s?r(s):a.isAppendable()?h():e.truncate(i.length,function(){h()})}):r(null,e)};function Hr(n){return{type:Vt.API_ERROR,errorData:Qe(n.writeToBuffer())}}function fi(n){return f.fromBuffer($e(n.errorData))}function ci(n){return{type:Vt.ERROR,name:n.name,message:n.message,stack:n.stack}}function li(n){var t=Qt[n.name];typeof t!="function"&&(t=Error);var r=new t(n.message);return r.stack=n.stack,r}function hi(n){return{type:Vt.STATS,statsData:Qe(n.toBuffer())}}function pi(n){return C.fromBuffer($e(n.statsData))}function di(n){return{type:Vt.FILEFLAG,flagStr:n.getFlagString()}}function yi(n){return L.getFileFlag(n.flagStr)}function Qe(n){return $(n)}function $e(n){return Ft(n)}function vi(n){return{type:Vt.BUFFER,data:Qe(n)}}function gi(n){return $e(n.data)}function Sa(n){return n&&typeof n=="object"&&n.hasOwnProperty("browserfsMessage")&&n.browserfsMessage}function Ea(n){return n&&typeof n=="object"&&n.hasOwnProperty("browserfsMessage")&&n.browserfsMessage}var wi=function(n){function t(r,e,i,o,a,s){n.call(this,r,e,i,o,s),this._remoteFdId=a}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getRemoteFdId=function(){return this._remoteFdId},t.prototype.toRemoteArg=function(){return{type:Vt.FD,id:this._remoteFdId,data:Qe(this.getBuffer()),stat:Qe(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},t.prototype.sync=function(e){this._syncClose("sync",e)},t.prototype.close=function(e){this._syncClose("close",e)},t.prototype._syncClose=function(e,i){var o=this;this.isDirty()?this._fs.syncClose(e,this,function(a){a||o.resetDirty(),i(a)}):i()},t}(se),Vr=function(n){function t(r,e){var i=this;e===void 0&&(e=!0),n.call(this),this._callbackConverter=new yn,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=r,kt(e,t.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(o){var a=o.data;if(Ea(a)){var s,h=a.args,y=new Array(h.length);for(s=0;s<y.length;s++)y[s]=i._argRemote2Local(h[s]);i._callbackConverter.toLocalArg(a.cbId).apply(null,y)}})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.worker,!1);o.initialize(function(){i(null,o)})},t.isAvailable=function(){return typeof importScripts<"u"||typeof Worker<"u"},t.attachRemoteListener=function(e){var i=new Wr;function o(s,h,y){switch(typeof s){case"object":s instanceof C?y(null,hi(s)):s instanceof f?y(null,Hr(s)):s instanceof mt?y(null,i.toRemoteArg(s,h[0],h[1],y)):s instanceof L?y(null,di(s)):s instanceof w?y(null,vi(s)):s instanceof Error?y(null,ci(s)):y(null,s);break;default:y(null,s);break}}function a(s,h){if(!s)return s;switch(typeof s){case"object":if(typeof s.type=="number"){var y=s;switch(y.type){case Vt.CB:var T=s.id;return function(){var P=arguments,Z,et=new Array(arguments.length),nt,lt=arguments.length;function gt(xt){lt>0&&(lt=-1,nt={browserfsMessage:!0,cbId:T,args:[Hr(xt)]},e.postMessage(nt))}for(Z=0;Z<arguments.length;Z++)(function(xt,Zt){o(Zt,h,function(fe,Le){et[xt]=Le,fe?gt(fe):--lt===0&&(nt={browserfsMessage:!0,cbId:T,args:et},e.postMessage(nt))})})(Z,P[Z]);arguments.length===0&&(nt={browserfsMessage:!0,cbId:T,args:et},e.postMessage(nt))};case Vt.API_ERROR:return fi(y);case Vt.STATS:return pi(y);case Vt.FILEFLAG:return yi(y);case Vt.BUFFER:return gi(y);case Vt.ERROR:return li(y);default:return s}}else return s;default:return s}}e.addEventListener("message",function(s){var h=s.data;if(Sa(h)){var y=h.args,T=new Array(y.length);switch(h.method){case"close":case"sync":(function(){var et=y[1];i.applyFdAPIRequest(h,function(nt){var lt={browserfsMessage:!0,cbId:et.id,args:nt?[Hr(nt)]:[]};e.postMessage(lt)})})();break;case"probe":(function(){var et=ft.getRootFS(),nt=y[1],lt={type:Vt.PROBE,isReadOnly:et.isReadOnly(),supportsLinks:et.supportsLinks(),supportsProps:et.supportsProps()},gt={browserfsMessage:!0,cbId:nt.id,args:[lt]};e.postMessage(gt)})();break;default:for(var P=0;P<y.length;P++)T[P]=a(y[P],T);var Z=ft.getRootFS();Z[h.method].apply(Z,T);break}}})},t.prototype.getName=function(){return t.Name},t.prototype.initialize=function(e){var i=this;if(this._isInitialized)e();else{var o={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(Mt()),this._callbackConverter.toRemoteArg(function(a){i._isInitialized=!0,i._isReadOnly=a.isReadOnly,i._supportLinks=a.supportsLinks,i._supportProps=a.supportsProps,e()})]};this._worker.postMessage(o)}},t.prototype.isReadOnly=function(){return this._isReadOnly},t.prototype.supportsSynch=function(){return!1},t.prototype.supportsLinks=function(){return this._supportLinks},t.prototype.supportsProps=function(){return this._supportProps},t.prototype.rename=function(e,i,o){this._rpc("rename",arguments)},t.prototype.stat=function(e,i,o){this._rpc("stat",arguments)},t.prototype.open=function(e,i,o,a){this._rpc("open",arguments)},t.prototype.unlink=function(e,i){this._rpc("unlink",arguments)},t.prototype.rmdir=function(e,i){this._rpc("rmdir",arguments)},t.prototype.mkdir=function(e,i,o){this._rpc("mkdir",arguments)},t.prototype.readdir=function(e,i){this._rpc("readdir",arguments)},t.prototype.exists=function(e,i){this._rpc("exists",arguments)},t.prototype.realpath=function(e,i,o){this._rpc("realpath",arguments)},t.prototype.truncate=function(e,i,o){this._rpc("truncate",arguments)},t.prototype.readFile=function(e,i,o,a){this._rpc("readFile",arguments)},t.prototype.writeFile=function(e,i,o,a,s,h){this._rpc("writeFile",arguments)},t.prototype.appendFile=function(e,i,o,a,s,h){this._rpc("appendFile",arguments)},t.prototype.chmod=function(e,i,o,a){this._rpc("chmod",arguments)},t.prototype.chown=function(e,i,o,a,s){this._rpc("chown",arguments)},t.prototype.utimes=function(e,i,o,a){this._rpc("utimes",arguments)},t.prototype.link=function(e,i,o){this._rpc("link",arguments)},t.prototype.symlink=function(e,i,o,a){this._rpc("symlink",arguments)},t.prototype.readlink=function(e,i){this._rpc("readlink",arguments)},t.prototype.syncClose=function(e,i,o){this._worker.postMessage({browserfsMessage:!0,method:e,args:[i.toRemoteArg(),this._callbackConverter.toRemoteArg(o)]})},t.prototype._argRemote2Local=function(e){if(!e)return e;switch(typeof e){case"object":if(typeof e.type=="number"){var i=e;switch(i.type){case Vt.API_ERROR:return fi(i);case Vt.FD:var o=i;return new wi(this,o.path,L.getFileFlag(o.flag),C.fromBuffer($e(o.stat)),o.id,$e(o.data));case Vt.STATS:return pi(i);case Vt.FILEFLAG:return yi(i);case Vt.BUFFER:return gi(i);case Vt.ERROR:return li(i);default:return e}}else return e;default:return e}},t.prototype._rpc=function(e,i){for(var o=this,a=new Array(i.length),s=0;s<i.length;s++)a[s]=o._argLocal2Remote(i[s]);var h={browserfsMessage:!0,method:e,args:a};this._worker.postMessage(h)},t.prototype._argLocal2Remote=function(e){if(!e)return e;switch(typeof e){case"object":return e instanceof C?hi(e):e instanceof f?Hr(e):e instanceof wi?e.toRemoteArg():e instanceof L?di(e):e instanceof w?vi(e):e instanceof Error?ci(e):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(e);default:return e}},t}(tt);Vr.Name="WorkerFS",Vr.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(n,t){n.postMessage?t():t(new f(u.EINVAL,"option must be a Web Worker instance."))}}};function _a(n,t,r){var e=new XMLHttpRequest;e.open("GET",n,!0);var i=!0;switch(t){case"buffer":e.responseType="arraybuffer";break;case"json":try{e.responseType="json",i=e.responseType==="json"}catch{i=!1}break;default:return r(new f(u.EINVAL,"Invalid download type: "+t))}e.onreadystatechange=function(o){if(e.readyState===4)if(e.status===200)switch(t){case"buffer":return r(null,e.response?w.from(e.response):Mt());case"json":return i?r(null,e.response):r(null,JSON.parse(e.responseText))}else return r(new f(e.status,"XHR error."))},e.send()}function Fa(n,t){var r=new XMLHttpRequest;r.open("GET",n,!1);var e=null,i=null;if(r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(o){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":var a=r.responseText;e=w.alloc(a.length);for(var s=0;s<a.length;s++)e[s]=a.charCodeAt(s);return;case"json":e=JSON.parse(r.responseText);return}else{i=new f(r.status,"XHR error.");return}},r.send(),i)throw i;return e}function Ia(n,t){var r=new XMLHttpRequest;switch(r.open("GET",n,!1),t){case"buffer":r.responseType="arraybuffer";break;case"json":break;default:throw new f(u.EINVAL,"Invalid download type: "+t)}var e,i;if(r.onreadystatechange=function(o){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":e=w.from(r.response);break;case"json":e=JSON.parse(r.response);break}else i=new f(r.status,"XHR error.")},r.send(),i)throw i;return e}function mi(n,t,r){var e=new XMLHttpRequest;e.open("HEAD",t,n),e.onreadystatechange=function(i){if(e.readyState===4)if(e.status===200)try{return r(null,parseInt(e.getResponseHeader("Content-Length")||"-1",10))}catch{return r(new f(u.EIO,"XHR HEAD error: Could not read content-length."))}else return r(new f(e.status,"XHR HEAD error."))},e.send()}var Si=_a,xa=_t&&typeof Blob<"u"?Ia:Fa;function Oa(n){var t=-1;return mi(!1,n,function(r,e){if(r)throw r;t=e}),t}function ka(n,t){mi(!0,n,t)}var Ie=function(){this._index={},this.addPath("/",new ge)};Ie.fromListing=function(t){var r=new Ie,e=new ge;r._index["/"]=e;for(var i=[["",t,e]];i.length>0;){var o=void 0,a=i.pop(),s=a[0],h=a[1],y=a[2];for(var T in h)if(h.hasOwnProperty(T)){var P=h[T],Z=s+"/"+T;P?(r._index[Z]=o=new ge,i.push([Z,P,o])):o=new lr(new C(M.FILE,-1,365)),y&&(y._ls[T]=o)}}return r},Ie.prototype.fileIterator=function(t){var r=this;for(var e in r._index)if(r._index.hasOwnProperty(e))for(var i=r._index[e],o=i.getListing(),a=0,s=o;a<s.length;a+=1){var h=s[a],y=i.getItem(h);Pe(y)&&t(y.getData())}},Ie.prototype.addPath=function(t,r){if(!r)throw new Error("Inode must be specified");if(t[0]!=="/")throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===r;var e=this._split_path(t),i=e[0],o=e[1],a=this._index[i];return a===void 0&&t!=="/"&&(a=new ge,!this.addPath(i,a))||t!=="/"&&!a.addItem(o,r)?!1:(He(r)&&(this._index[t]=r),!0)},Ie.prototype.addPathFast=function(t,r){var e=t.lastIndexOf("/"),i=e===0?"/":t.substring(0,e),o=t.substring(e+1),a=this._index[i];return a===void 0&&(a=new ge,this.addPathFast(i,a)),a.addItem(o,r)?(r.isDir()&&(this._index[t]=r),!0):!1},Ie.prototype.removePath=function(t){var r=this,e=this._split_path(t),i=e[0],o=e[1],a=this._index[i];if(a===void 0)return null;var s=a.remItem(o);if(s===null)return null;if(He(s)){for(var h=s.getListing(),y=0,T=h;y<T.length;y+=1){var P=T[y];r.removePath(t+"/"+P)}t!=="/"&&delete this._index[t]}return s},Ie.prototype.ls=function(t){var r=this._index[t];return r===void 0?null:r.getListing()},Ie.prototype.getInode=function(t){var r=this._split_path(t),e=r[0],i=r[1],o=this._index[e];return o===void 0?null:e===t?o:o.getItem(i)},Ie.prototype._split_path=function(t){var r=p.dirname(t),e=t.substr(r.length+(r==="/"?0:1));return[r,e]};var lr=function(t){this.data=t};lr.prototype.isFile=function(){return!0},lr.prototype.isDir=function(){return!1},lr.prototype.getData=function(){return this.data},lr.prototype.setData=function(t){this.data=t};var ge=function(t){t===void 0&&(t=null),this.data=t,this._ls={}};ge.prototype.isFile=function(){return!1},ge.prototype.isDir=function(){return!0},ge.prototype.getData=function(){return this.data},ge.prototype.getStats=function(){return new C(M.DIRECTORY,4096,365)},ge.prototype.getListing=function(){return Object.keys(this._ls)},ge.prototype.getItem=function(t){var r=this._ls[t];return r||null},ge.prototype.addItem=function(t,r){return t in this._ls?!1:(this._ls[t]=r,!0)},ge.prototype.remItem=function(t){var r=this._ls[t];return r===void 0?null:(delete this._ls[t],r)};function Pe(n){return!!n&&n.isFile()}function He(n){return!!n&&n.isDir()}function ba(n,t,r){try{r(null,n.toString(t))}catch(e){r(e)}}var Zr=function(n){function t(r,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),r||(r="index.json"),e.length>0&&e.charAt(e.length-1)!=="/"&&(e=e+"/"),this.prefixUrl=e;var o=null;if(typeof r=="string"){if(o=this._requestFileSync(r,"json"),!o)throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else o=r;kt(i,t.Name,{index:typeof r=="string"?r:"file index as an object",baseUrl:e}),this._index=Ie.fromListing(o)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){e.index===void 0&&(e.index="index.json"),typeof e.index=="string"?t.FromURL(e.index,i,e.baseUrl,!1):i(null,new t(e.index,e.baseUrl,!1))},t.isAvailable=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},t.FromURL=function(e,i,o,a){o===void 0&&(o=e.slice(0,e.lastIndexOf("/")+1)),a===void 0&&(a=!0),a&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+e+'", baseUrl: "'+o+`" }, cb)' instead.`),Si(e,"json",function(s,h){s?i(s):i(null,new t(h,o,!1))})},t.prototype.empty=function(){this._index.fileIterator(function(e){e.fileData=null})},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.preloadFile=function(e,i){var o=this._index.getInode(e);if(Pe(o)){if(o===null)throw f.ENOENT(e);var a=o.getData();a.size=i.length,a.fileData=i}else throw f.EISDIR(e)},t.prototype.stat=function(e,i,o){var a=this._index.getInode(e);if(a===null)return o(f.ENOENT(e));var s;Pe(a)?(s=a.getData(),s.size<0?this._requestFileSizeAsync(e,function(h,y){if(h)return o(h);s.size=y,o(null,s.clone())}):o(null,s.clone())):He(a)?(s=a.getStats(),o(null,s)):o(f.FileError(u.EINVAL,e))},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw f.ENOENT(e);var a;if(Pe(o))a=o.getData(),a.size<0&&(a.size=this._requestFileSizeSync(e));else if(He(o))a=o.getStats();else throw f.FileError(u.EINVAL,e);return a},t.prototype.open=function(e,i,o,a){if(i.isWriteable())return a(new f(u.EPERM,e));var s=this,h=this._index.getInode(e);if(h===null)return a(f.ENOENT(e));if(Pe(h)){var y=h.getData();switch(i.pathExistsAction()){case b.THROW_EXCEPTION:case b.TRUNCATE_FILE:return a(f.EEXIST(e));case b.NOP:if(y.fileData)return a(null,new le(s,e,i,y.clone(),y.fileData));this._requestFileAsync(e,"buffer",function(T,P){return T?a(T):(y.size=P.length,y.fileData=P,a(null,new le(s,e,i,y.clone(),P)))});break;default:return a(new f(u.EINVAL,"Invalid FileMode object."))}}else return a(f.EISDIR(e))},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new f(u.EPERM,e);var a=this._index.getInode(e);if(a===null)throw f.ENOENT(e);if(Pe(a)){var s=a.getData();switch(i.pathExistsAction()){case b.THROW_EXCEPTION:case b.TRUNCATE_FILE:throw f.EEXIST(e);case b.NOP:if(s.fileData)return new le(this,e,i,s.clone(),s.fileData);var h=this._requestFileSync(e,"buffer");return s.size=h.length,s.fileData=h,new le(this,e,i,s.clone(),h);default:throw new f(u.EINVAL,"Invalid FileMode object.")}}else throw f.EISDIR(e)},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i===null)throw f.ENOENT(e);if(He(i))return i.getListing();throw f.ENOTDIR(e)},t.prototype.readFile=function(e,i,o,a){var s=a;this.open(e,o,420,function(h,y){if(h)return a(h);a=function(Z,et){y.close(function(nt){return Z||(Z=nt),s(Z,et)})};var T=y,P=T.getBuffer();i===null?a(h,Rt(P)):ba(P,i,a)})},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var s=a,h=s.getBuffer();return i===null?Rt(h):h.toString(i)}finally{a.closeSync()}},t.prototype.getXhrPath=function(e){return e.charAt(0)==="/"&&(e=e.slice(1)),this.prefixUrl+e},t.prototype._requestFileAsync=function(e,i,o){Si(this.getXhrPath(e),i,o)},t.prototype._requestFileSync=function(e,i){return xa(this.getXhrPath(e),i)},t.prototype._requestFileSizeAsync=function(e,i){ka(this.getXhrPath(e),i)},t.prototype._requestFileSizeSync=function(e){return Oa(this.getXhrPath(e))},t}(tt);Zr.Name="XmlHttpRequest",Zr.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var tr=function(){};tr.str2byte=function(t,r){for(var e=t.length>r.length?r.length:t.length,i=0;i<e;i++){var o=t.charCodeAt(i);if(o>127){var a=tr.extendedChars.indexOf(t.charAt(i));a>-1&&(o=a+128)}r[o]=i}return e},tr.byte2str=function(t){for(var r=new Array(t.length),e=0;e<t.length;e++){var i=t[e];i>127?r[e]=tr.extendedChars[i-128]:r[e]=String.fromCharCode(i)}return r.join("")},tr.byteLength=function(t){return t.length},tr.extendedChars=["\xC7","\xFC","\xE9","\xE2","\xE4","\xE0","\xE5","\xE7","\xEA","\xEB","\xE8","\xEF","\xEE","\xEC","\xC4","\xC5","\xC9","\xE6","\xC6","\xF4","\xF6","\xF2","\xFB","\xF9","\xFF","\xD6","\xDC","\xF8","\xA3","\xD8","\xD7","\u0192","\xE1","\xED","\xF3","\xFA","\xF1","\xD1","\xAA","\xBA","\xBF","\xAE","\xAC","\xBD","\xBC","\xA1","\xAB","\xBB","_","_","_","\xA6","\xA6","\xC1","\xC2","\xC0","\xA9","\xA6","\xA6","+","+","\xA2","\xA5","+","+","-","-","+","-","+","\xE3","\xC3","+","+","-","-","\xA6","-","+","\xA4","\xF0","\xD0","\xCA","\xCB","\xC8","i","\xCD","\xCE","\xCF","+","+","_","_","\xA6","\xCC","_","\xD3","\xDF","\xD4","\xD2","\xF5","\xD5","\xB5","\xFE","\xDE","\xDA","\xDB","\xD9","\xFD","\xDD","\xAF","\xB4","\xAD","\xB1","_","\xBE","\xB6","\xA7","\xF7","\xB8","\xB0","\xA8","\xB7","\xB9","\xB3","\xB2","_"," "];var Na=d(31).inflateRaw,Ei={},_i;(function(n){n[n.MSDOS=0]="MSDOS",n[n.AMIGA=1]="AMIGA",n[n.OPENVMS=2]="OPENVMS",n[n.UNIX=3]="UNIX",n[n.VM_CMS=4]="VM_CMS",n[n.ATARI_ST=5]="ATARI_ST",n[n.OS2_HPFS=6]="OS2_HPFS",n[n.MAC=7]="MAC",n[n.Z_SYSTEM=8]="Z_SYSTEM",n[n.CP_M=9]="CP_M",n[n.NTFS=10]="NTFS",n[n.MVS=11]="MVS",n[n.VSE=12]="VSE",n[n.ACORN_RISC=13]="ACORN_RISC",n[n.VFAT=14]="VFAT",n[n.ALT_MVS=15]="ALT_MVS",n[n.BEOS=16]="BEOS",n[n.TANDEM=17]="TANDEM",n[n.OS_400=18]="OS_400",n[n.OSX=19]="OSX"})(_i||(_i={}));var hr;(function(n){n[n.STORED=0]="STORED",n[n.SHRUNK=1]="SHRUNK",n[n.REDUCED_1=2]="REDUCED_1",n[n.REDUCED_2=3]="REDUCED_2",n[n.REDUCED_3=4]="REDUCED_3",n[n.REDUCED_4=5]="REDUCED_4",n[n.IMPLODE=6]="IMPLODE",n[n.DEFLATE=8]="DEFLATE",n[n.DEFLATE64=9]="DEFLATE64",n[n.TERSE_OLD=10]="TERSE_OLD",n[n.BZIP2=12]="BZIP2",n[n.LZMA=14]="LZMA",n[n.TERSE_NEW=18]="TERSE_NEW",n[n.LZ77=19]="LZ77",n[n.WAVPACK=97]="WAVPACK",n[n.PPMD=98]="PPMD"})(hr||(hr={}));function Fi(n,t){var r=t&31,e=(t>>5&15)-1,i=(t>>9)+1980,o=n&31,a=n>>5&63,s=n>>11;return new Date(i,e,r,s,a,o)}function Xr(n,t,r,e){return e===0?"":t?n.toString("utf8",r,r+e):tr.byte2str(n.slice(r,r+e))}var Ee=function(t){if(this.data=t,t.readUInt32LE(0)!==67324752)throw new f(u.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};Ee.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},Ee.prototype.flags=function(){return this.data.readUInt16LE(6)},Ee.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},Ee.prototype.lastModFileTime=function(){return Fi(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},Ee.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},Ee.prototype.crc32=function(){return this.data.readUInt32LE(14)},Ee.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},Ee.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},Ee.prototype.fileName=function(){return Xr(this.data,this.useUTF8(),30,this.fileNameLength())},Ee.prototype.extraField=function(){var t=30+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},Ee.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},Ee.prototype.useUTF8=function(){return(this.flags()&2048)===2048};var Or=function(t,r,e){this.header=t,this.record=r,this.data=e};Or.prototype.decompress=function(){var t=this.header.compressionMethod(),r=Ei[t];if(r)return r(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var e=hr[t];throw e||(e="Unknown: "+t),new f(u.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+e)},Or.prototype.getHeader=function(){return this.header},Or.prototype.getRecord=function(){return this.record},Or.prototype.getRawData=function(){return this.data};var Lt=function(t,r){if(this.zipData=t,this.data=r,this.data.readUInt32LE(0)!==33639248)throw new f(u.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};Lt.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},Lt.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},Lt.prototype.flag=function(){return this.data.readUInt16LE(8)},Lt.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},Lt.prototype.lastModFileTime=function(){return Fi(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},Lt.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},Lt.prototype.crc32=function(){return this.data.readUInt32LE(16)},Lt.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},Lt.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},Lt.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},Lt.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},Lt.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},Lt.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},Lt.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},Lt.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},Lt.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},Lt.prototype.produceFilename=function(){var t=Xr(this.data,this.useUTF8(),46,this.fileNameLength());return t.replace(/\\/g,"/")},Lt.prototype.fileName=function(){return this._filename},Lt.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},Lt.prototype.extraField=function(){var t=44+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},Lt.prototype.fileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return Xr(this.data,this.useUTF8(),t,this.fileCommentLength())},Lt.prototype.rawFileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(t,t+this.fileCommentLength())},Lt.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},Lt.prototype.isDirectory=function(){var t=this.fileName();return!!(this.externalAttributes()&16)||t.charAt(t.length-1)==="/"},Lt.prototype.isFile=function(){return!this.isDirectory()},Lt.prototype.useUTF8=function(){return(this.flag()&2048)===2048},Lt.prototype.isEncrypted=function(){return(this.flag()&1)===1},Lt.prototype.getFileData=function(){var t=this.headerRelativeOffset(),r=new Ee(this.zipData.slice(t));return new Or(r,this,this.zipData.slice(t+r.totalSize()))},Lt.prototype.getData=function(){return this.getFileData().decompress()},Lt.prototype.getRawData=function(){return this.getFileData().getRawData()},Lt.prototype.getStats=function(){return new C(M.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var Re=function(t){if(this.data=t,this.data.readUInt32LE(0)!==101010256)throw new f(u.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};Re.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},Re.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},Re.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},Re.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},Re.prototype.cdSize=function(){return this.data.readUInt32LE(12)},Re.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},Re.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},Re.prototype.cdZipComment=function(){return Xr(this.data,!0,22,this.cdZipCommentLength())},Re.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var Ii=function(t,r,e,i){this.index=t,this.directoryEntries=r,this.eocd=e,this.data=i},er=function(n){function t(r,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),this.name=e,this._index=new Ie,this._directoryEntries=[],this._eocd=null,kt(i,t.Name,{zipData:"zip data as a Buffer",name:e}),r instanceof Ii?(this._index=r.index,this._directoryEntries=r.directoryEntries,this._eocd=r.eocd,this.data=r.data):(this.data=r,this.populateIndex())}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{t.computeIndex(e.zipData,function(o){var a=new t(o,e.name,!1);i(null,a)},!1)}catch(o){i(o)}},t.isAvailable=function(){return!0},t.RegisterDecompressionMethod=function(e,i){Ei[e]=i},t.computeIndex=function(e,i,o){o===void 0&&(o=!0),o&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var a=new Ie,s=t.getEOCD(e);if(s.diskNumber()!==s.cdDiskNumber())throw new f(u.EINVAL,"ZipFS does not support spanned zip files.");var h=s.cdOffset();if(h===4294967295)throw new f(u.EINVAL,"ZipFS does not support Zip64.");var y=h+s.cdSize();t.computeIndexResponsive(e,a,h,y,i,[],s)},t.getEOCD=function(e){for(var i=22,o=Math.min(i+65535,e.length-1),a=i;a<o;a++)if(e.readUInt32LE(e.length-a)===101010256)return new Re(e.slice(e.length-a));throw new f(u.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},t.addToIndex=function(e,i){var o=e.fileName();if(o.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");o.charAt(o.length-1)==="/"&&(o=o.substr(0,o.length-1)),e.isDirectory()?i.addPathFast("/"+o,new ge(e)):i.addPathFast("/"+o,new lr(e))},t.computeIndexResponsive=function(e,i,o,a,s,h,y){if(o<a){for(var T=0;T++<200&&o<a;){var P=new Lt(e,e.slice(o));t.addToIndex(P,i),o+=P.totalSize(),h.push(P)}dn(function(){t.computeIndexResponsive(e,i,o,a,s,h,y)})}else s(new Ii(i,h,y,e))},t.prototype.getName=function(){return t.Name+(this.name!==""?" "+this.name:"")},t.prototype.getCentralDirectoryEntry=function(e){var i=this._index.getInode(e);if(i===null)throw f.ENOENT(e);if(Pe(i))return i.getData();if(He(i))return i.getData();throw f.EPERM("Invalid inode: "+i)},t.prototype.getCentralDirectoryEntryAt=function(e){var i=this._directoryEntries[e];if(!i)throw new RangeError("Invalid directory index: "+e+".");return i},t.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},t.prototype.getEndOfCentralDirectory=function(){return this._eocd},t.prototype.diskSpace=function(e,i){i(this.data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw f.ENOENT(e);var a;if(Pe(o))a=o.getData().getStats();else if(He(o))a=o.getStats();else throw new f(u.EINVAL,"Invalid inode.");return a},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new f(u.EPERM,e);var a=this._index.getInode(e);if(a)if(Pe(a)){var s=a.getData(),h=s.getStats();switch(i.pathExistsAction()){case b.THROW_EXCEPTION:case b.TRUNCATE_FILE:throw f.EEXIST(e);case b.NOP:return new le(this,e,i,h,s.getData());default:throw new f(u.EINVAL,"Invalid FileMode object.")}}else throw f.EISDIR(e);else throw f.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i){if(He(i))return i.getListing();throw f.ENOTDIR(e)}else throw f.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var s=a,h=s.getBuffer();return i===null?Rt(h):h.toString(i)}finally{a.closeSync()}},t.prototype.populateIndex=function(){var e=this,i=this._eocd=t.getEOCD(this.data);if(i.diskNumber()!==i.cdDiskNumber())throw new f(u.EINVAL,"ZipFS does not support spanned zip files.");var o=i.cdOffset();if(o===4294967295)throw new f(u.EINVAL,"ZipFS does not support Zip64.");for(var a=o+i.cdSize();o<a;){var s=new Lt(e.data,e.data.slice(o));o+=s.totalSize(),t.addToIndex(s,e._index),e._directoryEntries.push(s)}},t}(ne);er.Name="ZipFS",er.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:x},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},er.CompressionMethod=hr,er.RegisterDecompressionMethod(hr.DEFLATE,function(n,t,r){return Ot(Na(n.slice(0,t),{chunkSize:r}))}),er.RegisterDecompressionMethod(hr.STORED,function(n,t,r){return Rt(n,0,r)});var Ra="IEEE_P1282";function we(n,t,r){return n.toString("ascii",t,t+r).trim()}function vn(n,t,r){if(r===1)return String.fromCharCode(n[t]);for(var e=Math.floor(r/2),i=new Array(e),o=0;o<e;o++){var a=t+(o<<1);i[o]=String.fromCharCode(n[a+1]|n[a]<<8)}return i.join("")}function Te(n,t){var r=parseInt(we(n,t,4),10),e=parseInt(we(n,t+4,2),10),i=parseInt(we(n,t+6,2),10),o=parseInt(we(n,t+8,2),10),a=parseInt(we(n,t+10,2),10),s=parseInt(we(n,t+12,2),10),h=parseInt(we(n,t+14,2),10);return new Date(r,e,i,o,a,s,h*100)}function rr(n,t){var r=n[t],e=n[t+1],i=n[t+2],o=n[t+3],a=n[t+4],s=n[t+5];return new Date(r,e-1,i,o,a,s)}function Ta(n,t){var r=n.slice(t),e=new $t(r);switch(e.signatureWord()){case 17221:return new Ni(r);case 20548:return new Aa(r);case 21328:return new Ri(r);case 21332:return new Ti(r);case 17746:return new Li(r);case 17747:return new Ca(r);case 20568:return new Ai(r);case 20558:return new Ma(r);case 21324:return new gn(r);case 20045:return new Ci(r);case 17228:return new wn(r);case 20556:return new Pa(r);case 21061:return new Mi(r);case 21574:return new Pi(r);case 21318:return new Ba(r);case 21074:return new Di(r);default:return e}}function xi(n,t,r,e){r=r-4;for(var i=new Array;t<r;){var o=Ta(n,t),a=o.length();if(a===0)return i;if(t+=a,o instanceof Ti)break;o instanceof Ni?i=i.concat(o.getEntries(e)):i.push(o)}return i}var pr=function(t){this._data=t};pr.prototype.type=function(){return this._data[0]},pr.prototype.standardIdentifier=function(){return we(this._data,1,5)},pr.prototype.version=function(){return this._data[6]},pr.prototype.data=function(){return this._data.slice(7,2048)};var Oi=function(n){function t(r){n.call(this,r),this._root=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.systemIdentifier=function(){return this._getString32(8)},t.prototype.volumeIdentifier=function(){return this._getString32(40)},t.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},t.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},t.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},t.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},t.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},t.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},t.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},t.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},t.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},t.prototype.rootDirectoryEntry=function(e){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(e)),this._root},t.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},t.prototype.publisherIdentifier=function(){return this._getString(318,128)},t.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},t.prototype.applicationIdentifier=function(){return this._getString(574,128)},t.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},t.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},t.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},t.prototype.volumeCreationDate=function(){return Te(this._data,813)},t.prototype.volumeModificationDate=function(){return Te(this._data,830)},t.prototype.volumeExpirationDate=function(){return Te(this._data,847)},t.prototype.volumeEffectiveDate=function(){return Te(this._data,864)},t.prototype.fileStructureVersion=function(){return this._data[881]},t.prototype.applicationUsed=function(){return this._data.slice(883,883+512)},t.prototype.reserved=function(){return this._data.slice(1395,1395+653)},t.prototype._getString32=function(e){return this._getString(e,32)},t}(pr),La=function(n){function t(r){if(n.call(this,r),this.type()!==1)throw new f(u.EIO,"Invalid primary volume descriptor.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"ISO9660"},t.prototype._constructRootDirectoryRecord=function(e){return new ki(e,-1)},t.prototype._getString=function(e,i){return this._getString(e,i)},t}(Oi),Da=function(n){function t(r){if(n.call(this,r),this.type()!==2)throw new f(u.EIO,"Invalid supplementary volume descriptor.");var e=this.escapeSequence(),i=e[2];if(e[0]!==37||e[1]!==47||i!==64&&i!==67&&i!==69)throw new f(u.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+e.toString())}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"Joliet"},t.prototype.escapeSequence=function(){return this._data.slice(88,120)},t.prototype._constructRootDirectoryRecord=function(e){return new bi(e,-1)},t.prototype._getString=function(e,i){return vn(this._data,e,i)},t}(Oi),jt=function(t,r){this._suEntries=null,this._fileOrDir=null,this._data=t,this._rockRidgeOffset=r};jt.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},jt.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},jt.prototype.rootCheckForRockRidge=function(t){var r=this.getDirectory(t);this._rockRidgeOffset=r.getDotEntry(t)._getRockRidgeOffset(t),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},jt.prototype.length=function(){return this._data[0]},jt.prototype.extendedAttributeRecordLength=function(){return this._data[1]},jt.prototype.lba=function(){return this._data.readUInt32LE(2)*2048},jt.prototype.dataLength=function(){return this._data.readUInt32LE(10)},jt.prototype.recordingDate=function(){return rr(this._data,18)},jt.prototype.fileFlags=function(){return this._data[25]},jt.prototype.fileUnitSize=function(){return this._data[26]},jt.prototype.interleaveGapSize=function(){return this._data[27]},jt.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},jt.prototype.identifier=function(){return this._getString(33,this._data[32])},jt.prototype.fileName=function(t){if(this.hasRockRidge()){var r=this._rockRidgeFilename(t);if(r!==null)return r}var e=this.identifier();if(this.isDirectory(t))return e;var i=e.indexOf(";");return i===-1?e:e[i-1]==="."?e.slice(0,i-1):e.slice(0,i)},jt.prototype.isDirectory=function(t){var r=!!(this.fileFlags()&2);return!r&&this.hasRockRidge()&&(r=this.getSUEntries(t).filter(function(e){return e instanceof wn}).length>0),r},jt.prototype.isSymlink=function(t){return this.hasRockRidge()&&this.getSUEntries(t).filter(function(r){return r instanceof gn}).length>0},jt.prototype.getSymlinkPath=function(t){for(var r="",e=this.getSUEntries(t),i=this._getGetString(),o=0,a=e;o<a.length;o+=1){var s=a[o];if(s instanceof gn){for(var h=s.componentRecords(),y=0,T=h;y<T.length;y+=1){var P=T[y],Z=P.flags();Z&2?r+="./":Z&4?r+="../":Z&8?r+="/":(r+=P.content(i),Z&1||(r+="/"))}if(!s.continueFlag())break}}return r.length>1&&r[r.length-1]==="/"?r.slice(0,r.length-1):r},jt.prototype.getFile=function(t){if(this.isDirectory(t))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=t.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},jt.prototype.getDirectory=function(t){if(!this.isDirectory(t))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(t)),this._fileOrDir},jt.prototype.getSUEntries=function(t){return this._suEntries||this._constructSUEntries(t),this._suEntries},jt.prototype._rockRidgeFilename=function(t){var r=this.getSUEntries(t).filter(function(h){return h instanceof Ci});if(r.length===0||r[0].flags()&6)return null;for(var e="",i=this._getGetString(),o=0,a=r;o<a.length;o+=1){var s=a[o];if(e+=s.name(i),!(s.flags()&1))break}return e},jt.prototype._constructSUEntries=function(t){var r=33+this._data[32];r%2===1&&r++,r+=this._rockRidgeOffset,this._suEntries=xi(this._data,r,this.length(),t)},jt.prototype._getRockRidgeOffset=function(t){this._rockRidgeOffset=0;var r=this.getSUEntries(t);if(r.length>0){var e=r[0];if(e instanceof Ri&&e.checkBytesPass())for(var i=1;i<r.length;i++){var o=r[i];if(o instanceof Di||o instanceof Li&&o.extensionIdentifier()===Ra)return e.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var ki=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return we(this._data,e,i)},t.prototype._constructDirectory=function(e){return new Ua(this,e)},t.prototype._getGetString=function(){return we},t}(jt),bi=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return vn(this._data,e,i)},t.prototype._constructDirectory=function(e){return new za(this,e)},t.prototype._getGetString=function(){return vn},t}(jt),$t=function(t){this._data=t};$t.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},$t.prototype.signatureWordString=function(){return we(this._data,0,2)},$t.prototype.length=function(){return this._data[2]},$t.prototype.suVersion=function(){return this._data[3]};var Ni=function(n){function t(r){n.call(this,r),this._entries=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},t.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},t.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},t.prototype.getEntries=function(e){if(!this._entries){var i=this.continuationLba()*2048+this.continuationLbaOffset();this._entries=xi(e,i,this.continuationLength(),e)}return this._entries},t}($t),Aa=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}($t),Ri=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.checkBytesPass=function(){return this._data[4]===190&&this._data[5]===239},t.prototype.bytesSkipped=function(){return this._data[6]},t}($t),Ti=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}($t),Li=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.identifierLength=function(){return this._data[4]},t.prototype.descriptorLength=function(){return this._data[5]},t.prototype.sourceLength=function(){return this._data[6]},t.prototype.extensionVersion=function(){return this._data[7]},t.prototype.extensionIdentifier=function(){return we(this._data,8,this.identifierLength())},t.prototype.extensionDescriptor=function(){return we(this._data,8+this.identifierLength(),this.descriptorLength())},t.prototype.extensionSource=function(){return we(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},t}($t),Ca=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.extensionSequence=function(){return this._data[4]},t}($t),Di=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}($t),Ai=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.mode=function(){return this._data.readUInt32LE(4)},t.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},t.prototype.uid=function(){return this._data.readUInt32LE(20)},t.prototype.gid=function(){return this._data.readUInt32LE(28)},t.prototype.inode=function(){return this._data.readUInt32LE(36)},t}($t),Ma=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},t.prototype.devTLow=function(){return this._data.readUInt32LE(12)},t}($t),gn=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.continueFlag=function(){return this.flags()&1},t.prototype.componentRecords=function(){for(var e=this,i=new Array,o=5;o<this.length();){var a=new kr(e._data.slice(o));i.push(a),o+=a.length()}return i},t}($t),kr=function(t){this._data=t};kr.prototype.flags=function(){return this._data[0]},kr.prototype.length=function(){return 2+this.componentLength()},kr.prototype.componentLength=function(){return this._data[1]},kr.prototype.content=function(t){return t(this._data,2,this.componentLength())};var Ci=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.name=function(e){return e(this._data,5,this.length()-5)},t}($t),wn=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},t}($t),Pa=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},t}($t),Mi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}($t),Pi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.creation=function(){return this.flags()&1?this._longFormDates()?Te(this._data,5):rr(this._data,5):null},t.prototype.modify=function(){if(this.flags()&2){var e=this.flags()&1?1:0;return this._longFormDates?Te(this._data,5+e*17):rr(this._data,5+e*7)}else return null},t.prototype.access=function(){if(this.flags()&4){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,this._longFormDates?Te(this._data,5+e*17):rr(this._data,5+e*7)}else return null},t.prototype.backup=function(){if(this.flags()&16){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,this._longFormDates?Te(this._data,5+e*17):rr(this._data,5+e*7)}else return null},t.prototype.expiration=function(){if(this.flags()&32){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,this._longFormDates?Te(this._data,5+e*17):rr(this._data,5+e*7)}else return null},t.prototype.effective=function(){if(this.flags()&64){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,e+=this.flags()&32?1:0,this._longFormDates?Te(this._data,5+e*17):rr(this._data,5+e*7)}else return null},t.prototype._longFormDates=function(){return!!this.flags()},t}($t),Ba=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},t.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},t.prototype.tableDepth=function(){return this._data[20]},t}($t),br=function(t,r){var e=this;this._fileList=[],this._fileMap={},this._record=t;var i=t.lba(),o=i+t.dataLength();if(!(t.fileFlags()&2)){var a=t.getSUEntries(r).filter(function(T){return T instanceof wn})[0];i=a.childDirectoryLba()*2048,o=1/0}for(;i<o;){var s=r[i];if(s===0){i++;continue}var h=e._constructDirectoryRecord(r.slice(i)),y=h.fileName(r);y!=="\0"&&y!==""?(!h.hasRockRidge()||h.getSUEntries(r).filter(function(T){return T instanceof Mi}).length===0)&&(e._fileMap[y]=h,e._fileList.push(y)):o===1/0&&(o=i+h.dataLength()),i+=h.length()}};br.prototype.getRecord=function(t){return this._fileMap[t]},br.prototype.getFileList=function(){return this._fileList},br.prototype.getDotEntry=function(t){return this._constructDirectoryRecord(t.slice(this._record.lba()))};var Ua=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new ki(e,this._record.getRockRidgeOffset())},t}(br),za=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new bi(e,this._record.getRockRidgeOffset())},t}(br),Yr=function(n){function t(r,e,i){var o=this;e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),this._data=r,kt(i,t.Name,{data:"ISO data as a Buffer",name:e});for(var a=!1,s=16*2048,h=new Array;!a;){var y=r.slice(s),T=new pr(y);switch(T.type()){case 1:h.push(new La(y));break;case 2:h.push(new Da(y));break;case 255:a=!0;break}s+=2048}if(h.length===0)throw new f(u.EIO,"Unable to find a suitable volume descriptor.");h.forEach(function(P){(!o._pvd||o._pvd.type()!==2)&&(o._pvd=P)}),this._root=this._pvd.rootDirectoryEntry(r),this._name=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o,a;try{o=new t(e.data,e.name,!1)}catch(s){s=s}finally{i(a,o)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){var e="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(e+="-RockRidge"),e},t.prototype.diskSpace=function(e,i){i(this._data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._getDirectoryRecord(e);if(o===null)throw f.ENOENT(e);return this._getStats(e,o)},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new f(u.EPERM,e);var a=this._getDirectoryRecord(e);if(a){if(a.isSymlink(this._data))return this.openSync(p.resolve(e,a.getSymlinkPath(this._data)),i,o);if(a.isDirectory(this._data))throw f.EISDIR(e);var s=a.getFile(this._data),h=this._getStats(e,a);switch(i.pathExistsAction()){case b.THROW_EXCEPTION:case b.TRUNCATE_FILE:throw f.EEXIST(e);case b.NOP:return new le(this,e,i,h,s);default:throw new f(u.EINVAL,"Invalid FileMode object.")}}else throw f.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._getDirectoryRecord(e);if(i){if(i.isDirectory(this._data))return i.getDirectory(this._data).getFileList().slice(0);throw f.ENOTDIR(e)}else throw f.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var s=a,h=s.getBuffer();return i===null?Rt(h):h.toString(i)}finally{a.closeSync()}},t.prototype._getDirectoryRecord=function(e){var i=this;if(e==="/")return this._root;for(var o=e.split("/").slice(1),a=this._root,s=0,h=o;s<h.length;s+=1){var y=h[s];if(a.isDirectory(i._data)){if(a=a.getDirectory(i._data).getRecord(y),!a)return null}else return null}return a},t.prototype._getStats=function(e,i){if(i.isSymlink(this._data)){var o=p.resolve(e,i.getSymlinkPath(this._data)),a=this._getDirectoryRecord(o);return a?this._getStats(o,a):null}else{var s=i.dataLength(),h=365,y=i.recordingDate(),T=y,P=y,Z=y;if(i.hasRockRidge())for(var et=i.getSUEntries(this._data),nt=0,lt=et;nt<lt.length;nt+=1){var gt=lt[nt];if(gt instanceof Ai)h=gt.mode();else if(gt instanceof Pi){var xt=gt.flags();xt&4&&(T=gt.access()),xt&2&&(P=gt.modify()),xt&1&&(Z=gt.creation())}}return h=h&365,new C(i.isDirectory(this._data)?M.DIRECTORY:M.FILE,s,h,T,P,Z)}},t}(ne);Yr.Name="IsoFS",Yr.Options={data:{type:"object",description:"The ISO file in a buffer",validator:x}},[F,Cr,Mr,sr,Br,ur,Sr,Yr,_r,fr,xr,Vr,Zr,er].forEach(function(n){var t=n.Create;n.Create=function(r,e){var i=typeof r=="function",o=i?r:e,a=i?{}:r;function s(h){h?o(h):t.call(n,a,o)}k(n,a,s)}});var qr={AsyncMirror:F,Dropbox:Cr,Emscripten:Mr,FolderAdapter:sr,HTML5FS:Br,InMemory:ur,IndexedDB:Sr,IsoFS:Yr,LocalStorage:_r,MountableFileSystem:fr,OverlayFS:xr,WorkerFS:Vr,XmlHttpRequest:Zr,ZipFS:er};R.initializeTTYs&&R.initializeTTYs();function ja(n){n.Buffer=w,n.process=R;var t=n.require?n.require:null;n.require=function(r){var e=Bi(r);return e||t.apply(null,Array.prototype.slice.call(arguments,0))}}function Wa(n,t){qr[n]=t}function Bi(n){switch(n){case"fs":return ft;case"path":return p;case"buffer":return m;case"process":return R;case"bfs_utils":return K;default:return qr[n]}}function Ui(n){return ft.initialize(n)}function Ha(n,t){mn(n,function(r,e){e?(Ui(e),t()):t(r)})}function mn(n,t){var r=n.fs;if(!r)return t(new f(u.EPERM,'Missing "fs" property on configuration object.'));var e=n.options,i=0,o=!1;function a(){if(!o){o=!0;var y=qr[r];y?y.Create(e,t):t(new f(u.EPERM,"File system "+r+" is not available in BrowserFS."))}}if(e!==null&&typeof e=="object"){var s=!1,h=Object.keys(e).filter(function(y){return y!=="fs"});h.forEach(function(y){var T=e[y];T!==null&&typeof T=="object"&&T.fs&&(i++,mn(T,function(P,Z){if(i--,P){if(o)return;o=!0,t(P)}else e[y]=Z,i===0&&s&&a()}))}),s=!0}i===0&&a()}"ab".substr(-1)!=="b"&&(String.prototype.substr=function(n){return function(t,r){return t<0&&(t=this.length+t),n.call(this,t,r)}}(String.prototype.substr)),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(n,t){n===void 0&&(n=0),t===void 0&&(t=this.length);var r=this;return n<0&&(n=this.length+n,n<0&&(n=0)),t<0&&(t=this.length+t,t<0&&(t=0)),t<n&&(t=n),new Uint8Array(r.buffer,r.byteOffset+n,t-n)})),S.install=ja,S.registerFileSystem=Wa,S.BFSRequire=Bi,S.initialize=Ui,S.configure=Ha,S.getFileSystem=mn,S.EmscriptenFS=It,S.FileSystem=qr,S.Errors=D,S.setImmediate=dn}).call(S,d(1),function(){return this}(),d(5)(O),d(6))},function(O,S,d){O.exports=d(2).Buffer},function(O,S,d){(function(u){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license  MIT
*/var N=d(3),E=d(4);S.Buffer=u,S.SlowBuffer=j,S.INSPECT_MAX_BYTES=50;var R=2147483647;S.kMaxLength=R,u.TYPED_ARRAY_SUPPORT=m(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function m(){try{var F=new Uint8Array(1);return F.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},F.foo()===42}catch{return!1}}function p(F){if(F>R)throw new RangeError("Invalid typed array length");var c=new Uint8Array(F);return c.__proto__=u.prototype,c}function u(F,c,l){if(typeof F=="number"){if(typeof c=="string")throw new Error("If encoding is specified then the first argument must be a string");return b(F)}return v(F,c,l)}typeof Symbol<"u"&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192;function v(F,c,l){if(typeof F=="number")throw new TypeError('"value" argument must not be a number');return se(F)?C(F,c,l):typeof F=="string"?L(F,c):J(F)}u.from=function(F,c,l){return v(F,c,l)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array;function f(F){if(typeof F!="number")throw new TypeError('"size" argument must be a number');if(F<0)throw new RangeError('"size" argument must not be negative')}function D(F,c,l){return f(F),F<=0?p(F):c!==void 0?typeof l=="string"?p(F).fill(c,l):p(F).fill(c):p(F)}u.alloc=function(F,c,l){return D(F,c,l)};function b(F){return f(F),p(F<0?0:U(F)|0)}u.allocUnsafe=function(F){return b(F)},u.allocUnsafeSlow=function(F){return b(F)};function L(F,c){if((typeof c!="string"||c==="")&&(c="utf8"),!u.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');var l=yt(F,c)|0,I=p(l),B=I.write(F,c);return B!==l&&(I=I.slice(0,B)),I}function M(F){for(var c=F.length<0?0:U(F.length)|0,l=p(c),I=0;I<c;I+=1)l[I]=F[I]&255;return l}function C(F,c,l){if(c<0||F.byteLength<c)throw new RangeError("'offset' is out of bounds");if(F.byteLength<c+(l||0))throw new RangeError("'length' is out of bounds");var I;return c===void 0&&l===void 0?I=new Uint8Array(F):l===void 0?I=new Uint8Array(F,c):I=new Uint8Array(F,c,l),I.__proto__=u.prototype,I}function J(F){if(u.isBuffer(F)){var c=U(F.length)|0,l=p(c);return l.length===0||F.copy(l,0,0,c),l}if(F){if(le(F)||"length"in F)return typeof F.length!="number"||xe(F.length)?p(0):M(F);if(F.type==="Buffer"&&Array.isArray(F.data))return M(F.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function U(F){if(F>=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");return F|0}function j(F){return+F!=F&&(F=0),u.alloc(+F)}u.isBuffer=function(c){return c!=null&&c._isBuffer===!0},u.compare=function(c,l){if(!u.isBuffer(c)||!u.isBuffer(l))throw new TypeError("Arguments must be Buffers");if(c===l)return 0;for(var I=c.length,B=l.length,X=0,Q=Math.min(I,B);X<Q;++X)if(c[X]!==l[X]){I=c[X],B=l[X];break}return I<B?-1:B<I?1:0},u.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(c,l){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return u.alloc(0);var I;if(l===void 0)for(l=0,I=0;I<c.length;++I)l+=c[I].length;var B=u.allocUnsafe(l),X=0;for(I=0;I<c.length;++I){var Q=c[I];if(!u.isBuffer(Q))throw new TypeError('"list" argument must be an Array of Buffers');Q.copy(B,X),X+=Q.length}return B};function yt(F,c){if(u.isBuffer(F))return F.length;if(le(F)||se(F))return F.byteLength;typeof F!="string"&&(F=""+F);var l=F.length;if(l===0)return 0;for(var I=!1;;)switch(c){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":case void 0:return vt(F).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return ne(F).length;default:if(I)return vt(F).length;c=(""+c).toLowerCase(),I=!0}}u.byteLength=yt;function G(F,c,l){var I=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,c>>>=0,l<=c))return"";for(F||(F="utf8");;)switch(F){case"hex":return Ot(this,c,l);case"utf8":case"utf-8":return qt(this,c,l);case"ascii":return $(this,c,l);case"latin1":case"binary":return ht(this,c,l);case"base64":return _t(this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return St(this,c,l);default:if(I)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),I=!0}}u.prototype._isBuffer=!0;function dt(F,c,l){var I=F[c];F[c]=F[l],F[l]=I}u.prototype.swap16=function(){var c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var l=0;l<c;l+=2)dt(this,l,l+1);return this},u.prototype.swap32=function(){var c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var l=0;l<c;l+=4)dt(this,l,l+3),dt(this,l+1,l+2);return this},u.prototype.swap64=function(){var c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var l=0;l<c;l+=8)dt(this,l,l+7),dt(this,l+1,l+6),dt(this,l+2,l+5),dt(this,l+3,l+4);return this},u.prototype.toString=function(){var c=this.length;return c===0?"":arguments.length===0?qt(this,0,c):G.apply(this,arguments)},u.prototype.equals=function(c){if(!u.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:u.compare(this,c)===0},u.prototype.inspect=function(){var c="",l=S.INSPECT_MAX_BYTES;return this.length>0&&(c=this.toString("hex",0,l).match(/.{2}/g).join(" "),this.length>l&&(c+=" ... ")),"<Buffer "+c+">"},u.prototype.compare=function(c,l,I,B,X){if(!u.isBuffer(c))throw new TypeError("Argument must be a Buffer");if(l===void 0&&(l=0),I===void 0&&(I=c?c.length:0),B===void 0&&(B=0),X===void 0&&(X=this.length),l<0||I>c.length||B<0||X>this.length)throw new RangeError("out of range index");if(B>=X&&l>=I)return 0;if(B>=X)return-1;if(l>=I)return 1;if(l>>>=0,I>>>=0,B>>>=0,X>>>=0,this===c)return 0;for(var Q=X-B,bt=I-l,Dt=Math.min(Q,bt),Pt=this.slice(B,X),Gt=c.slice(l,I),Ct=0;Ct<Dt;++Ct)if(Pt[Ct]!==Gt[Ct]){Q=Pt[Ct],bt=Gt[Ct];break}return Q<bt?-1:bt<Q?1:0};function ct(F,c,l,I,B){if(F.length===0)return-1;if(typeof l=="string"?(I=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,xe(l)&&(l=B?0:F.length-1),l<0&&(l=F.length+l),l>=F.length){if(B)return-1;l=F.length-1}else if(l<0)if(B)l=0;else return-1;if(typeof c=="string"&&(c=u.from(c,I)),u.isBuffer(c))return c.length===0?-1:z(F,c,l,I,B);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(F,c,l):Uint8Array.prototype.lastIndexOf.call(F,c,l):z(F,[c],l,I,B);throw new TypeError("val must be string, number or Buffer")}function z(F,c,l,I,B){var X=1,Q=F.length,bt=c.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(F.length<2||c.length<2)return-1;X=2,Q/=2,bt/=2,l/=2}function Dt(ir,Xe){return X===1?ir[Xe]:ir.readUInt16BE(Xe*X)}var Pt;if(B){var Gt=-1;for(Pt=l;Pt<Q;Pt++)if(Dt(F,Pt)===Dt(c,Gt===-1?0:Pt-Gt)){if(Gt===-1&&(Gt=Pt),Pt-Gt+1===bt)return Gt*X}else Gt!==-1&&(Pt-=Pt-Gt),Gt=-1}else for(l+bt>Q&&(l=Q-bt),Pt=l;Pt>=0;Pt--){for(var Ct=!0,Oe=0;Oe<bt;Oe++)if(Dt(F,Pt+Oe)!==Dt(c,Oe)){Ct=!1;break}if(Ct)return Pt}return-1}u.prototype.includes=function(c,l,I){return this.indexOf(c,l,I)!==-1},u.prototype.indexOf=function(c,l,I){return ct(this,c,l,I,!0)},u.prototype.lastIndexOf=function(c,l,I){return ct(this,c,l,I,!1)};function rt(F,c,l,I){l=Number(l)||0;var B=F.length-l;I?(I=Number(I),I>B&&(I=B)):I=B;var X=c.length;if(X%2!==0)throw new TypeError("Invalid hex string");I>X/2&&(I=X/2);for(var Q=0;Q<I;++Q){var bt=parseInt(c.substr(Q*2,2),16);if(xe(bt))return Q;F[l+Q]=bt}return Q}function ft(F,c,l,I){return mt(vt(c,F.length-l),F,l,I)}function Nt(F,c,l,I){return mt(It(c),F,l,I)}function wt(F,c,l,I){return Nt(F,c,l,I)}function At(F,c,l,I){return mt(ne(c),F,l,I)}function kt(F,c,l,I){return mt(tt(c,F.length-l),F,l,I)}u.prototype.write=function(c,l,I,B){if(l===void 0)B="utf8",I=this.length,l=0;else if(I===void 0&&typeof l=="string")B=l,I=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(I)?(I=I>>>0,B===void 0&&(B="utf8")):(B=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var X=this.length-l;if((I===void 0||I>X)&&(I=X),c.length>0&&(I<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");for(var Q=!1;;)switch(B){case"hex":return rt(this,c,l,I);case"utf8":case"utf-8":return ft(this,c,l,I);case"ascii":return Nt(this,c,l,I);case"latin1":case"binary":return wt(this,c,l,I);case"base64":return At(this,c,l,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kt(this,c,l,I);default:if(Q)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),Q=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _t(F,c,l){return c===0&&l===F.length?N.fromByteArray(F):N.fromByteArray(F.slice(c,l))}function qt(F,c,l){l=Math.min(F.length,l);for(var I=[],B=c;B<l;){var X=F[B],Q=null,bt=X>239?4:X>223?3:X>191?2:1;if(B+bt<=l){var Dt,Pt,Gt,Ct;switch(bt){case 1:X<128&&(Q=X);break;case 2:Dt=F[B+1],(Dt&192)===128&&(Ct=(X&31)<<6|Dt&63,Ct>127&&(Q=Ct));break;case 3:Dt=F[B+1],Pt=F[B+2],(Dt&192)===128&&(Pt&192)===128&&(Ct=(X&15)<<12|(Dt&63)<<6|Pt&63,Ct>2047&&(Ct<55296||Ct>57343)&&(Q=Ct));break;case 4:Dt=F[B+1],Pt=F[B+2],Gt=F[B+3],(Dt&192)===128&&(Pt&192)===128&&(Gt&192)===128&&(Ct=(X&15)<<18|(Dt&63)<<12|(Pt&63)<<6|Gt&63,Ct>65535&&Ct<1114112&&(Q=Ct))}}Q===null?(Q=65533,bt=1):Q>65535&&(Q-=65536,I.push(Q>>>10&1023|55296),Q=56320|Q&1023),I.push(Q),B+=bt}return W(I)}var H=4096;function W(F){var c=F.length;if(c<=H)return String.fromCharCode.apply(String,F);for(var l="",I=0;I<c;)l+=String.fromCharCode.apply(String,F.slice(I,I+=H));return l}function $(F,c,l){var I="";l=Math.min(F.length,l);for(var B=c;B<l;++B)I+=String.fromCharCode(F[B]&127);return I}function ht(F,c,l){var I="";l=Math.min(F.length,l);for(var B=c;B<l;++B)I+=String.fromCharCode(F[B]);return I}function Ot(F,c,l){var I=F.length;(!c||c<0)&&(c=0),(!l||l<0||l>I)&&(l=I);for(var B="",X=c;X<l;++X)B+=it(F[X]);return B}function St(F,c,l){for(var I=F.slice(c,l),B="",X=0;X<I.length;X+=2)B+=String.fromCharCode(I[X]+I[X+1]*256);return B}u.prototype.slice=function(c,l){var I=this.length;c=~~c,l=l===void 0?I:~~l,c<0?(c+=I,c<0&&(c=0)):c>I&&(c=I),l<0?(l+=I,l<0&&(l=0)):l>I&&(l=I),l<c&&(l=c);var B=this.subarray(c,l);return B.__proto__=u.prototype,B};function Ft(F,c,l){if(F%1!==0||F<0)throw new RangeError("offset is not uint");if(F+c>l)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(c,l,I){c=c>>>0,l=l>>>0,I||Ft(c,l,this.length);for(var B=this[c],X=1,Q=0;++Q<l&&(X*=256);)B+=this[c+Q]*X;return B},u.prototype.readUIntBE=function(c,l,I){c=c>>>0,l=l>>>0,I||Ft(c,l,this.length);for(var B=this[c+--l],X=1;l>0&&(X*=256);)B+=this[c+--l]*X;return B},u.prototype.readUInt8=function(c,l){return c=c>>>0,l||Ft(c,1,this.length),this[c]},u.prototype.readUInt16LE=function(c,l){return c=c>>>0,l||Ft(c,2,this.length),this[c]|this[c+1]<<8},u.prototype.readUInt16BE=function(c,l){return c=c>>>0,l||Ft(c,2,this.length),this[c]<<8|this[c+1]},u.prototype.readUInt32LE=function(c,l){return c=c>>>0,l||Ft(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},u.prototype.readUInt32BE=function(c,l){return c=c>>>0,l||Ft(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},u.prototype.readIntLE=function(c,l,I){c=c>>>0,l=l>>>0,I||Ft(c,l,this.length);for(var B=this[c],X=1,Q=0;++Q<l&&(X*=256);)B+=this[c+Q]*X;return X*=128,B>=X&&(B-=Math.pow(2,8*l)),B},u.prototype.readIntBE=function(c,l,I){c=c>>>0,l=l>>>0,I||Ft(c,l,this.length);for(var B=l,X=1,Q=this[c+--B];B>0&&(X*=256);)Q+=this[c+--B]*X;return X*=128,Q>=X&&(Q-=Math.pow(2,8*l)),Q},u.prototype.readInt8=function(c,l){return c=c>>>0,l||Ft(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},u.prototype.readInt16LE=function(c,l){c=c>>>0,l||Ft(c,2,this.length);var I=this[c]|this[c+1]<<8;return I&32768?I|4294901760:I},u.prototype.readInt16BE=function(c,l){c=c>>>0,l||Ft(c,2,this.length);var I=this[c+1]|this[c]<<8;return I&32768?I|4294901760:I},u.prototype.readInt32LE=function(c,l){return c=c>>>0,l||Ft(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},u.prototype.readInt32BE=function(c,l){return c=c>>>0,l||Ft(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},u.prototype.readFloatLE=function(c,l){return c=c>>>0,l||Ft(c,4,this.length),E.read(this,c,!0,23,4)},u.prototype.readFloatBE=function(c,l){return c=c>>>0,l||Ft(c,4,this.length),E.read(this,c,!1,23,4)},u.prototype.readDoubleLE=function(c,l){return c=c>>>0,l||Ft(c,8,this.length),E.read(this,c,!0,52,8)},u.prototype.readDoubleBE=function(c,l){return c=c>>>0,l||Ft(c,8,this.length),E.read(this,c,!1,52,8)};function Rt(F,c,l,I,B,X){if(!u.isBuffer(F))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>B||c<X)throw new RangeError('"value" argument is out of bounds');if(l+I>F.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(c,l,I,B){if(c=+c,l=l>>>0,I=I>>>0,!B){var X=Math.pow(2,8*I)-1;Rt(this,c,l,I,X,0)}var Q=1,bt=0;for(this[l]=c&255;++bt<I&&(Q*=256);)this[l+bt]=c/Q&255;return l+I},u.prototype.writeUIntBE=function(c,l,I,B){if(c=+c,l=l>>>0,I=I>>>0,!B){var X=Math.pow(2,8*I)-1;Rt(this,c,l,I,X,0)}var Q=I-1,bt=1;for(this[l+Q]=c&255;--Q>=0&&(bt*=256);)this[l+Q]=c/bt&255;return l+I},u.prototype.writeUInt8=function(c,l,I){return c=+c,l=l>>>0,I||Rt(this,c,l,1,255,0),this[l]=c&255,l+1},u.prototype.writeUInt16LE=function(c,l,I){return c=+c,l=l>>>0,I||Rt(this,c,l,2,65535,0),this[l]=c&255,this[l+1]=c>>>8,l+2},u.prototype.writeUInt16BE=function(c,l,I){return c=+c,l=l>>>0,I||Rt(this,c,l,2,65535,0),this[l]=c>>>8,this[l+1]=c&255,l+2},u.prototype.writeUInt32LE=function(c,l,I){return c=+c,l=l>>>0,I||Rt(this,c,l,4,4294967295,0),this[l+3]=c>>>24,this[l+2]=c>>>16,this[l+1]=c>>>8,this[l]=c&255,l+4},u.prototype.writeUInt32BE=function(c,l,I){return c=+c,l=l>>>0,I||Rt(this,c,l,4,4294967295,0),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4},u.prototype.writeIntLE=function(c,l,I,B){if(c=+c,l=l>>>0,!B){var X=Math.pow(2,8*I-1);Rt(this,c,l,I,X-1,-X)}var Q=0,bt=1,Dt=0;for(this[l]=c&255;++Q<I&&(bt*=256);)c<0&&Dt===0&&this[l+Q-1]!==0&&(Dt=1),this[l+Q]=(c/bt>>0)-Dt&255;return l+I},u.prototype.writeIntBE=function(c,l,I,B){if(c=+c,l=l>>>0,!B){var X=Math.pow(2,8*I-1);Rt(this,c,l,I,X-1,-X)}var Q=I-1,bt=1,Dt=0;for(this[l+Q]=c&255;--Q>=0&&(bt*=256);)c<0&&Dt===0&&this[l+Q+1]!==0&&(Dt=1),this[l+Q]=(c/bt>>0)-Dt&255;return l+I},u.prototype.writeInt8=function(c,l,I){return c=+c,l=l>>>0,I||Rt(this,c,l,1,127,-128),c<0&&(c=255+c+1),this[l]=c&255,l+1},u.prototype.writeInt16LE=function(c,l,I){return c=+c,l=l>>>0,I||Rt(this,c,l,2,32767,-32768),this[l]=c&255,this[l+1]=c>>>8,l+2},u.prototype.writeInt16BE=function(c,l,I){return c=+c,l=l>>>0,I||Rt(this,c,l,2,32767,-32768),this[l]=c>>>8,this[l+1]=c&255,l+2},u.prototype.writeInt32LE=function(c,l,I){return c=+c,l=l>>>0,I||Rt(this,c,l,4,2147483647,-2147483648),this[l]=c&255,this[l+1]=c>>>8,this[l+2]=c>>>16,this[l+3]=c>>>24,l+4},u.prototype.writeInt32BE=function(c,l,I){return c=+c,l=l>>>0,I||Rt(this,c,l,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4};function Wt(F,c,l,I,B,X){if(l+I>F.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Mt(F,c,l,I,B){return c=+c,l=l>>>0,B||Wt(F,c,l,4),E.write(F,c,l,I,23,4),l+4}u.prototype.writeFloatLE=function(c,l,I){return Mt(this,c,l,!0,I)},u.prototype.writeFloatBE=function(c,l,I){return Mt(this,c,l,!1,I)};function x(F,c,l,I,B){return c=+c,l=l>>>0,B||Wt(F,c,l,8),E.write(F,c,l,I,52,8),l+8}u.prototype.writeDoubleLE=function(c,l,I){return x(this,c,l,!0,I)},u.prototype.writeDoubleBE=function(c,l,I){return x(this,c,l,!1,I)},u.prototype.copy=function(c,l,I,B){if(I||(I=0),!B&&B!==0&&(B=this.length),l>=c.length&&(l=c.length),l||(l=0),B>0&&B<I&&(B=I),B===I||c.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("sourceStart out of bounds");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),c.length-l<B-I&&(B=c.length-l+I);var X=B-I,Q;if(this===c&&I<l&&l<B)for(Q=X-1;Q>=0;--Q)c[Q+l]=this[Q+I];else if(X<1e3)for(Q=0;Q<X;++Q)c[Q+l]=this[Q+I];else Uint8Array.prototype.set.call(c,this.subarray(I,I+X),l);return X},u.prototype.fill=function(c,l,I,B){if(typeof c=="string"){if(typeof l=="string"?(B=l,l=0,I=this.length):typeof I=="string"&&(B=I,I=this.length),c.length===1){var X=c.charCodeAt(0);X<256&&(c=X)}if(B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!u.isEncoding(B))throw new TypeError("Unknown encoding: "+B)}else typeof c=="number"&&(c=c&255);if(l<0||this.length<l||this.length<I)throw new RangeError("Out of range index");if(I<=l)return this;l=l>>>0,I=I===void 0?this.length:I>>>0,c||(c=0);var Q;if(typeof c=="number")for(Q=l;Q<I;++Q)this[Q]=c;else{var bt=u.isBuffer(c)?c:new u(c,B),Dt=bt.length;for(Q=0;Q<I-l;++Q)this[Q+l]=bt[Q%Dt]}return this};var k=/[^+/0-9A-Za-z-_]/g;function K(F){if(F=F.trim().replace(k,""),F.length<2)return"";for(;F.length%4!==0;)F=F+"=";return F}function it(F){return F<16?"0"+F.toString(16):F.toString(16)}function vt(F,c){c=c||1/0;for(var l,I=F.length,B=null,X=[],Q=0;Q<I;++Q){if(l=F.charCodeAt(Q),l>55295&&l<57344){if(!B){if(l>56319){(c-=3)>-1&&X.push(239,191,189);continue}else if(Q+1===I){(c-=3)>-1&&X.push(239,191,189);continue}B=l;continue}if(l<56320){(c-=3)>-1&&X.push(239,191,189),B=l;continue}l=(B-55296<<10|l-56320)+65536}else B&&(c-=3)>-1&&X.push(239,191,189);if(B=null,l<128){if((c-=1)<0)break;X.push(l)}else if(l<2048){if((c-=2)<0)break;X.push(l>>6|192,l&63|128)}else if(l<65536){if((c-=3)<0)break;X.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((c-=4)<0)break;X.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return X}function It(F){for(var c=[],l=0;l<F.length;++l)c.push(F.charCodeAt(l)&255);return c}function tt(F,c){for(var l,I,B,X=[],Q=0;Q<F.length&&!((c-=2)<0);++Q)l=F.charCodeAt(Q),I=l>>8,B=l%256,X.push(B),X.push(I);return X}function ne(F){return N.toByteArray(K(F))}function mt(F,c,l,I){for(var B=0;B<I&&!(B+l>=c.length||B>=F.length);++B)c[B+l]=F[B];return B}function se(F){return F instanceof ArrayBuffer||F!=null&&F.constructor!=null&&F.constructor.name==="ArrayBuffer"&&typeof F.byteLength=="number"}function le(F){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(F)}function xe(F){return F!==F}}).call(S,d(1))},function(O,S){S.byteLength=u,S.toByteArray=v,S.fromByteArray=b;for(var d=[],w=[],N=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=0,m=E.length;R<m;++R)d[R]=E[R],w[E.charCodeAt(R)]=R;w["-".charCodeAt(0)]=62,w["_".charCodeAt(0)]=63;function p(L){var M=L.length;if(M%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return L[M-2]==="="?2:L[M-1]==="="?1:0}function u(L){return L.length*3/4-p(L)}function v(L){var M,C,J,U,j,yt,G=L.length;j=p(L),yt=new N(G*3/4-j),J=j>0?G-4:G;var dt=0;for(M=0,C=0;M<J;M+=4,C+=3)U=w[L.charCodeAt(M)]<<18|w[L.charCodeAt(M+1)]<<12|w[L.charCodeAt(M+2)]<<6|w[L.charCodeAt(M+3)],yt[dt++]=U>>16&255,yt[dt++]=U>>8&255,yt[dt++]=U&255;return j===2?(U=w[L.charCodeAt(M)]<<2|w[L.charCodeAt(M+1)]>>4,yt[dt++]=U&255):j===1&&(U=w[L.charCodeAt(M)]<<10|w[L.charCodeAt(M+1)]<<4|w[L.charCodeAt(M+2)]>>2,yt[dt++]=U>>8&255,yt[dt++]=U&255),yt}function f(L){return d[L>>18&63]+d[L>>12&63]+d[L>>6&63]+d[L&63]}function D(L,M,C){for(var J,U=[],j=M;j<C;j+=3)J=(L[j]<<16)+(L[j+1]<<8)+L[j+2],U.push(f(J));return U.join("")}function b(L){for(var M,C=L.length,J=C%3,U="",j=[],yt=16383,G=0,dt=C-J;G<dt;G+=yt)j.push(D(L,G,G+yt>dt?dt:G+yt));return J===1?(M=L[C-1],U+=d[M>>2],U+=d[M<<4&63],U+="=="):J===2&&(M=(L[C-2]<<8)+L[C-1],U+=d[M>>10],U+=d[M>>4&63],U+=d[M<<2&63],U+="="),j.push(U),j.join("")}},function(O,S){S.read=function(d,w,N,E,R){var m,p,u=R*8-E-1,v=(1<<u)-1,f=v>>1,D=-7,b=N?R-1:0,L=N?-1:1,M=d[w+b];for(b+=L,m=M&(1<<-D)-1,M>>=-D,D+=u;D>0;m=m*256+d[w+b],b+=L,D-=8);for(p=m&(1<<-D)-1,m>>=-D,D+=E;D>0;p=p*256+d[w+b],b+=L,D-=8);if(m===0)m=1-f;else{if(m===v)return p?NaN:(M?-1:1)*(1/0);p=p+Math.pow(2,E),m=m-f}return(M?-1:1)*p*Math.pow(2,m-E)},S.write=function(d,w,N,E,R,m){var p,u,v,f=m*8-R-1,D=(1<<f)-1,b=D>>1,L=R===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=E?0:m-1,C=E?1:-1,J=w<0||w===0&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(u=isNaN(w)?1:0,p=D):(p=Math.floor(Math.log(w)/Math.LN2),w*(v=Math.pow(2,-p))<1&&(p--,v*=2),p+b>=1?w+=L/v:w+=L*Math.pow(2,1-b),w*v>=2&&(p++,v/=2),p+b>=D?(u=0,p=D):p+b>=1?(u=(w*v-1)*Math.pow(2,R),p=p+b):(u=w*Math.pow(2,b-1)*Math.pow(2,R),p=0));R>=8;d[N+M]=u&255,M+=C,u/=256,R-=8);for(p=p<<R|u,f+=R;f>0;d[N+M]=p&255,M+=C,p/=256,f-=8);d[N+M-C]|=J*128}},function(O,S){O.exports=function(d){return d.webpackPolyfill||(d.deprecate=function(){},d.paths=[],d.children=[],d.webpackPolyfill=1),d}},function(O,S,d){var w=d(7),N=new w,E={};function R(p){E[p]||(typeof N[p]=="function"?E[p]=function(){return N[p].apply(N,arguments)}:E[p]=N[p])}for(var m in N)R(m);E.initializeTTYs=function(){N.stdin===null&&(N.initializeTTYs(),E.stdin=N.stdin,E.stdout=N.stdout,E.stderr=N.stderr)},N.nextTick(function(){E.initializeTTYs()}),O.exports=E},function(O,S,d){(function(w){var N=this&&this.__extends||function(v,f){for(var D in f)f.hasOwnProperty(D)&&(v[D]=f[D]);function b(){this.constructor=v}v.prototype=f===null?Object.create(f):(b.prototype=f.prototype,new b)},E=d(8),R=null,m=function(){function v(f,D){this.fun=f,this.array=D}return v.prototype.run=function(){this.fun.apply(null,this.array)},v}(),p=function(){function v(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return v.prototype.push=function(f){var D=this;this._queue.push(f)===1&&!this._draining&&setTimeout(function(){return D._drainQueue()},0)},v.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},v.prototype._drainQueue=function(){var f=this;if(!this._draining){var D=setTimeout(function(){return f._cleanUpNextTick()});this._draining=!0;for(var b=this._queue.length;b;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<b;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,b=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(D)}},v}(),u=function(v){N(f,v);function f(){v.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new p,this.execPath=w,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=Math.random()*1e3|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return f.prototype.chdir=function(D){R===null&&(R=d(9)),this._cwd=R.resolve(D)},f.prototype.cwd=function(){return this._cwd},f.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},f.prototype.nextTick=function(D){for(var b=[],L=1;L<arguments.length;L++)b[L-1]=arguments[L];this._queue.push(new m(D,b))},f.prototype.abort=function(){this.emit("abort")},f.prototype.exit=function(D){this.exitCode=D,this.emit("exit",[D])},f.prototype.getgid=function(){return this._gid},f.prototype.setgid=function(D){typeof D=="number"?this._gid=D:this._gid=1},f.prototype.getuid=function(){return this._uid},f.prototype.setuid=function(D){typeof D=="number"?this._uid=D:this._uid=1},f.prototype.kill=function(D,b){this.emit("kill",[D,b])},f.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},f.prototype.umask=function(D){D===void 0&&(D=this._mask);var b=this._mask;return this._mask=D,this.emit("umask",[D]),b},f.prototype.hrtime=function(){var D;typeof performance<"u"?D=performance.now():Date.now?D=Date.now():D=new Date().getTime();var b=D/1e3|0;return D-=b*1e3,D=D*1e6|0,[b,D]},f.prototype.initializeTTYs=function(){if(this.stdout===null){var D=d(10);this.stdout=new D,this.stderr=new D,this.stdin=new D}},f.prototype.disconnect=function(){},f}(E.EventEmitter);O.exports=u}).call(S,"/")},function(O,S){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}O.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(m){if(!N(m)||m<0||isNaN(m))throw TypeError("n must be a positive number");return this._maxListeners=m,this},d.prototype.emit=function(m){var p,u,v,f,D,b;if(this._events||(this._events={}),m==="error"&&(!this._events.error||E(this._events.error)&&!this._events.error.length)){if(p=arguments[1],p instanceof Error)throw p;var L=new Error('Uncaught, unspecified "error" event. ('+p+")");throw L.context=p,L}if(u=this._events[m],R(u))return!1;if(w(u))switch(arguments.length){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),u.apply(this,f)}else if(E(u))for(f=Array.prototype.slice.call(arguments,1),b=u.slice(),v=b.length,D=0;D<v;D++)b[D].apply(this,f);return!0},d.prototype.addListener=function(m,p){var u;if(!w(p))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",m,w(p.listener)?p.listener:p),this._events[m]?E(this._events[m])?this._events[m].push(p):this._events[m]=[this._events[m],p]:this._events[m]=p,E(this._events[m])&&!this._events[m].warned&&(R(this._maxListeners)?u=d.defaultMaxListeners:u=this._maxListeners,u&&u>0&&this._events[m].length>u&&(this._events[m].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[m].length),typeof console.trace=="function"&&console.trace())),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(m,p){if(!w(p))throw TypeError("listener must be a function");var u=!1;function v(){this.removeListener(m,v),u||(u=!0,p.apply(this,arguments))}return v.listener=p,this.on(m,v),this},d.prototype.removeListener=function(m,p){var u,v,f,D;if(!w(p))throw TypeError("listener must be a function");if(!this._events||!this._events[m])return this;if(u=this._events[m],f=u.length,v=-1,u===p||w(u.listener)&&u.listener===p)delete this._events[m],this._events.removeListener&&this.emit("removeListener",m,p);else if(E(u)){for(D=f;D-- >0;)if(u[D]===p||u[D].listener&&u[D].listener===p){v=D;break}if(v<0)return this;u.length===1?(u.length=0,delete this._events[m]):u.splice(v,1),this._events.removeListener&&this.emit("removeListener",m,p)}return this},d.prototype.removeAllListeners=function(m){var p,u;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[m]&&delete this._events[m],this;if(arguments.length===0){for(p in this._events)p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events={},this}if(u=this._events[m],w(u))this.removeListener(m,u);else if(u)for(;u.length;)this.removeListener(m,u[u.length-1]);return delete this._events[m],this},d.prototype.listeners=function(m){var p;return!this._events||!this._events[m]?p=[]:w(this._events[m])?p=[this._events[m]]:p=this._events[m].slice(),p},d.prototype.listenerCount=function(m){if(this._events){var p=this._events[m];if(w(p))return 1;if(p)return p.length}return 0},d.listenerCount=function(m,p){return m.listenerCount(p)};function w(m){return typeof m=="function"}function N(m){return typeof m=="number"}function E(m){return typeof m=="object"&&m!==null}function R(m){return m===void 0}},function(O,S,d){(function(w){var N=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function E(m){var p=N.exec(m);return p.shift(),p}var R=function(){function m(){}return m.normalize=function(p){p===""&&(p=".");var u=p.charAt(0)===m.sep;p=m._removeDuplicateSeps(p);for(var v=p.split(m.sep),f=[],D=0;D<v.length;D++){var b=v[D];b!=="."&&(b===".."&&(u||!u&&f.length>0&&f[0]!=="..")?f.pop():f.push(b))}if(!u&&f.length<2)switch(f.length){case 1:f[0]===""&&f.unshift(".");break;default:f.push(".")}return p=f.join(m.sep),u&&p.charAt(0)!==m.sep&&(p=m.sep+p),p},m.join=function(){for(var p=[],u=0;u<arguments.length;u++)p[u-0]=arguments[u];for(var v=[],f=0;f<p.length;f++){var D=p[f];if(typeof D!="string")throw new TypeError("Invalid argument type to path.join: "+typeof D);D!==""&&v.push(D)}return m.normalize(v.join(m.sep))},m.resolve=function(){for(var p=[],u=0;u<arguments.length;u++)p[u-0]=arguments[u];for(var v=[],f=0;f<p.length;f++){var D=p[f];if(typeof D!="string")throw new TypeError("Invalid argument type to path.join: "+typeof D);D!==""&&(D.charAt(0)===m.sep&&(v=[]),v.push(D))}var b=m.normalize(v.join(m.sep));if(b.length>1&&b.charAt(b.length-1)===m.sep)return b.substr(0,b.length-1);if(b.charAt(0)!==m.sep){b.charAt(0)==="."&&(b.length===1||b.charAt(1)===m.sep)&&(b=b.length===1?"":b.substr(2));var L=w.cwd();b!==""?b=this.normalize(L+(L!=="/"?m.sep:"")+b):b=L}return b},m.relative=function(p,u){var v;p=m.resolve(p),u=m.resolve(u);var f=p.split(m.sep),D=u.split(m.sep);D.shift(),f.shift();var b=0,L=[];for(v=0;v<f.length;v++){var M=f[v];if(M!==D[v]){b=f.length-v;break}}L=D.slice(v),f.length===1&&f[0]===""&&(b=0),b>f.length&&(b=f.length);var C="";for(v=0;v<b;v++)C+="../";return C+=L.join(m.sep),C.length>1&&C.charAt(C.length-1)===m.sep&&(C=C.substr(0,C.length-1)),C},m.dirname=function(p){p=m._removeDuplicateSeps(p);var u=p.charAt(0)===m.sep,v=p.split(m.sep);return v.pop()===""&&v.length>0&&v.pop(),v.length>1||v.length===1&&!u?v.join(m.sep):u?m.sep:"."},m.basename=function(p,u){if(u===void 0&&(u=""),p==="")return p;p=m.normalize(p);var v=p.split(m.sep),f=v[v.length-1];if(f===""&&v.length>1)return v[v.length-2];if(u.length>0){var D=f.substr(f.length-u.length);if(D===u)return f.substr(0,f.length-u.length)}return f},m.extname=function(p){p=m.normalize(p);var u=p.split(m.sep);if(p=u.pop(),p===""&&u.length>0&&(p=u.pop()),p==="..")return"";var v=p.lastIndexOf(".");return v===-1||v===0?"":p.substr(v)},m.isAbsolute=function(p){return p.length>0&&p.charAt(0)===m.sep},m._makeLong=function(p){return p},m.parse=function(p){var u=E(p);return{root:u[0],dir:u[0]+u[1].slice(0,-1),base:u[2],ext:u[3],name:u[2].slice(0,u[2].length-u[3].length)}},m.format=function(p){if(p===null||typeof p!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof p);var u=p.root||"";if(typeof u!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof p.root);var v=p.dir?p.dir+m.sep:"",f=p.base||"";return v+f},m._removeDuplicateSeps=function(p){return p=p.replace(this._replaceRegex,this.sep),p},m.sep="/",m._replaceRegex=new RegExp("//+","g"),m.delimiter=":",m.posix=m,m.win32=m,m}();O.exports=R}).call(S,d(6))},function(O,S,d){(function(w){var N=this&&this.__extends||function(m,p){for(var u in p)p.hasOwnProperty(u)&&(m[u]=p[u]);function v(){this.constructor=m}m.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)},E=d(11),R=function(m){N(p,m);function p(){m.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return p.prototype.setRawMode=function(u){this.isRaw!==u&&(this.isRaw=u,this.emit("modeChange"))},p.prototype.changeColumns=function(u){u!==this.columns&&(this.columns=u,this.emit("resize"))},p.prototype.changeRows=function(u){u!==this.rows&&(this.rows=u,this.emit("resize"))},p.isatty=function(u){return u&&u instanceof p},p.prototype._write=function(u,v,f){var D;try{var b;typeof u=="string"?b=new w(u,v):b=u,this._bufferedWrites.push(b),this._waitingForWrites&&this._read(1024)}catch(L){D=L}finally{f(D)}},p.prototype._read=function(u){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),!!this._waitingForWrites););},p}(E.Duplex);O.exports=R}).call(S,d(1))},function(O,S,d){O.exports=E;var w=d(8).EventEmitter,N=d(12);N(E,w),E.Readable=d(13),E.Writable=d(27),E.Duplex=d(28),E.Transform=d(29),E.PassThrough=d(30),E.Stream=E;function E(){w.call(this)}E.prototype.pipe=function(R,m){var p=this;function u(C){R.writable&&R.write(C)===!1&&p.pause&&p.pause()}p.on("data",u);function v(){p.readable&&p.resume&&p.resume()}R.on("drain",v),!R._isStdio&&(!m||m.end!==!1)&&(p.on("end",D),p.on("close",b));var f=!1;function D(){f||(f=!0,R.end())}function b(){f||(f=!0,typeof R.destroy=="function"&&R.destroy())}function L(C){if(M(),w.listenerCount(this,"error")===0)throw C}p.on("error",L),R.on("error",L);function M(){p.removeListener("data",u),R.removeListener("drain",v),p.removeListener("end",D),p.removeListener("close",b),p.removeListener("error",L),R.removeListener("error",L),p.removeListener("end",M),p.removeListener("close",M),R.removeListener("close",M)}return p.on("end",M),p.on("close",M),R.on("close",M),R.emit("pipe",p),R}},function(O,S){typeof Object.create=="function"?O.exports=function(w,N){w.super_=N,w.prototype=Object.create(N.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}})}:O.exports=function(w,N){w.super_=N;var E=function(){};E.prototype=N.prototype,w.prototype=new E,w.prototype.constructor=w}},function(O,S,d){(function(w){var N=function(){try{return d(11)}catch{}}();S=O.exports=d(14),S.Stream=N||S,S.Readable=S,S.Writable=d(22),S.Duplex=d(21),S.Transform=d(25),S.PassThrough=d(26),!w.browser&&w.env.READABLE_STREAM==="disable"&&N&&(O.exports=N)}).call(S,d(6))},function(O,S,d){(function(w){O.exports=U;var N=d(15),E=d(16),R;U.ReadableState=J,d(8).EventEmitter;var m=function(x,k){return x.listeners(k).length},p;(function(){try{p=d(11)}catch{}finally{p||(p=d(8).EventEmitter)}})();var u=d(2).Buffer,v=d(17),f=d(18);f.inherits=d(12);var D=d(19),b=void 0;D&&D.debuglog?b=D.debuglog("stream"):b=function(){};var L=d(20),M;f.inherits(U,p);function C(x,k,K){if(typeof x.prependListener=="function")return x.prependListener(k,K);!x._events||!x._events[k]?x.on(k,K):E(x._events[k])?x._events[k].unshift(K):x._events[k]=[K,x._events[k]]}function J(x,k){R=R||d(21),x=x||{},this.objectMode=!!x.objectMode,k instanceof R&&(this.objectMode=this.objectMode||!!x.readableObjectMode);var K=x.highWaterMark,it=this.objectMode?16:16*1024;this.highWaterMark=K||K===0?K:it,this.highWaterMark=~~this.highWaterMark,this.buffer=new L,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=x.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,x.encoding&&(M||(M=d(24).StringDecoder),this.decoder=new M(x.encoding),this.encoding=x.encoding)}function U(x){if(R=R||d(21),!(this instanceof U))return new U(x);this._readableState=new J(x,this),this.readable=!0,x&&typeof x.read=="function"&&(this._read=x.read),p.call(this)}U.prototype.push=function(x,k){var K=this._readableState;return!K.objectMode&&typeof x=="string"&&(k=k||K.defaultEncoding,k!==K.encoding&&(x=v.from(x,k),k="")),j(this,K,x,k,!1)},U.prototype.unshift=function(x){var k=this._readableState;return j(this,k,x,"",!0)},U.prototype.isPaused=function(){return this._readableState.flowing===!1};function j(x,k,K,it,vt){var It=z(k,K);if(It)x.emit("error",It);else if(K===null)k.reading=!1,rt(x,k);else if(k.objectMode||K&&K.length>0)if(k.ended&&!vt){var tt=new Error("stream.push() after EOF");x.emit("error",tt)}else if(k.endEmitted&&vt){var ne=new Error("stream.unshift() after end event");x.emit("error",ne)}else{var mt;k.decoder&&!vt&&!it&&(K=k.decoder.write(K),mt=!k.objectMode&&K.length===0),vt||(k.reading=!1),mt||(k.flowing&&k.length===0&&!k.sync?(x.emit("data",K),x.read(0)):(k.length+=k.objectMode?1:K.length,vt?k.buffer.unshift(K):k.buffer.push(K),k.needReadable&&ft(x))),wt(x,k)}else vt||(k.reading=!1);return yt(k)}function yt(x){return!x.ended&&(x.needReadable||x.length<x.highWaterMark||x.length===0)}U.prototype.setEncoding=function(x){return M||(M=d(24).StringDecoder),this._readableState.decoder=new M(x),this._readableState.encoding=x,this};var G=8388608;function dt(x){return x>=G?x=G:(x--,x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x++),x}function ct(x,k){return x<=0||k.length===0&&k.ended?0:k.objectMode?1:x!==x?k.flowing&&k.length?k.buffer.head.data.length:k.length:(x>k.highWaterMark&&(k.highWaterMark=dt(x)),x<=k.length?x:k.ended?k.length:(k.needReadable=!0,0))}U.prototype.read=function(x){b("read",x),x=parseInt(x,10);var k=this._readableState,K=x;if(x!==0&&(k.emittedReadable=!1),x===0&&k.needReadable&&(k.length>=k.highWaterMark||k.ended))return b("read: emitReadable",k.length,k.ended),k.length===0&&k.ended?Ft(this):ft(this),null;if(x=ct(x,k),x===0&&k.ended)return k.length===0&&Ft(this),null;var it=k.needReadable;b("need readable",it),(k.length===0||k.length-x<k.highWaterMark)&&(it=!0,b("length less than watermark",it)),k.ended||k.reading?(it=!1,b("reading or ended",it)):it&&(b("do read"),k.reading=!0,k.sync=!0,k.length===0&&(k.needReadable=!0),this._read(k.highWaterMark),k.sync=!1,k.reading||(x=ct(K,k)));var vt;return x>0?vt=$(x,k):vt=null,vt===null?(k.needReadable=!0,x=0):k.length-=x,k.length===0&&(k.ended||(k.needReadable=!0),K!==x&&k.ended&&Ft(this)),vt!==null&&this.emit("data",vt),vt};function z(x,k){var K=null;return!u.isBuffer(k)&&typeof k!="string"&&k!==null&&k!==void 0&&!x.objectMode&&(K=new TypeError("Invalid non-string/buffer chunk")),K}function rt(x,k){if(!k.ended){if(k.decoder){var K=k.decoder.end();K&&K.length&&(k.buffer.push(K),k.length+=k.objectMode?1:K.length)}k.ended=!0,ft(x)}}function ft(x){var k=x._readableState;k.needReadable=!1,k.emittedReadable||(b("emitReadable",k.flowing),k.emittedReadable=!0,k.sync?N(Nt,x):Nt(x))}function Nt(x){b("emit readable"),x.emit("readable"),W(x)}function wt(x,k){k.readingMore||(k.readingMore=!0,N(At,x,k))}function At(x,k){for(var K=k.length;!k.reading&&!k.flowing&&!k.ended&&k.length<k.highWaterMark&&(b("maybeReadMore read 0"),x.read(0),K!==k.length);)K=k.length;k.readingMore=!1}U.prototype._read=function(x){this.emit("error",new Error("_read() is not implemented"))},U.prototype.pipe=function(x,k){var K=this,it=this._readableState;switch(it.pipesCount){case 0:it.pipes=x;break;case 1:it.pipes=[it.pipes,x];break;default:it.pipes.push(x);break}it.pipesCount+=1,b("pipe count=%d opts=%j",it.pipesCount,k);var vt=(!k||k.end!==!1)&&x!==w.stdout&&x!==w.stderr,It=vt?ne:le;it.endEmitted?N(It):K.once("end",It),x.on("unpipe",tt);function tt(X){b("onunpipe"),X===K&&le()}function ne(){b("onend"),x.end()}var mt=kt(K);x.on("drain",mt);var se=!1;function le(){b("cleanup"),x.removeListener("close",l),x.removeListener("finish",I),x.removeListener("drain",mt),x.removeListener("error",c),x.removeListener("unpipe",tt),K.removeListener("end",ne),K.removeListener("end",le),K.removeListener("data",F),se=!0,it.awaitDrain&&(!x._writableState||x._writableState.needDrain)&&mt()}var xe=!1;K.on("data",F);function F(X){b("ondata"),xe=!1;var Q=x.write(X);Q===!1&&!xe&&((it.pipesCount===1&&it.pipes===x||it.pipesCount>1&&Mt(it.pipes,x)!==-1)&&!se&&(b("false write response, pause",K._readableState.awaitDrain),K._readableState.awaitDrain++,xe=!0),K.pause())}function c(X){b("onerror",X),B(),x.removeListener("error",c),m(x,"error")===0&&x.emit("error",X)}C(x,"error",c);function l(){x.removeListener("finish",I),B()}x.once("close",l);function I(){b("onfinish"),x.removeListener("close",l),B()}x.once("finish",I);function B(){b("unpipe"),K.unpipe(x)}return x.emit("pipe",K),it.flowing||(b("pipe resume"),K.resume()),x};function kt(x){return function(){var k=x._readableState;b("pipeOnDrain",k.awaitDrain),k.awaitDrain&&k.awaitDrain--,k.awaitDrain===0&&m(x,"data")&&(k.flowing=!0,W(x))}}U.prototype.unpipe=function(x){var k=this._readableState;if(k.pipesCount===0)return this;if(k.pipesCount===1)return x&&x!==k.pipes?this:(x||(x=k.pipes),k.pipes=null,k.pipesCount=0,k.flowing=!1,x&&x.emit("unpipe",this),this);if(!x){var K=k.pipes,it=k.pipesCount;k.pipes=null,k.pipesCount=0,k.flowing=!1;for(var vt=0;vt<it;vt++)K[vt].emit("unpipe",this);return this}var It=Mt(k.pipes,x);return It===-1?this:(k.pipes.splice(It,1),k.pipesCount-=1,k.pipesCount===1&&(k.pipes=k.pipes[0]),x.emit("unpipe",this),this)},U.prototype.on=function(x,k){var K=p.prototype.on.call(this,x,k);if(x==="data")this._readableState.flowing!==!1&&this.resume();else if(x==="readable"){var it=this._readableState;!it.endEmitted&&!it.readableListening&&(it.readableListening=it.needReadable=!0,it.emittedReadable=!1,it.reading?it.length&&ft(this):N(_t,this))}return K},U.prototype.addListener=U.prototype.on;function _t(x){b("readable nexttick read 0"),x.read(0)}U.prototype.resume=function(){var x=this._readableState;return x.flowing||(b("resume"),x.flowing=!0,qt(this,x)),this};function qt(x,k){k.resumeScheduled||(k.resumeScheduled=!0,N(H,x,k))}function H(x,k){k.reading||(b("resume read 0"),x.read(0)),k.resumeScheduled=!1,k.awaitDrain=0,x.emit("resume"),W(x),k.flowing&&!k.reading&&x.read(0)}U.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function W(x){var k=x._readableState;for(b("flow",k.flowing);k.flowing&&x.read()!==null;);}U.prototype.wrap=function(x){var k=this._readableState,K=!1,it=this;x.on("end",function(){if(b("wrapped end"),k.decoder&&!k.ended){var tt=k.decoder.end();tt&&tt.length&&it.push(tt)}it.push(null)}),x.on("data",function(tt){if(b("wrapped data"),k.decoder&&(tt=k.decoder.write(tt)),!(k.objectMode&&tt==null)&&!(!k.objectMode&&(!tt||!tt.length))){var ne=it.push(tt);ne||(K=!0,x.pause())}});for(var vt in x)this[vt]===void 0&&typeof x[vt]=="function"&&(this[vt]=function(tt){return function(){return x[tt].apply(x,arguments)}}(vt));var It=["error","close","destroy","pause","resume"];return Wt(It,function(tt){x.on(tt,it.emit.bind(it,tt))}),it._read=function(tt){b("wrapped _read",tt),K&&(K=!1,x.resume())},it},U._fromList=$;function $(x,k){if(k.length===0)return null;var K;return k.objectMode?K=k.buffer.shift():!x||x>=k.length?(k.decoder?K=k.buffer.join(""):k.buffer.length===1?K=k.buffer.head.data:K=k.buffer.concat(k.length),k.buffer.clear()):K=ht(x,k.buffer,k.decoder),K}function ht(x,k,K){var it;return x<k.head.data.length?(it=k.head.data.slice(0,x),k.head.data=k.head.data.slice(x)):x===k.head.data.length?it=k.shift():it=K?Ot(x,k):St(x,k),it}function Ot(x,k){var K=k.head,it=1,vt=K.data;for(x-=vt.length;K=K.next;){var It=K.data,tt=x>It.length?It.length:x;if(tt===It.length?vt+=It:vt+=It.slice(0,x),x-=tt,x===0){tt===It.length?(++it,K.next?k.head=K.next:k.head=k.tail=null):(k.head=K,K.data=It.slice(tt));break}++it}return k.length-=it,vt}function St(x,k){var K=v.allocUnsafe(x),it=k.head,vt=1;for(it.data.copy(K),x-=it.data.length;it=it.next;){var It=it.data,tt=x>It.length?It.length:x;if(It.copy(K,K.length-x,0,tt),x-=tt,x===0){tt===It.length?(++vt,it.next?k.head=it.next:k.head=k.tail=null):(k.head=it,it.data=It.slice(tt));break}++vt}return k.length-=vt,K}function Ft(x){var k=x._readableState;if(k.length>0)throw new Error('"endReadable()" called on non-empty stream');k.endEmitted||(k.ended=!0,N(Rt,k,x))}function Rt(x,k){!x.endEmitted&&x.length===0&&(x.endEmitted=!0,k.readable=!1,k.emit("end"))}function Wt(x,k){for(var K=0,it=x.length;K<it;K++)k(x[K],K)}function Mt(x,k){for(var K=0,it=x.length;K<it;K++)if(x[K]===k)return K;return-1}}).call(S,d(6))},function(O,S,d){(function(w){!w.version||w.version.indexOf("v0.")===0||w.version.indexOf("v1.")===0&&w.version.indexOf("v1.8.")!==0?O.exports=N:O.exports=w.nextTick;function N(E,R,m,p){if(typeof E!="function")throw new TypeError('"callback" argument must be a function');var u=arguments.length,v,f;switch(u){case 0:case 1:return w.nextTick(E);case 2:return w.nextTick(function(){E.call(null,R)});case 3:return w.nextTick(function(){E.call(null,R,m)});case 4:return w.nextTick(function(){E.call(null,R,m,p)});default:for(v=new Array(u-1),f=0;f<v.length;)v[f++]=arguments[f];return w.nextTick(function(){E.apply(null,v)})}}}).call(S,d(6))},function(O,S){var d={}.toString;O.exports=Array.isArray||function(w){return d.call(w)=="[object Array]"}},function(O,S,d){(function(w){var N=d(2),E=N.Buffer,R=N.SlowBuffer,m=N.kMaxLength||2147483647;S.alloc=function(u,v,f){if(typeof E.alloc=="function")return E.alloc(u,v,f);if(typeof f=="number")throw new TypeError("encoding must not be number");if(typeof u!="number")throw new TypeError("size must be a number");if(u>m)throw new RangeError("size is too large");var D=f,b=v;b===void 0&&(D=void 0,b=0);var L=new E(u);if(typeof b=="string")for(var M=new E(b,D),C=M.length,J=-1;++J<u;)L[J]=M[J%C];else L.fill(b);return L},S.allocUnsafe=function(u){if(typeof E.allocUnsafe=="function")return E.allocUnsafe(u);if(typeof u!="number")throw new TypeError("size must be a number");if(u>m)throw new RangeError("size is too large");return new E(u)},S.from=function(u,v,f){if(typeof E.from=="function"&&(!w.Uint8Array||Uint8Array.from!==E.from))return E.from(u,v,f);if(typeof u=="number")throw new TypeError('"value" argument must not be a number');if(typeof u=="string")return new E(u,v);if(typeof ArrayBuffer<"u"&&u instanceof ArrayBuffer){var D=v;if(arguments.length===1)return new E(u);typeof D>"u"&&(D=0);var b=f;if(typeof b>"u"&&(b=u.byteLength-D),D>=u.byteLength)throw new RangeError("'offset' is out of bounds");if(b>u.byteLength-D)throw new RangeError("'length' is out of bounds");return new E(u.slice(D,D+b))}if(E.isBuffer(u)){var L=new E(u.length);return u.copy(L,0,0,u.length),L}if(u){if(Array.isArray(u)||typeof ArrayBuffer<"u"&&u.buffer instanceof ArrayBuffer||"length"in u)return new E(u);if(u.type==="Buffer"&&Array.isArray(u.data))return new E(u.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},S.allocUnsafeSlow=function(u){if(typeof E.allocUnsafeSlow=="function")return E.allocUnsafeSlow(u);if(typeof u!="number")throw new TypeError("size must be a number");if(u>=m)throw new RangeError("size is too large");return new R(u)}}).call(S,function(){return this}())},function(O,S,d){(function(w){function N(j){return Array.isArray?Array.isArray(j):U(j)==="[object Array]"}S.isArray=N;function E(j){return typeof j=="boolean"}S.isBoolean=E;function R(j){return j===null}S.isNull=R;function m(j){return j==null}S.isNullOrUndefined=m;function p(j){return typeof j=="number"}S.isNumber=p;function u(j){return typeof j=="string"}S.isString=u;function v(j){return typeof j=="symbol"}S.isSymbol=v;function f(j){return j===void 0}S.isUndefined=f;function D(j){return U(j)==="[object RegExp]"}S.isRegExp=D;function b(j){return typeof j=="object"&&j!==null}S.isObject=b;function L(j){return U(j)==="[object Date]"}S.isDate=L;function M(j){return U(j)==="[object Error]"||j instanceof Error}S.isError=M;function C(j){return typeof j=="function"}S.isFunction=C;function J(j){return j===null||typeof j=="boolean"||typeof j=="number"||typeof j=="string"||typeof j=="symbol"||typeof j>"u"}S.isPrimitive=J,S.isBuffer=w.isBuffer;function U(j){return Object.prototype.toString.call(j)}}).call(S,d(1))},function(O,S){},function(O,S,d){d(2).Buffer;var w=d(17);O.exports=N;function N(){this.head=null,this.tail=null,this.length=0}N.prototype.push=function(E){var R={data:E,next:null};this.length>0?this.tail.next=R:this.head=R,this.tail=R,++this.length},N.prototype.unshift=function(E){var R={data:E,next:this.head};this.length===0&&(this.tail=R),this.head=R,++this.length},N.prototype.shift=function(){if(this.length!==0){var E=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,E}},N.prototype.clear=function(){this.head=this.tail=null,this.length=0},N.prototype.join=function(E){if(this.length===0)return"";for(var R=this.head,m=""+R.data;R=R.next;)m+=E+R.data;return m},N.prototype.concat=function(E){if(this.length===0)return w.alloc(0);if(this.length===1)return this.head.data;for(var R=w.allocUnsafe(E>>>0),m=this.head,p=0;m;)m.data.copy(R,p),p+=m.data.length,m=m.next;return R}},function(O,S,d){var w=Object.keys||function(L){var M=[];for(var C in L)M.push(C);return M};O.exports=f;var N=d(15),E=d(18);E.inherits=d(12);var R=d(14),m=d(22);E.inherits(f,R);for(var p=w(m.prototype),u=0;u<p.length;u++){var v=p[u];f.prototype[v]||(f.prototype[v]=m.prototype[v])}function f(L){if(!(this instanceof f))return new f(L);R.call(this,L),m.call(this,L),L&&L.readable===!1&&(this.readable=!1),L&&L.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,L&&L.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",D)}function D(){this.allowHalfOpen||this._writableState.ended||N(b,this)}function b(L){L.end()}},function(O,S,d){(function(w){O.exports=C;var N=d(15),E=!w.browser&&["v0.10","v0.9."].indexOf(w.version.slice(0,5))>-1?setImmediate:N,R;C.WritableState=L;var m=d(18);m.inherits=d(12);var p={deprecate:d(23)},u;(function(){try{u=d(11)}catch{}finally{u||(u=d(8).EventEmitter)}})();var v=d(2).Buffer,f=d(17);m.inherits(C,u);function D(){}function b(H,W,$){this.chunk=H,this.encoding=W,this.callback=$,this.next=null}function L(H,W){R=R||d(21),H=H||{},this.objectMode=!!H.objectMode,W instanceof R&&(this.objectMode=this.objectMode||!!H.writableObjectMode);var $=H.highWaterMark,ht=this.objectMode?16:16*1024;this.highWaterMark=$||$===0?$:ht,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var Ot=H.decodeStrings===!1;this.decodeStrings=!Ot,this.defaultEncoding=H.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(St){z(W,St)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new qt(this)}L.prototype.getBuffer=function(){for(var W=this.bufferedRequest,$=[];W;)$.push(W),W=W.next;return $},function(){try{Object.defineProperty(L.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}}();var M;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(M=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(H){return M.call(this,H)?!0:H&&H._writableState instanceof L}})):M=function(H){return H instanceof this};function C(H){if(R=R||d(21),!M.call(C,this)&&!(this instanceof R))return new C(H);this._writableState=new L(H,this),this.writable=!0,H&&(typeof H.write=="function"&&(this._write=H.write),typeof H.writev=="function"&&(this._writev=H.writev)),u.call(this)}C.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function J(H,W){var $=new Error("write after end");H.emit("error",$),N(W,$)}function U(H,W,$,ht){var Ot=!0,St=!1;return $===null?St=new TypeError("May not write null values to stream"):typeof $!="string"&&$!==void 0&&!W.objectMode&&(St=new TypeError("Invalid non-string/buffer chunk")),St&&(H.emit("error",St),N(ht,St),Ot=!1),Ot}C.prototype.write=function(H,W,$){var ht=this._writableState,Ot=!1,St=v.isBuffer(H);return typeof W=="function"&&($=W,W=null),St?W="buffer":W||(W=ht.defaultEncoding),typeof $!="function"&&($=D),ht.ended?J(this,$):(St||U(this,ht,H,$))&&(ht.pendingcb++,Ot=yt(this,ht,St,H,W,$)),Ot},C.prototype.cork=function(){var H=this._writableState;H.corked++},C.prototype.uncork=function(){var H=this._writableState;H.corked&&(H.corked--,!H.writing&&!H.corked&&!H.finished&&!H.bufferProcessing&&H.bufferedRequest&&Nt(this,H))},C.prototype.setDefaultEncoding=function(W){if(typeof W=="string"&&(W=W.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((W+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+W);return this._writableState.defaultEncoding=W,this};function j(H,W,$){return!H.objectMode&&H.decodeStrings!==!1&&typeof W=="string"&&(W=f.from(W,$)),W}function yt(H,W,$,ht,Ot,St){$||(ht=j(W,ht,Ot),v.isBuffer(ht)&&(Ot="buffer"));var Ft=W.objectMode?1:ht.length;W.length+=Ft;var Rt=W.length<W.highWaterMark;if(Rt||(W.needDrain=!0),W.writing||W.corked){var Wt=W.lastBufferedRequest;W.lastBufferedRequest=new b(ht,Ot,St),Wt?Wt.next=W.lastBufferedRequest:W.bufferedRequest=W.lastBufferedRequest,W.bufferedRequestCount+=1}else G(H,W,!1,Ft,ht,Ot,St);return Rt}function G(H,W,$,ht,Ot,St,Ft){W.writelen=ht,W.writecb=Ft,W.writing=!0,W.sync=!0,$?H._writev(Ot,W.onwrite):H._write(Ot,St,W.onwrite),W.sync=!1}function dt(H,W,$,ht,Ot){--W.pendingcb,$?N(Ot,ht):Ot(ht),H._writableState.errorEmitted=!0,H.emit("error",ht)}function ct(H){H.writing=!1,H.writecb=null,H.length-=H.writelen,H.writelen=0}function z(H,W){var $=H._writableState,ht=$.sync,Ot=$.writecb;if(ct($),W)dt(H,$,ht,W,Ot);else{var St=wt($);!St&&!$.corked&&!$.bufferProcessing&&$.bufferedRequest&&Nt(H,$),ht?E(rt,H,$,St,Ot):rt(H,$,St,Ot)}}function rt(H,W,$,ht){$||ft(H,W),W.pendingcb--,ht(),kt(H,W)}function ft(H,W){W.length===0&&W.needDrain&&(W.needDrain=!1,H.emit("drain"))}function Nt(H,W){W.bufferProcessing=!0;var $=W.bufferedRequest;if(H._writev&&$&&$.next){var ht=W.bufferedRequestCount,Ot=new Array(ht),St=W.corkedRequestsFree;St.entry=$;for(var Ft=0;$;)Ot[Ft]=$,$=$.next,Ft+=1;G(H,W,!0,W.length,Ot,"",St.finish),W.pendingcb++,W.lastBufferedRequest=null,St.next?(W.corkedRequestsFree=St.next,St.next=null):W.corkedRequestsFree=new qt(W)}else{for(;$;){var Rt=$.chunk,Wt=$.encoding,Mt=$.callback,x=W.objectMode?1:Rt.length;if(G(H,W,!1,x,Rt,Wt,Mt),$=$.next,W.writing)break}$===null&&(W.lastBufferedRequest=null)}W.bufferedRequestCount=0,W.bufferedRequest=$,W.bufferProcessing=!1}C.prototype._write=function(H,W,$){$(new Error("_write() is not implemented"))},C.prototype._writev=null,C.prototype.end=function(H,W,$){var ht=this._writableState;typeof H=="function"?($=H,H=null,W=null):typeof W=="function"&&($=W,W=null),H!=null&&this.write(H,W),ht.corked&&(ht.corked=1,this.uncork()),!ht.ending&&!ht.finished&&_t(this,ht,$)};function wt(H){return H.ending&&H.length===0&&H.bufferedRequest===null&&!H.finished&&!H.writing}function At(H,W){W.prefinished||(W.prefinished=!0,H.emit("prefinish"))}function kt(H,W){var $=wt(W);return $&&(W.pendingcb===0?(At(H,W),W.finished=!0,H.emit("finish")):At(H,W)),$}function _t(H,W,$){W.ending=!0,kt(H,W),$&&(W.finished?N($):H.once("finish",$)),W.ended=!0,H.writable=!1}function qt(H){var W=this;this.next=null,this.entry=null,this.finish=function($){var ht=W.entry;for(W.entry=null;ht;){var Ot=ht.callback;H.pendingcb--,Ot($),ht=ht.next}H.corkedRequestsFree?H.corkedRequestsFree.next=W:H.corkedRequestsFree=W}}}).call(S,d(6))},function(O,S){(function(d){O.exports=w;function w(E,R){if(N("noDeprecation"))return E;var m=!1;function p(){if(!m){if(N("throwDeprecation"))throw new Error(R);N("traceDeprecation")?console.trace(R):console.warn(R),m=!0}return E.apply(this,arguments)}return p}function N(E){try{if(!d.localStorage)return!1}catch{return!1}var R=d.localStorage[E];return R==null?!1:String(R).toLowerCase()==="true"}}).call(S,function(){return this}())},function(O,S,d){var w=d(2).Buffer,N=w.isEncoding||function(v){switch(v&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function E(v){if(v&&!N(v))throw new Error("Unknown encoding: "+v)}var R=S.StringDecoder=function(v){switch(this.encoding=(v||"utf8").toLowerCase().replace(/[-_]/,""),E(v),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=p;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:this.write=m;return}this.charBuffer=new w(6),this.charReceived=0,this.charLength=0};R.prototype.write=function(v){for(var f="";this.charLength;){var D=v.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:v.length;if(v.copy(this.charBuffer,this.charReceived,0,D),this.charReceived+=D,this.charReceived<this.charLength)return"";v=v.slice(D,v.length),f=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var L=f.charCodeAt(f.length-1);if(L>=55296&&L<=56319){this.charLength+=this.surrogateSize,f="";continue}if(this.charReceived=this.charLength=0,v.length===0)return f;break}this.detectIncompleteChar(v);var b=v.length;this.charLength&&(v.copy(this.charBuffer,0,v.length-this.charReceived,b),b-=this.charReceived),f+=v.toString(this.encoding,0,b);var b=f.length-1,L=f.charCodeAt(b);if(L>=55296&&L<=56319){var M=this.surrogateSize;return this.charLength+=M,this.charReceived+=M,this.charBuffer.copy(this.charBuffer,M,0,M),v.copy(this.charBuffer,0,0,M),f.substring(0,b)}return f},R.prototype.detectIncompleteChar=function(v){for(var f=v.length>=3?3:v.length;f>0;f--){var D=v[v.length-f];if(f==1&&D>>5==6){this.charLength=2;break}if(f<=2&&D>>4==14){this.charLength=3;break}if(f<=3&&D>>3==30){this.charLength=4;break}}this.charReceived=f},R.prototype.end=function(v){var f="";if(v&&v.length&&(f=this.write(v)),this.charReceived){var D=this.charReceived,b=this.charBuffer,L=this.encoding;f+=b.slice(0,D).toString(L)}return f};function m(v){return v.toString(this.encoding)}function p(v){this.charReceived=v.length%2,this.charLength=this.charReceived?2:0}function u(v){this.charReceived=v.length%3,this.charLength=this.charReceived?3:0}},function(O,S,d){O.exports=m;var w=d(21),N=d(18);N.inherits=d(12),N.inherits(m,w);function E(u){this.afterTransform=function(v,f){return R(u,v,f)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function R(u,v,f){var D=u._transformState;D.transforming=!1;var b=D.writecb;if(!b)return u.emit("error",new Error("no writecb in Transform class"));D.writechunk=null,D.writecb=null,f!=null&&u.push(f),b(v);var L=u._readableState;L.reading=!1,(L.needReadable||L.length<L.highWaterMark)&&u._read(L.highWaterMark)}function m(u){if(!(this instanceof m))return new m(u);w.call(this,u),this._transformState=new E(this);var v=this;this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(f,D){p(v,f,D)}):p(v)})}m.prototype.push=function(u,v){return this._transformState.needTransform=!1,w.prototype.push.call(this,u,v)},m.prototype._transform=function(u,v,f){throw new Error("_transform() is not implemented")},m.prototype._write=function(u,v,f){var D=this._transformState;if(D.writecb=f,D.writechunk=u,D.writeencoding=v,!D.transforming){var b=this._readableState;(D.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},m.prototype._read=function(u){var v=this._transformState;v.writechunk!==null&&v.writecb&&!v.transforming?(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform)):v.needTransform=!0};function p(u,v,f){if(v)return u.emit("error",v);f!=null&&u.push(f);var D=u._writableState,b=u._transformState;if(D.length)throw new Error("Calling transform done when ws.length != 0");if(b.transforming)throw new Error("Calling transform done when still transforming");return u.push(null)}},function(O,S,d){O.exports=E;var w=d(25),N=d(18);N.inherits=d(12),N.inherits(E,w);function E(R){if(!(this instanceof E))return new E(R);w.call(this,R)}E.prototype._transform=function(R,m,p){p(null,R)}},function(O,S,d){O.exports=d(22)},function(O,S,d){O.exports=d(21)},function(O,S,d){O.exports=d(25)},function(O,S,d){O.exports=d(26)},function(O,S,d){var w=d(32),N=d(33),E=d(38),R=d(39),m=d(40),p=d(41),u=d(42),v=Object.prototype.toString;function f(L){if(!(this instanceof f))return new f(L);this.options=N.assign({chunkSize:16384,windowBits:0,to:""},L||{});var M=this.options;M.raw&&M.windowBits>=0&&M.windowBits<16&&(M.windowBits=-M.windowBits,M.windowBits===0&&(M.windowBits=-15)),M.windowBits>=0&&M.windowBits<16&&!(L&&L.windowBits)&&(M.windowBits+=32),M.windowBits>15&&M.windowBits<48&&(M.windowBits&15)===0&&(M.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var C=w.inflateInit2(this.strm,M.windowBits);if(C!==R.Z_OK)throw new Error(m[C]);this.header=new u,w.inflateGetHeader(this.strm,this.header)}f.prototype.push=function(L,M){var C=this.strm,J=this.options.chunkSize,U=this.options.dictionary,j,yt,G,dt,ct,z,rt=!1;if(this.ended)return!1;yt=M===~~M?M:M===!0?R.Z_FINISH:R.Z_NO_FLUSH,typeof L=="string"?C.input=E.binstring2buf(L):v.call(L)==="[object ArrayBuffer]"?C.input=new Uint8Array(L):C.input=L,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new N.Buf8(J),C.next_out=0,C.avail_out=J),j=w.inflate(C,R.Z_NO_FLUSH),j===R.Z_NEED_DICT&&U&&(typeof U=="string"?z=E.string2buf(U):v.call(U)==="[object ArrayBuffer]"?z=new Uint8Array(U):z=U,j=w.inflateSetDictionary(this.strm,z)),j===R.Z_BUF_ERROR&&rt===!0&&(j=R.Z_OK,rt=!1),j!==R.Z_STREAM_END&&j!==R.Z_OK)return this.onEnd(j),this.ended=!0,!1;C.next_out&&(C.avail_out===0||j===R.Z_STREAM_END||C.avail_in===0&&(yt===R.Z_FINISH||yt===R.Z_SYNC_FLUSH))&&(this.options.to==="string"?(G=E.utf8border(C.output,C.next_out),dt=C.next_out-G,ct=E.buf2string(C.output,G),C.next_out=dt,C.avail_out=J-dt,dt&&N.arraySet(C.output,C.output,G,dt,0),this.onData(ct)):this.onData(N.shrinkBuf(C.output,C.next_out))),C.avail_in===0&&C.avail_out===0&&(rt=!0)}while((C.avail_in>0||C.avail_out===0)&&j!==R.Z_STREAM_END);return j===R.Z_STREAM_END&&(yt=R.Z_FINISH),yt===R.Z_FINISH?(j=w.inflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===R.Z_OK):(yt===R.Z_SYNC_FLUSH&&(this.onEnd(R.Z_OK),C.avail_out=0),!0)},f.prototype.onData=function(L){this.chunks.push(L)},f.prototype.onEnd=function(L){L===R.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=N.flattenChunks(this.chunks)),this.chunks=[],this.err=L,this.msg=this.strm.msg};function D(L,M){var C=new f(M);if(C.push(L,!0),C.err)throw C.msg||m[C.err];return C.result}function b(L,M){return M=M||{},M.raw=!0,D(L,M)}S.Inflate=f,S.inflate=D,S.inflateRaw=b,S.ungzip=D},function(O,S,d){var w=d(33),N=d(34),E=d(35),R=d(36),m=d(37),p=0,u=1,v=2,f=4,D=5,b=6,L=0,M=1,C=2,J=-2,U=-3,j=-4,yt=-5,G=8,dt=1,ct=2,z=3,rt=4,ft=5,Nt=6,wt=7,At=8,kt=9,_t=10,qt=11,H=12,W=13,$=14,ht=15,Ot=16,St=17,Ft=18,Rt=19,Wt=20,Mt=21,x=22,k=23,K=24,it=25,vt=26,It=27,tt=28,ne=29,mt=30,se=31,le=32,xe=852,F=592,c=15,l=c;function I(V){return(V>>>24&255)+(V>>>8&65280)+((V&65280)<<8)+((V&255)<<24)}function B(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new w.Buf16(320),this.work=new w.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function X(V){var at;return!V||!V.state?J:(at=V.state,V.total_in=V.total_out=at.total=0,V.msg="",at.wrap&&(V.adler=at.wrap&1),at.mode=dt,at.last=0,at.havedict=0,at.dmax=32768,at.head=null,at.hold=0,at.bits=0,at.lencode=at.lendyn=new w.Buf32(xe),at.distcode=at.distdyn=new w.Buf32(F),at.sane=1,at.back=-1,L)}function Q(V){var at;return!V||!V.state?J:(at=V.state,at.wsize=0,at.whave=0,at.wnext=0,X(V))}function bt(V,at){var g,ut;return!V||!V.state||(ut=V.state,at<0?(g=0,at=-at):(g=(at>>4)+1,at<48&&(at&=15)),at&&(at<8||at>15))?J:(ut.window!==null&&ut.wbits!==at&&(ut.window=null),ut.wrap=g,ut.wbits=at,Q(V))}function Dt(V,at){var g,ut;return V?(ut=new B,V.state=ut,ut.window=null,g=bt(V,at),g!==L&&(V.state=null),g):J}function Pt(V){return Dt(V,l)}var Gt=!0,Ct,Oe;function ir(V){if(Gt){var at;for(Ct=new w.Buf32(512),Oe=new w.Buf32(32),at=0;at<144;)V.lens[at++]=8;for(;at<256;)V.lens[at++]=9;for(;at<280;)V.lens[at++]=7;for(;at<288;)V.lens[at++]=8;for(m(u,V.lens,0,288,Ct,0,V.work,{bits:9}),at=0;at<32;)V.lens[at++]=5;m(v,V.lens,0,32,Oe,0,V.work,{bits:5}),Gt=!1}V.lencode=Ct,V.lenbits=9,V.distcode=Oe,V.distbits=5}function Xe(V,at,g,ut){var Bt,ot=V.state;return ot.window===null&&(ot.wsize=1<<ot.wbits,ot.wnext=0,ot.whave=0,ot.window=new w.Buf8(ot.wsize)),ut>=ot.wsize?(w.arraySet(ot.window,at,g-ot.wsize,ot.wsize,0),ot.wnext=0,ot.whave=ot.wsize):(Bt=ot.wsize-ot.wnext,Bt>ut&&(Bt=ut),w.arraySet(ot.window,at,g-ut,Bt,ot.wnext),ut-=Bt,ut?(w.arraySet(ot.window,at,g-ut,ut,0),ot.wnext=ut,ot.whave=ot.wsize):(ot.wnext+=Bt,ot.wnext===ot.wsize&&(ot.wnext=0),ot.whave<ot.wsize&&(ot.whave+=Bt))),0}function Ye(V,at){var g,ut,Bt,ot,pe,st,Kt,q,Y,or,Ut,pt,qe,Ae,Ht=0,Tt,ie,he,oe,ar,Ge,Xt,de,re=new w.Buf8(4),ke,_e,Lr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!V||!V.state||!V.output||!V.input&&V.avail_in!==0)return J;g=V.state,g.mode===H&&(g.mode=W),pe=V.next_out,Bt=V.output,Kt=V.avail_out,ot=V.next_in,ut=V.input,st=V.avail_in,q=g.hold,Y=g.bits,or=st,Ut=Kt,de=L;t:for(;;)switch(g.mode){case dt:if(g.wrap===0){g.mode=W;break}for(;Y<16;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}if(g.wrap&2&&q===35615){g.check=0,re[0]=q&255,re[1]=q>>>8&255,g.check=E(g.check,re,2,0),q=0,Y=0,g.mode=ct;break}if(g.flags=0,g.head&&(g.head.done=!1),!(g.wrap&1)||(((q&255)<<8)+(q>>8))%31){V.msg="incorrect header check",g.mode=mt;break}if((q&15)!==G){V.msg="unknown compression method",g.mode=mt;break}if(q>>>=4,Y-=4,Xt=(q&15)+8,g.wbits===0)g.wbits=Xt;else if(Xt>g.wbits){V.msg="invalid window size",g.mode=mt;break}g.dmax=1<<Xt,V.adler=g.check=1,g.mode=q&512?_t:H,q=0,Y=0;break;case ct:for(;Y<16;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}if(g.flags=q,(g.flags&255)!==G){V.msg="unknown compression method",g.mode=mt;break}if(g.flags&57344){V.msg="unknown header flags set",g.mode=mt;break}g.head&&(g.head.text=q>>8&1),g.flags&512&&(re[0]=q&255,re[1]=q>>>8&255,g.check=E(g.check,re,2,0)),q=0,Y=0,g.mode=z;case z:for(;Y<32;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}g.head&&(g.head.time=q),g.flags&512&&(re[0]=q&255,re[1]=q>>>8&255,re[2]=q>>>16&255,re[3]=q>>>24&255,g.check=E(g.check,re,4,0)),q=0,Y=0,g.mode=rt;case rt:for(;Y<16;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}g.head&&(g.head.xflags=q&255,g.head.os=q>>8),g.flags&512&&(re[0]=q&255,re[1]=q>>>8&255,g.check=E(g.check,re,2,0)),q=0,Y=0,g.mode=ft;case ft:if(g.flags&1024){for(;Y<16;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}g.length=q,g.head&&(g.head.extra_len=q),g.flags&512&&(re[0]=q&255,re[1]=q>>>8&255,g.check=E(g.check,re,2,0)),q=0,Y=0}else g.head&&(g.head.extra=null);g.mode=Nt;case Nt:if(g.flags&1024&&(pt=g.length,pt>st&&(pt=st),pt&&(g.head&&(Xt=g.head.extra_len-g.length,g.head.extra||(g.head.extra=new Array(g.head.extra_len)),w.arraySet(g.head.extra,ut,ot,pt,Xt)),g.flags&512&&(g.check=E(g.check,ut,pt,ot)),st-=pt,ot+=pt,g.length-=pt),g.length))break t;g.length=0,g.mode=wt;case wt:if(g.flags&2048){if(st===0)break t;pt=0;do Xt=ut[ot+pt++],g.head&&Xt&&g.length<65536&&(g.head.name+=String.fromCharCode(Xt));while(Xt&&pt<st);if(g.flags&512&&(g.check=E(g.check,ut,pt,ot)),st-=pt,ot+=pt,Xt)break t}else g.head&&(g.head.name=null);g.length=0,g.mode=At;case At:if(g.flags&4096){if(st===0)break t;pt=0;do Xt=ut[ot+pt++],g.head&&Xt&&g.length<65536&&(g.head.comment+=String.fromCharCode(Xt));while(Xt&&pt<st);if(g.flags&512&&(g.check=E(g.check,ut,pt,ot)),st-=pt,ot+=pt,Xt)break t}else g.head&&(g.head.comment=null);g.mode=kt;case kt:if(g.flags&512){for(;Y<16;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}if(q!==(g.check&65535)){V.msg="header crc mismatch",g.mode=mt;break}q=0,Y=0}g.head&&(g.head.hcrc=g.flags>>9&1,g.head.done=!0),V.adler=g.check=0,g.mode=H;break;case _t:for(;Y<32;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}V.adler=g.check=I(q),q=0,Y=0,g.mode=qt;case qt:if(g.havedict===0)return V.next_out=pe,V.avail_out=Kt,V.next_in=ot,V.avail_in=st,g.hold=q,g.bits=Y,C;V.adler=g.check=1,g.mode=H;case H:if(at===D||at===b)break t;case W:if(g.last){q>>>=Y&7,Y-=Y&7,g.mode=It;break}for(;Y<3;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}switch(g.last=q&1,q>>>=1,Y-=1,q&3){case 0:g.mode=$;break;case 1:if(ir(g),g.mode=Wt,at===b){q>>>=2,Y-=2;break t}break;case 2:g.mode=St;break;case 3:V.msg="invalid block type",g.mode=mt}q>>>=2,Y-=2;break;case $:for(q>>>=Y&7,Y-=Y&7;Y<32;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}if((q&65535)!==(q>>>16^65535)){V.msg="invalid stored block lengths",g.mode=mt;break}if(g.length=q&65535,q=0,Y=0,g.mode=ht,at===b)break t;case ht:g.mode=Ot;case Ot:if(pt=g.length,pt){if(pt>st&&(pt=st),pt>Kt&&(pt=Kt),pt===0)break t;w.arraySet(Bt,ut,ot,pt,pe),st-=pt,ot+=pt,Kt-=pt,pe+=pt,g.length-=pt;break}g.mode=H;break;case St:for(;Y<14;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}if(g.nlen=(q&31)+257,q>>>=5,Y-=5,g.ndist=(q&31)+1,q>>>=5,Y-=5,g.ncode=(q&15)+4,q>>>=4,Y-=4,g.nlen>286||g.ndist>30){V.msg="too many length or distance symbols",g.mode=mt;break}g.have=0,g.mode=Ft;case Ft:for(;g.have<g.ncode;){for(;Y<3;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}g.lens[Lr[g.have++]]=q&7,q>>>=3,Y-=3}for(;g.have<19;)g.lens[Lr[g.have++]]=0;if(g.lencode=g.lendyn,g.lenbits=7,ke={bits:g.lenbits},de=m(p,g.lens,0,19,g.lencode,0,g.work,ke),g.lenbits=ke.bits,de){V.msg="invalid code lengths set",g.mode=mt;break}g.have=0,g.mode=Rt;case Rt:for(;g.have<g.nlen+g.ndist;){for(;Ht=g.lencode[q&(1<<g.lenbits)-1],Tt=Ht>>>24,ie=Ht>>>16&255,he=Ht&65535,!(Tt<=Y);){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}if(he<16)q>>>=Tt,Y-=Tt,g.lens[g.have++]=he;else{if(he===16){for(_e=Tt+2;Y<_e;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}if(q>>>=Tt,Y-=Tt,g.have===0){V.msg="invalid bit length repeat",g.mode=mt;break}Xt=g.lens[g.have-1],pt=3+(q&3),q>>>=2,Y-=2}else if(he===17){for(_e=Tt+3;Y<_e;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}q>>>=Tt,Y-=Tt,Xt=0,pt=3+(q&7),q>>>=3,Y-=3}else{for(_e=Tt+7;Y<_e;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}q>>>=Tt,Y-=Tt,Xt=0,pt=11+(q&127),q>>>=7,Y-=7}if(g.have+pt>g.nlen+g.ndist){V.msg="invalid bit length repeat",g.mode=mt;break}for(;pt--;)g.lens[g.have++]=Xt}}if(g.mode===mt)break;if(g.lens[256]===0){V.msg="invalid code -- missing end-of-block",g.mode=mt;break}if(g.lenbits=9,ke={bits:g.lenbits},de=m(u,g.lens,0,g.nlen,g.lencode,0,g.work,ke),g.lenbits=ke.bits,de){V.msg="invalid literal/lengths set",g.mode=mt;break}if(g.distbits=6,g.distcode=g.distdyn,ke={bits:g.distbits},de=m(v,g.lens,g.nlen,g.ndist,g.distcode,0,g.work,ke),g.distbits=ke.bits,de){V.msg="invalid distances set",g.mode=mt;break}if(g.mode=Wt,at===b)break t;case Wt:g.mode=Mt;case Mt:if(st>=6&&Kt>=258){V.next_out=pe,V.avail_out=Kt,V.next_in=ot,V.avail_in=st,g.hold=q,g.bits=Y,R(V,Ut),pe=V.next_out,Bt=V.output,Kt=V.avail_out,ot=V.next_in,ut=V.input,st=V.avail_in,q=g.hold,Y=g.bits,g.mode===H&&(g.back=-1);break}for(g.back=0;Ht=g.lencode[q&(1<<g.lenbits)-1],Tt=Ht>>>24,ie=Ht>>>16&255,he=Ht&65535,!(Tt<=Y);){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}if(ie&&(ie&240)===0){for(oe=Tt,ar=ie,Ge=he;Ht=g.lencode[Ge+((q&(1<<oe+ar)-1)>>oe)],Tt=Ht>>>24,ie=Ht>>>16&255,he=Ht&65535,!(oe+Tt<=Y);){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}q>>>=oe,Y-=oe,g.back+=oe}if(q>>>=Tt,Y-=Tt,g.back+=Tt,g.length=he,ie===0){g.mode=vt;break}if(ie&32){g.back=-1,g.mode=H;break}if(ie&64){V.msg="invalid literal/length code",g.mode=mt;break}g.extra=ie&15,g.mode=x;case x:if(g.extra){for(_e=g.extra;Y<_e;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}g.length+=q&(1<<g.extra)-1,q>>>=g.extra,Y-=g.extra,g.back+=g.extra}g.was=g.length,g.mode=k;case k:for(;Ht=g.distcode[q&(1<<g.distbits)-1],Tt=Ht>>>24,ie=Ht>>>16&255,he=Ht&65535,!(Tt<=Y);){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}if((ie&240)===0){for(oe=Tt,ar=ie,Ge=he;Ht=g.distcode[Ge+((q&(1<<oe+ar)-1)>>oe)],Tt=Ht>>>24,ie=Ht>>>16&255,he=Ht&65535,!(oe+Tt<=Y);){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}q>>>=oe,Y-=oe,g.back+=oe}if(q>>>=Tt,Y-=Tt,g.back+=Tt,ie&64){V.msg="invalid distance code",g.mode=mt;break}g.offset=he,g.extra=ie&15,g.mode=K;case K:if(g.extra){for(_e=g.extra;Y<_e;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}g.offset+=q&(1<<g.extra)-1,q>>>=g.extra,Y-=g.extra,g.back+=g.extra}if(g.offset>g.dmax){V.msg="invalid distance too far back",g.mode=mt;break}g.mode=it;case it:if(Kt===0)break t;if(pt=Ut-Kt,g.offset>pt){if(pt=g.offset-pt,pt>g.whave&&g.sane){V.msg="invalid distance too far back",g.mode=mt;break}pt>g.wnext?(pt-=g.wnext,qe=g.wsize-pt):qe=g.wnext-pt,pt>g.length&&(pt=g.length),Ae=g.window}else Ae=Bt,qe=pe-g.offset,pt=g.length;pt>Kt&&(pt=Kt),Kt-=pt,g.length-=pt;do Bt[pe++]=Ae[qe++];while(--pt);g.length===0&&(g.mode=Mt);break;case vt:if(Kt===0)break t;Bt[pe++]=g.length,Kt--,g.mode=Mt;break;case It:if(g.wrap){for(;Y<32;){if(st===0)break t;st--,q|=ut[ot++]<<Y,Y+=8}if(Ut-=Kt,V.total_out+=Ut,g.total+=Ut,Ut&&(V.adler=g.check=g.flags?E(g.check,Bt,Ut,pe-Ut):N(g.check,Bt,Ut,pe-Ut)),Ut=Kt,(g.flags?q:I(q))!==g.check){V.msg="incorrect data check",g.mode=mt;break}q=0,Y=0}g.mode=tt;case tt:if(g.wrap&&g.flags){for(;Y<32;){if(st===0)break t;st--,q+=ut[ot++]<<Y,Y+=8}if(q!==(g.total&4294967295)){V.msg="incorrect length check",g.mode=mt;break}q=0,Y=0}g.mode=ne;case ne:de=M;break t;case mt:de=U;break t;case se:return j;case le:default:return J}return V.next_out=pe,V.avail_out=Kt,V.next_in=ot,V.avail_in=st,g.hold=q,g.bits=Y,(g.wsize||Ut!==V.avail_out&&g.mode<mt&&(g.mode<It||at!==f))&&Xe(V,V.output,V.next_out,Ut-V.avail_out),or-=V.avail_in,Ut-=V.avail_out,V.total_in+=or,V.total_out+=Ut,g.total+=Ut,g.wrap&&Ut&&(V.adler=g.check=g.flags?E(g.check,Bt,Ut,V.next_out-Ut):N(g.check,Bt,Ut,V.next_out-Ut)),V.data_type=g.bits+(g.last?64:0)+(g.mode===H?128:0)+(g.mode===Wt||g.mode===ht?256:0),(or===0&&Ut===0||at===f)&&de===L&&(de=yt),de}function en(V){if(!V||!V.state)return J;var at=V.state;return at.window&&(at.window=null),V.state=null,L}function rn(V,at){var g;return!V||!V.state||(g=V.state,(g.wrap&2)===0)?J:(g.head=at,at.done=!1,L)}function nn(V,at){var g=at.length,ut,Bt,ot;return!V||!V.state||(ut=V.state,ut.wrap!==0&&ut.mode!==qt)?J:ut.mode===qt&&(Bt=1,Bt=N(Bt,at,g,0),Bt!==ut.check)?U:(ot=Xe(V,at,g,g),ot?(ut.mode=se,j):(ut.havedict=1,L))}S.inflateReset=Q,S.inflateReset2=bt,S.inflateResetKeep=X,S.inflateInit=Pt,S.inflateInit2=Dt,S.inflate=Ye,S.inflateEnd=en,S.inflateGetHeader=rn,S.inflateSetDictionary=nn,S.inflateInfo="pako inflate (from Nodeca project)"},function(O,S){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";S.assign=function(E){for(var R=Array.prototype.slice.call(arguments,1);R.length;){var m=R.shift();if(!!m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var p in m)m.hasOwnProperty(p)&&(E[p]=m[p])}}return E},S.shrinkBuf=function(E,R){return E.length===R?E:E.subarray?E.subarray(0,R):(E.length=R,E)};var w={arraySet:function(E,R,m,p,u){if(R.subarray&&E.subarray){E.set(R.subarray(m,m+p),u);return}for(var v=0;v<p;v++)E[u+v]=R[m+v]},flattenChunks:function(E){var R,m,p,u,v,f;for(p=0,R=0,m=E.length;R<m;R++)p+=E[R].length;for(f=new Uint8Array(p),u=0,R=0,m=E.length;R<m;R++)v=E[R],f.set(v,u),u+=v.length;return f}},N={arraySet:function(E,R,m,p,u){for(var v=0;v<p;v++)E[u+v]=R[m+v]},flattenChunks:function(E){return[].concat.apply([],E)}};S.setTyped=function(E){E?(S.Buf8=Uint8Array,S.Buf16=Uint16Array,S.Buf32=Int32Array,S.assign(S,w)):(S.Buf8=Array,S.Buf16=Array,S.Buf32=Array,S.assign(S,N))},S.setTyped(d)},function(O,S){function d(w,N,E,R){for(var m=w&65535|0,p=w>>>16&65535|0,u=0;E!==0;){u=E>2e3?2e3:E,E-=u;do m=m+N[R++]|0,p=p+m|0;while(--u);m%=65521,p%=65521}return m|p<<16|0}O.exports=d},function(O,S){function d(){for(var E,R=[],m=0;m<256;m++){E=m;for(var p=0;p<8;p++)E=E&1?3988292384^E>>>1:E>>>1;R[m]=E}return R}var w=d();function N(E,R,m,p){var u=w,v=p+m;E^=-1;for(var f=p;f<v;f++)E=E>>>8^u[(E^R[f])&255];return E^-1}O.exports=N},function(O,S){var d=30,w=12;O.exports=function(E,R){var m,p,u,v,f,D,b,L,M,C,J,U,j,yt,G,dt,ct,z,rt,ft,Nt,wt,At,kt,_t;m=E.state,p=E.next_in,kt=E.input,u=p+(E.avail_in-5),v=E.next_out,_t=E.output,f=v-(R-E.avail_out),D=v+(E.avail_out-257),b=m.dmax,L=m.wsize,M=m.whave,C=m.wnext,J=m.window,U=m.hold,j=m.bits,yt=m.lencode,G=m.distcode,dt=(1<<m.lenbits)-1,ct=(1<<m.distbits)-1;t:do{j<15&&(U+=kt[p++]<<j,j+=8,U+=kt[p++]<<j,j+=8),z=yt[U&dt];e:for(;;){if(rt=z>>>24,U>>>=rt,j-=rt,rt=z>>>16&255,rt===0)_t[v++]=z&65535;else if(rt&16){ft=z&65535,rt&=15,rt&&(j<rt&&(U+=kt[p++]<<j,j+=8),ft+=U&(1<<rt)-1,U>>>=rt,j-=rt),j<15&&(U+=kt[p++]<<j,j+=8,U+=kt[p++]<<j,j+=8),z=G[U&ct];r:for(;;){if(rt=z>>>24,U>>>=rt,j-=rt,rt=z>>>16&255,rt&16){if(Nt=z&65535,rt&=15,j<rt&&(U+=kt[p++]<<j,j+=8,j<rt&&(U+=kt[p++]<<j,j+=8)),Nt+=U&(1<<rt)-1,Nt>b){E.msg="invalid distance too far back",m.mode=d;break t}if(U>>>=rt,j-=rt,rt=v-f,Nt>rt){if(rt=Nt-rt,rt>M&&m.sane){E.msg="invalid distance too far back",m.mode=d;break t}if(wt=0,At=J,C===0){if(wt+=L-rt,rt<ft){ft-=rt;do _t[v++]=J[wt++];while(--rt);wt=v-Nt,At=_t}}else if(C<rt){if(wt+=L+C-rt,rt-=C,rt<ft){ft-=rt;do _t[v++]=J[wt++];while(--rt);if(wt=0,C<ft){rt=C,ft-=rt;do _t[v++]=J[wt++];while(--rt);wt=v-Nt,At=_t}}}else if(wt+=C-rt,rt<ft){ft-=rt;do _t[v++]=J[wt++];while(--rt);wt=v-Nt,At=_t}for(;ft>2;)_t[v++]=At[wt++],_t[v++]=At[wt++],_t[v++]=At[wt++],ft-=3;ft&&(_t[v++]=At[wt++],ft>1&&(_t[v++]=At[wt++]))}else{wt=v-Nt;do _t[v++]=_t[wt++],_t[v++]=_t[wt++],_t[v++]=_t[wt++],ft-=3;while(ft>2);ft&&(_t[v++]=_t[wt++],ft>1&&(_t[v++]=_t[wt++]))}}else if((rt&64)===0){z=G[(z&65535)+(U&(1<<rt)-1)];continue r}else{E.msg="invalid distance code",m.mode=d;break t}break}}else if((rt&64)===0){z=yt[(z&65535)+(U&(1<<rt)-1)];continue e}else if(rt&32){m.mode=w;break t}else{E.msg="invalid literal/length code",m.mode=d;break t}break}}while(p<u&&v<D);ft=j>>3,p-=ft,j-=ft<<3,U&=(1<<j)-1,E.next_in=p,E.next_out=v,E.avail_in=p<u?5+(u-p):5-(p-u),E.avail_out=v<D?257+(D-v):257-(v-D),m.hold=U,m.bits=j}},function(O,S,d){var w=d(33),N=15,E=852,R=592,m=0,p=1,u=2,v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],D=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];O.exports=function(M,C,J,U,j,yt,G,dt){var ct=dt.bits,z=0,rt=0,ft=0,Nt=0,wt=0,At=0,kt=0,_t=0,qt=0,H=0,W,$,ht,Ot,St,Ft=null,Rt=0,Wt,Mt=new w.Buf16(N+1),x=new w.Buf16(N+1),k=null,K=0,it,vt,It;for(z=0;z<=N;z++)Mt[z]=0;for(rt=0;rt<U;rt++)Mt[C[J+rt]]++;for(wt=ct,Nt=N;Nt>=1&&Mt[Nt]===0;Nt--);if(wt>Nt&&(wt=Nt),Nt===0)return j[yt++]=1<<24|64<<16|0,j[yt++]=1<<24|64<<16|0,dt.bits=1,0;for(ft=1;ft<Nt&&Mt[ft]===0;ft++);for(wt<ft&&(wt=ft),_t=1,z=1;z<=N;z++)if(_t<<=1,_t-=Mt[z],_t<0)return-1;if(_t>0&&(M===m||Nt!==1))return-1;for(x[1]=0,z=1;z<N;z++)x[z+1]=x[z]+Mt[z];for(rt=0;rt<U;rt++)C[J+rt]!==0&&(G[x[C[J+rt]]++]=rt);if(M===m?(Ft=k=G,Wt=19):M===p?(Ft=v,Rt-=257,k=f,K-=257,Wt=256):(Ft=D,k=b,Wt=-1),H=0,rt=0,z=ft,St=yt,At=wt,kt=0,ht=-1,qt=1<<wt,Ot=qt-1,M===p&&qt>E||M===u&&qt>R)return 1;for(;;){it=z-kt,G[rt]<Wt?(vt=0,It=G[rt]):G[rt]>Wt?(vt=k[K+G[rt]],It=Ft[Rt+G[rt]]):(vt=32+64,It=0),W=1<<z-kt,$=1<<At,ft=$;do $-=W,j[St+(H>>kt)+$]=it<<24|vt<<16|It|0;while($!==0);for(W=1<<z-1;H&W;)W>>=1;if(W!==0?(H&=W-1,H+=W):H=0,rt++,--Mt[z]===0){if(z===Nt)break;z=C[J+G[rt]]}if(z>wt&&(H&Ot)!==ht){for(kt===0&&(kt=wt),St+=ft,At=z-kt,_t=1<<At;At+kt<Nt&&(_t-=Mt[At+kt],!(_t<=0));)At++,_t<<=1;if(qt+=1<<At,M===p&&qt>E||M===u&&qt>R)return 1;ht=H&Ot,j[ht]=wt<<24|At<<16|St-yt|0}}return H!==0&&(j[St+H]=z-kt<<24|64<<16|0),dt.bits=wt,0}},function(O,S,d){var w=d(33),N=!0,E=!0;try{String.fromCharCode.apply(null,[0])}catch{N=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{E=!1}for(var R=new w.Buf8(256),m=0;m<256;m++)R[m]=m>=252?6:m>=248?5:m>=240?4:m>=224?3:m>=192?2:1;R[254]=R[254]=1,S.string2buf=function(u){var v,f,D,b,L,M=u.length,C=0;for(b=0;b<M;b++)f=u.charCodeAt(b),(f&64512)===55296&&b+1<M&&(D=u.charCodeAt(b+1),(D&64512)===56320&&(f=65536+(f-55296<<10)+(D-56320),b++)),C+=f<128?1:f<2048?2:f<65536?3:4;for(v=new w.Buf8(C),L=0,b=0;L<C;b++)f=u.charCodeAt(b),(f&64512)===55296&&b+1<M&&(D=u.charCodeAt(b+1),(D&64512)===56320&&(f=65536+(f-55296<<10)+(D-56320),b++)),f<128?v[L++]=f:f<2048?(v[L++]=192|f>>>6,v[L++]=128|f&63):f<65536?(v[L++]=224|f>>>12,v[L++]=128|f>>>6&63,v[L++]=128|f&63):(v[L++]=240|f>>>18,v[L++]=128|f>>>12&63,v[L++]=128|f>>>6&63,v[L++]=128|f&63);return v};function p(u,v){if(v<65537&&(u.subarray&&E||!u.subarray&&N))return String.fromCharCode.apply(null,w.shrinkBuf(u,v));for(var f="",D=0;D<v;D++)f+=String.fromCharCode(u[D]);return f}S.buf2binstring=function(u){return p(u,u.length)},S.binstring2buf=function(u){for(var v=new w.Buf8(u.length),f=0,D=v.length;f<D;f++)v[f]=u.charCodeAt(f);return v},S.buf2string=function(u,v){var f,D,b,L,M=v||u.length,C=new Array(M*2);for(D=0,f=0;f<M;){if(b=u[f++],b<128){C[D++]=b;continue}if(L=R[b],L>4){C[D++]=65533,f+=L-1;continue}for(b&=L===2?31:L===3?15:7;L>1&&f<M;)b=b<<6|u[f++]&63,L--;if(L>1){C[D++]=65533;continue}b<65536?C[D++]=b:(b-=65536,C[D++]=55296|b>>10&1023,C[D++]=56320|b&1023)}return p(C,D)},S.utf8border=function(u,v){var f;for(v=v||u.length,v>u.length&&(v=u.length),f=v-1;f>=0&&(u[f]&192)===128;)f--;return f<0||f===0?v:f+R[u[f]]>v?f:v}},function(O,S){O.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(O,S){O.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(O,S){function d(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}O.exports=d},function(O,S){function d(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}O.exports=d}])})})(te);var xn={},Ji={};(function(_){var A=In&&In.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,N){w.__proto__=N}||function(w,N){for(var E in N)N.hasOwnProperty(E)&&(w[E]=N[E])};return function(w,N){d(w,N);function E(){this.constructor=w}w.prototype=N===null?Object.create(N):(E.prototype=N.prototype,new E)}}();_.__esModule=!0;var O;(function(d){d[d.EPERM=1]="EPERM",d[d.ENOENT=2]="ENOENT",d[d.EIO=5]="EIO",d[d.EBADF=9]="EBADF",d[d.EACCES=13]="EACCES",d[d.EBUSY=16]="EBUSY",d[d.EEXIST=17]="EEXIST",d[d.ENOTDIR=20]="ENOTDIR",d[d.EISDIR=21]="EISDIR",d[d.EINVAL=22]="EINVAL",d[d.EFBIG=27]="EFBIG",d[d.ENOSPC=28]="ENOSPC",d[d.EROFS=30]="EROFS",d[d.ENOTEMPTY=39]="ENOTEMPTY",d[d.ENOTSUP=95]="ENOTSUP"})(O=_.ErrorCode||(_.ErrorCode={})),_.ErrorStrings={},_.ErrorStrings[O.EPERM]="Operation not permitted.",_.ErrorStrings[O.ENOENT]="No such file or directory.",_.ErrorStrings[O.EIO]="Input/output error.",_.ErrorStrings[O.EBADF]="Bad file descriptor.",_.ErrorStrings[O.EACCES]="Permission denied.",_.ErrorStrings[O.EBUSY]="Resource busy or locked.",_.ErrorStrings[O.EEXIST]="File exists.",_.ErrorStrings[O.ENOTDIR]="File is not a directory.",_.ErrorStrings[O.EISDIR]="File is a directory.",_.ErrorStrings[O.EINVAL]="Invalid argument.",_.ErrorStrings[O.EFBIG]="File is too big.",_.ErrorStrings[O.ENOSPC]="No space left on disk.",_.ErrorStrings[O.EROFS]="Cannot modify a read-only file system.",_.ErrorStrings[O.ENOTEMPTY]="Directory is not empty.",_.ErrorStrings[O.ENOTSUP]="Operation is not supported.";var S=function(d){A(w,d);function w(N,E,R){E===void 0&&(E=_.ErrorStrings[N]);var m=d.call(this,E)||this;return m.syscall="",m.errno=N,m.code=O[N],m.path=R,m.stack=new Error().stack,m.message="Error: "+m.code+": "+E+(m.path?", '"+m.path+"'":""),m}return w.fromJSON=function(N){var E=new w(0);return E.errno=N.errno,E.code=N.code,E.path=N.path,E.stack=N.stack,E.message=N.message,E},w.fromBuffer=function(N,E){return E===void 0&&(E=0),w.fromJSON(JSON.parse(N.toString("utf8",E+4,E+4+N.readUInt32LE(E))))},w.FileError=function(N,E){return new w(N,_.ErrorStrings[N],E)},w.ENOENT=function(N){return this.FileError(O.ENOENT,N)},w.EEXIST=function(N){return this.FileError(O.EEXIST,N)},w.EISDIR=function(N){return this.FileError(O.EISDIR,N)},w.ENOTDIR=function(N){return this.FileError(O.ENOTDIR,N)},w.EPERM=function(N){return this.FileError(O.EPERM,N)},w.ENOTEMPTY=function(N){return this.FileError(O.ENOTEMPTY,N)},w.prototype.toString=function(){return this.message},w.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},w.prototype.writeToBuffer=function(N,E){N===void 0&&(N=Buffer.alloc(this.bufferSize())),E===void 0&&(E=0);var R=N.write(JSON.stringify(this.toJSON()),E+4);return N.writeUInt32LE(R,E),N},w.prototype.bufferSize=function(){return 4+Buffer.byteLength(JSON.stringify(this.toJSON()))},w}(Error);_.ApiError=S})(Ji);(function(_){_.__esModule=!0;var A=Ji,O;(function(d){d[d.NOP=0]="NOP",d[d.THROW_EXCEPTION=1]="THROW_EXCEPTION",d[d.TRUNCATE_FILE=2]="TRUNCATE_FILE",d[d.CREATE_FILE=3]="CREATE_FILE"})(O=_.ActionType||(_.ActionType={}));var S=function(){function d(w){if(this.flagStr=w,d.validFlagStrs.indexOf(w)<0)throw new A.ApiError(A.ErrorCode.EINVAL,"Invalid flag: "+w)}return d.getFileFlag=function(w){return d.flagCache.hasOwnProperty(w)?d.flagCache[w]:d.flagCache[w]=new d(w)},d.prototype.getFlagString=function(){return this.flagStr},d.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},d.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},d.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},d.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},d.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},d.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},d.prototype.pathExistsAction=function(){return this.isExclusive()?O.THROW_EXCEPTION:this.isTruncating()?O.TRUNCATE_FILE:O.NOP},d.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?O.CREATE_FILE:O.THROW_EXCEPTION},d}();S.flagCache={},S.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"],_.FileFlag=S})(xn);var os={};(function(_){_.__esModule=!0;function A(S,d,w,N,E){return S<d||w<d?S>w?w+1:S+1:N===E?d:d+1}function O(S,d){if(S===d)return 0;if(S.length>d.length){var w=S;S=d,d=w}for(var N=S.length,E=d.length;N>0&&S.charCodeAt(N-1)===d.charCodeAt(E-1);)N--,E--;for(var R=0;R<N&&S.charCodeAt(R)===d.charCodeAt(R);)R++;if(N-=R,E-=R,N===0||E===1)return E;for(var m=new Array(N<<1),p=0;p<N;)m[N+p]=S.charCodeAt(R+p),m[p]=++p;var u,v,f,D,b;for(u=0;u+3<E;)for(var L=d.charCodeAt(R+(v=u)),M=d.charCodeAt(R+(f=u+1)),C=d.charCodeAt(R+(D=u+2)),J=d.charCodeAt(R+(b=u+3)),U=u+=4,p=0;p<N;){var j=m[N+p],yt=m[p];v=A(yt,v,f,L,j),f=A(v,f,D,M,j),D=A(f,D,b,C,j),U=A(D,b,U,J,j),m[p++]=U,b=D,D=f,f=v,v=yt}for(var G=0;u<E;){var L=d.charCodeAt(R+(v=u));G=++u;for(var p=0;p<N;p++){var yt=m[p];m[p]=G=yt<v||G<v?yt>G?G+1:yt+1:L===m[N+p]?v:v+1,v=yt}}return G}_.default=O})(os);typeof navigator<"u"&&(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident"));function as(_){return Buffer.from(_)}var ss=as;const us=["neogeo.zip","pgm.zip"],Os=[{name:"cps1",cores:["fbalpha2012_cps1","fbalpha2012"]},{name:"cps2",cores:["fbalpha2012_cps2","fbalpha2012"]},{name:"neogeo",cores:["fbalpha2012_neogeo","fbalpha2012"]},{name:"fbalpha2012",cores:["fbalpha2012"]},{name:"mame",cores:["mame2003_plus"]},{name:"nes",cores:["fceumm"]},{name:"snes",cores:["snes9x"]},{name:"gba",cores:["mgba"]},{name:"genesis",cores:["genesis_plus_gx"]}];function ks(_,A){let O=_();O>0&&A(O-1)}function bs(_,A,O){let S=_();S<O-1&&A(S+1)}const[Ns,fs]=Ve(!1),[Rs,cs]=Ve("");function Ts(_){Qr(()=>{fs(!0),cs(_)})}const Ls=_=>{const[A,O]=Ve(_);return Object.defineProperty(()=>A(),"value",{get:A,set:O})};function Ds(_,A){return function(O){const S=A().length,d=O.scrollHeight,N=O.clientHeight/d,R=(_()+1)/S-N;R>0?O.scrollTop=R*d:O.scrollTop=0}}window.Buffer=te.exports.BFSRequire("buffer").Buffer;function As(_,A,O){te.exports.FileSystem.InMemory.Create({},function(S,d){te.exports.FileSystem.IndexedDB.Create({storeName:"RetroGames"},(w,N)=>{w&&console.log(w),te.exports.initialize(d);const E=te.exports.BFSRequire("fs");N.readFile(`/${_}/${A}`,null,xn.FileFlag.getFileFlag("r"),(R,m)=>{E.writeFileSync(`/${A}`,m);let p=[];_==="neogeo"&&(p=["neogeo.zip"]),(_==="mame"||_==="fbalpha2012")&&(p=us),Promise.all(p.map(u=>new Promise((v,f)=>{N.readFile(`/${_}/${u}`,null,xn.FileFlag.getFileFlag("r"),(D,b)=>{D||E.writeFileSync(`/${u}`,b),v(null)})}))).then(()=>O(d))})})})}function Cs(_,A=null){te.exports.FileSystem.IndexedDB.Create({storeName:"RetroArch"},(O,S)=>{te.exports.FileSystem.InMemory.Create({},function(d,w){te.exports.FileSystem.AsyncMirror.Create({sync:w,async:S},function(N,E){te.exports.initialize(E),console.log("amfs ok"),fetch("assets/frontend/bundle.zip").then(R=>R.arrayBuffer()).then(R=>{const m=Buffer.from(R);te.exports.FileSystem.ZipFS.Create({zipData:m},(p,u)=>{console.log("zip",p),te.exports.FileSystem.MountableFileSystem.Create({"/home/web_user/retroarch/userdata":E,"/home/web_user/retroarch/bundle":u,"/home/web_user/retroarch/userdata/content/downloads":_},(v,f)=>{te.exports.initialize(f);const D=new te.exports.EmscriptenFS;window.FS.mount(D,{root:"/home"},"/home"),console.log("WEBPLAYER: filesystem initialization successful"),A&&A()})})})})})})}const je={};function Ms(){return new Promise((_,A)=>{te.exports.FileSystem.IndexedDB.Create({storeName:"RetroGames"},(O,S)=>{te.exports.initialize(S),te.exports.FileSystem.IndexedDB.Create({storeName:"RetroArch"},(d,w)=>{te.exports.initialize(w),te.exports.FileSystem.MountableFileSystem.Create({"/":S,"/userdata":w},(N,E)=>{N&&A(N),te.exports.initialize(E),je.localFs=te.exports.BFSRequire("fs"),_(null)})})})})}function ls(_,A,O){const S=_.files;let d=S.length;for(let w=0;w<S.length;w++){const N=new FileReader;N.readAsArrayBuffer(S[w]),N.onload=()=>{const E=S[w].name;ps(`${A}/${E}`,N.result).then(()=>{O&&--d===0&&O()})}}}function Ps(_,A,O){const S=A.target,d=`/${_}`;hs(d).then(()=>ls(S,d,O))}function hs(_){return new Promise((A,O)=>{je.localFs.exists(_,S=>{S?A(!0):je.localFs.mkdir(_,d=>{d&&O(d),A(!0)})})})}function ps(_,A){return new Promise((O,S)=>{je.localFs.writeFile(_,ss(A),d=>{d&&S(d),O(null)})})}function Bs(){const _=localStorage.getItem("rawebapp");_&&(je.save=JSON.parse(_))}function Us(_){localStorage.setItem("rawebapp",JSON.stringify({...je.save,..._}))}function zs(_,A){je.localFs.readFile(`${_}/${A}`,"utf8",(O,S)=>{const d=document.createElement("a");d.href=window.URL.createObjectURL(new Blob([S],{type:"text/plain"})),d.download=A,d.click()})}function js(_,A){je.localFs.unlink(_,O=>{if(O)throw O;A()})}async function Ws(_){return new Promise((A,O)=>{if(_===""){A([]);return}je.localFs.readdir(`/${_}`,(S,d)=>{S&&(S.code==="ENOENT"?A([]):O(S)),console.log("files",d),A(d)})})}export{Ya as $,Ls as A,hs as B,ps as C,us as D,js as E,Is as F,Ws as G,Us as H,zs as I,je as J,fs as K,Ns as L,Rs as M,Ms as N,Bs as O,Os as P,As as Q,Cs as R,xs as S,ds as a,vr as b,Sn as c,Fs as d,Ve as e,qa as f,ws as g,Qr as h,Ss as i,ms as j,Ga as k,gs as l,_s as m,_n as n,Ja as o,vs as p,Ka as q,Es as r,nr as s,Ts as t,ze as u,ys as v,ks as w,bs as x,Ds as y,Ps as z};
