import{f as w,l as g,g as f,h as E}from"./fs.b1343044.js";function h(e,t,s=!0,a=!0){const n=document.createElement("script"),o=document.getElementsByTagName("script")[0];n.async=s,n.defer=a,n.onload=function(){setTimeout(t,0)},n.src=e,o.parentNode.insertBefore(n,o)}function F(){window.Module={noInitialRun:!0,arguments:["/home/web_user/retroarch/userdata/content/downloads/"],preRun:[],postRun:[function(){console.log("pppsssssssssst rrrrrrrrrrrrrun")}],onRuntimeInitialized:function(){},print:function(e){console.log(e)},printErr:function(e){console.log(e)},canvas:document.getElementById("canvas"),totalDependencies:0,monitorRunDependencies:function(e){this.totalDependencies=Math.max(this.totalDependencies,e)}}}let u=!1;function v(){w();const{game:e,platform:t,core:s}=g.save.selectedGame;!e||!t||!s||(F(),window.Module.arguments=navigator.userAgent.indexOf("Chrome")>0?["-v",`/home/web_user/retroarch/userdata/content/downloads/${e}`]:["-v","--menu"],window.Module.onRuntimeInitialized=()=>{document.getElementById("play").textContent="Load game ...",f(t,e,a=>{document.getElementById("play").textContent="Load retroarch files ...",E(a,()=>{document.getElementById("play").style.display="none",u=!0,window.playGame()})})},h(`cores/${s}_libretro.js`,()=>{console.log("core loaded")}))}const b={9:"tab",13:"enter",16:"shift",18:"alt",27:"Escape",33:"rePag",34:"avPag",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12"};window.addEventListener("keydown",function(e){Object.values(b).includes(e.key)&&e.preventDefault()});let c;location.search&&(window.addEventListener("gamepadconnected",function(e){console.log("launcher: controller connected"),c||(c=setInterval(k,100))}),v());const I=document.getElementById("launcher");window.toggleFullScreen=()=>{const e=document.getElementById("bar"),t=getComputedStyle(e).display;document.fullscreenElement?(document.exitFullscreen(),t==="none"&&(document.getElementById("bar").style.display="block")):(I.requestFullscreen(),t!=="none"&&(document.getElementById("bar").style.display="none"))};window.exitToApp=()=>{d("Escape"),setTimeout(()=>{d("Escape"),setTimeout(parent.window.exitGame,600),clearInterval(c)},80),window.onbeforeunload=null};window.playGame=function(){!u||(window.onbeforeunload=function(){return"Dude, are you sure you want to leave?"},window.Module.callMain(window.Module.arguments),window.Module.resumeMainLoop(),setTimeout(()=>{window.Module.canvas.style.width="auto",window.Module.canvas.style.height="85%",document.getElementById("bar").style.display="block"},500),document.getElementById("play").style.display="none")};function B(){const e=document.getElementById("bar");getComputedStyle(e).display==="none"?document.getElementById("bar").style.display="block":document.getElementById("bar").style.display="none"}function d(e){document.dispatchEvent(new KeyboardEvent("keydown",{code:e})),setTimeout(()=>{document.dispatchEvent(new KeyboardEvent("keyup",{code:e})),console.log("key press",e)},33)}window.keyPress=d;const S=[[6,9,0,"F1"],[4,9,0,B],[6,8,0,window.toggleFullScreen],[4,8,0,window.exitToApp],[7,8,0,"F2"],[7,9,0,"F4"]];function k(){const e=navigator.getGamepads?navigator.getGamepads():[];for(let n=0;n<1;n++){const o=e[n];if(o){const i=[];for(let l=0;l<o.buttons.length;l++)o.buttons[l].pressed&&i.push(l);i.length&&S.forEach(l=>{const[m,p,y,r]=l;y+600<o.timestamp&&i.includes(m)&&i.includes(p)&&(l[2]=o.timestamp,typeof r=="string"?d(r):r())})}}const{jsHeapSizeLimit:t,totalJSHeapSize:s,usedJSHeapSize:a}=window.performance.memory;document.getElementById("info").innerText=`${(t/1024/1024).toFixed(2)} ${(s/t).toFixed(4)} ${(a/s).toFixed(4)}`}
