(function(){const Nt=document.createElement("link").relList;if(Nt&&Nt.supports&&Nt.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))T(v);new MutationObserver(v=>{for(const S of v)if(S.type==="childList")for(const R of S.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&T(R)}).observe(document,{childList:!0,subtree:!0});function z(v){const S={};return v.integrity&&(S.integrity=v.integrity),v.referrerpolicy&&(S.referrerPolicy=v.referrerpolicy),v.crossorigin==="use-credentials"?S.credentials="include":v.crossorigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function T(v){if(v.ep)return;v.ep=!0;const S=z(v);fetch(v.href,S)}})();var $r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$t={exports:{}};(function(lt,Nt){(function(T,v){lt.exports=v()})($r,function(){return function(z){var T={};function v(S){if(T[S])return T[S].exports;var R=T[S]={exports:{},id:S,loaded:!1};return z[S].call(R.exports,R,R.exports,v),R.loaded=!0,R.exports}return v.m=z,v.c=T,v.p="",v(0)}([function(z,T,v){(function(S,R,E,N){Object.defineProperty(T,"__esModule",{value:!0});var w=v(2),p=v(9),f;(function(n){n[n.EPERM=1]="EPERM",n[n.ENOENT=2]="ENOENT",n[n.EIO=5]="EIO",n[n.EBADF=9]="EBADF",n[n.EACCES=13]="EACCES",n[n.EBUSY=16]="EBUSY",n[n.EEXIST=17]="EEXIST",n[n.ENOTDIR=20]="ENOTDIR",n[n.EISDIR=21]="EISDIR",n[n.EINVAL=22]="EINVAL",n[n.EFBIG=27]="EFBIG",n[n.ENOSPC=28]="ENOSPC",n[n.EROFS=30]="EROFS",n[n.ENOTEMPTY=39]="ENOTEMPTY",n[n.ENOTSUP=95]="ENOTSUP"})(f||(f={}));var g={};g[f.EPERM]="Operation not permitted.",g[f.ENOENT]="No such file or directory.",g[f.EIO]="Input/output error.",g[f.EBADF]="Bad file descriptor.",g[f.EACCES]="Permission denied.",g[f.EBUSY]="Resource busy or locked.",g[f.EEXIST]="File exists.",g[f.ENOTDIR]="File is not a directory.",g[f.EISDIR]="File is a directory.",g[f.EINVAL]="Invalid argument.",g[f.EFBIG]="File is too big.",g[f.ENOSPC]="No space left on disk.",g[f.EROFS]="Cannot modify a read-only file system.",g[f.ENOTEMPTY]="Directory is not empty.",g[f.ENOTSUP]="Operation is not supported.";var u=function(n){function t(r,e,i){e===void 0&&(e=g[r]),n.call(this,e),this.syscall="",this.errno=r,this.code=f[r],this.path=i,this.stack=new n().stack,this.message="Error: "+this.code+": "+e+(this.path?", '"+this.path+"'":"")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.fromJSON=function(e){var i=new t(0);return i.errno=e.errno,i.code=e.code,i.path=e.path,i.stack=e.stack,i.message=e.message,i},t.fromBuffer=function(e,i){return i===void 0&&(i=0),t.fromJSON(JSON.parse(e.toString("utf8",i+4,i+4+e.readUInt32LE(i))))},t.FileError=function(e,i){return new t(e,g[e],i)},t.ENOENT=function(e){return this.FileError(f.ENOENT,e)},t.EEXIST=function(e){return this.FileError(f.EEXIST,e)},t.EISDIR=function(e){return this.FileError(f.EISDIR,e)},t.ENOTDIR=function(e){return this.FileError(f.ENOTDIR,e)},t.EPERM=function(e){return this.FileError(f.EPERM,e)},t.ENOTEMPTY=function(e){return this.FileError(f.ENOTEMPTY,e)},t.prototype.toString=function(){return this.message},t.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},t.prototype.writeToBuffer=function(e,i){e===void 0&&(e=S.alloc(this.bufferSize())),i===void 0&&(i=0);var o=e.write(JSON.stringify(this.toJSON()),i+4);return e.writeUInt32LE(o,i),e},t.prototype.bufferSize=function(){return 4+S.byteLength(JSON.stringify(this.toJSON()))},t}(Error),b=Object.freeze({get ErrorCode(){return f},ErrorStrings:g,ApiError:u}),x;(function(n){n[n.NOP=0]="NOP",n[n.THROW_EXCEPTION=1]="THROW_EXCEPTION",n[n.TRUNCATE_FILE=2]="TRUNCATE_FILE",n[n.CREATE_FILE=3]="CREATE_FILE"})(x||(x={}));var k=function n(t){if(this.flagStr=t,n.validFlagStrs.indexOf(t)<0)throw new u(f.EINVAL,"Invalid flag: "+t)};k.getFileFlag=function(t){return k.flagCache.hasOwnProperty(t)?k.flagCache[t]:k.flagCache[t]=new k(t)},k.prototype.getFlagString=function(){return this.flagStr},k.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},k.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},k.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},k.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},k.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},k.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},k.prototype.pathExistsAction=function(){return this.isExclusive()?x.THROW_EXCEPTION:this.isTruncating()?x.TRUNCATE_FILE:x.NOP},k.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?x.CREATE_FILE:x.THROW_EXCEPTION},k.flagCache={},k.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];var D;(function(n){n[n.FILE=32768]="FILE",n[n.DIRECTORY=16384]="DIRECTORY",n[n.SYMLINK=40960]="SYMLINK"})(D||(D={}));var A=function(t,r,e,i,o,a){if(i===void 0&&(i=new Date),o===void 0&&(o=new Date),a===void 0&&(a=new Date),this.size=r,this.atime=i,this.mtime=o,this.ctime=a,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,e)this.mode=e;else switch(t){case D.FILE:this.mode=420;break;case D.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(r/512),this.mode<4096&&(this.mode|=t)};A.fromBuffer=function(t){var r=t.readUInt32LE(0),e=t.readUInt32LE(4),i=t.readDoubleLE(8),o=t.readDoubleLE(16),a=t.readDoubleLE(24);return new A(e&61440,r,e&4095,new Date(i),new Date(o),new Date(a))},A.prototype.toBuffer=function(){var t=S.alloc(32);return t.writeUInt32LE(this.size,0),t.writeUInt32LE(this.mode,4),t.writeDoubleLE(this.atime.getTime(),8),t.writeDoubleLE(this.mtime.getTime(),16),t.writeDoubleLE(this.ctime.getTime(),24),t},A.prototype.clone=function(){return new A(this.mode&61440,this.size,this.mode&4095,this.atime,this.mtime,this.ctime)},A.prototype.isFile=function(){return(this.mode&61440)===D.FILE},A.prototype.isDirectory=function(){return(this.mode&61440)===D.DIRECTORY},A.prototype.isSymbolicLink=function(){return(this.mode&61440)===D.SYMLINK},A.prototype.chmod=function(t){this.mode=this.mode&61440|t},A.prototype.isSocket=function(){return!1},A.prototype.isBlockDevice=function(){return!1},A.prototype.isCharacterDevice=function(){return!1},A.prototype.isFIFO=function(){return!1};var $=function(n,t){return n};function P(n){if(n)return n;throw new u(f.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function W(n,t){switch(typeof n){case"number":return n;case"string":var r=parseInt(n,8);return isNaN(r)?t:r;default:return t}}function pt(n){if(n instanceof Date)return n;if(typeof n=="number")return new Date(n*1e3);throw new u(f.EINVAL,"Invalid time.")}function G(n){if(n.indexOf("\0")>=0)throw new u(f.EINVAL,"Path must be a string without null bytes.");if(n==="")throw new u(f.EINVAL,"Path must not be empty.");return p.resolve(n)}function Ft(n,t,r,e){switch(typeof n){case"object":return{encoding:typeof n.encoding<"u"?n.encoding:t,flag:typeof n.flag<"u"?n.flag:r,mode:W(n.mode,e)};case"string":return{encoding:n,flag:r,mode:e};default:return{encoding:t,flag:r,mode:e}}}function dt(){}var B=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};B.prototype.initialize=function(t){if(!t.constructor.isAvailable())throw new u(f.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=t},B.prototype._toUnixTimestamp=function(t){if(typeof t=="number")return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},B.prototype.getRootFS=function(){return this.root?this.root:null},B.prototype.rename=function(t,r,e){e===void 0&&(e=dt);var i=$(e,1);try{P(this.root).rename(G(t),G(r),i)}catch(o){i(o)}},B.prototype.renameSync=function(t,r){P(this.root).renameSync(G(t),G(r))},B.prototype.exists=function(t,r){r===void 0&&(r=dt);var e=$(r,1);try{return P(this.root).exists(G(t),e)}catch{return e(!1)}},B.prototype.existsSync=function(t){try{return P(this.root).existsSync(G(t))}catch{return!1}},B.prototype.stat=function(t,r){r===void 0&&(r=dt);var e=$(r,2);try{return P(this.root).stat(G(t),!1,e)}catch(i){return e(i)}},B.prototype.statSync=function(t){return P(this.root).statSync(G(t),!1)},B.prototype.lstat=function(t,r){r===void 0&&(r=dt);var e=$(r,2);try{return P(this.root).stat(G(t),!0,e)}catch(i){return e(i)}},B.prototype.lstatSync=function(t){return P(this.root).statSync(G(t),!0)},B.prototype.truncate=function(t,r,e){r===void 0&&(r=0),e===void 0&&(e=dt);var i=0;typeof r=="function"?e=r:typeof r=="number"&&(i=r);var o=$(e,1);try{if(i<0)throw new u(f.EINVAL);return P(this.root).truncate(G(t),i,o)}catch(a){return o(a)}},B.prototype.truncateSync=function(t,r){if(r===void 0&&(r=0),r<0)throw new u(f.EINVAL);return P(this.root).truncateSync(G(t),r)},B.prototype.unlink=function(t,r){r===void 0&&(r=dt);var e=$(r,1);try{return P(this.root).unlink(G(t),e)}catch(i){return e(i)}},B.prototype.unlinkSync=function(t){return P(this.root).unlinkSync(G(t))},B.prototype.open=function(t,r,e,i){var o=this;i===void 0&&(i=dt);var a=W(e,420);i=typeof e=="function"?e:i;var s=$(i,2);try{P(this.root).open(G(t),k.getFileFlag(r),a,function(h,d){d?s(h,o.getFdForFile(d)):s(h)})}catch(h){s(h)}},B.prototype.openSync=function(t,r,e){return e===void 0&&(e=420),this.getFdForFile(P(this.root).openSync(G(t),k.getFileFlag(r),W(e,420)))},B.prototype.readFile=function(t,r,e){r===void 0&&(r={}),e===void 0&&(e=dt);var i=Ft(r,null,"r",null);e=typeof r=="function"?r:e;var o=$(e,2);try{var a=k.getFileFlag(i.flag);return a.isReadable()?P(this.root).readFile(G(t),i.encoding,a,o):o(new u(f.EINVAL,"Flag passed to readFile must allow for reading."))}catch(s){return o(s)}},B.prototype.readFileSync=function(t,r){r===void 0&&(r={});var e=Ft(r,null,"r",null),i=k.getFileFlag(e.flag);if(!i.isReadable())throw new u(f.EINVAL,"Flag passed to readFile must allow for reading.");return P(this.root).readFileSync(G(t),e.encoding,i)},B.prototype.writeFile=function(t,r,e,i){e===void 0&&(e={}),i===void 0&&(i=dt);var o=Ft(e,"utf8","w",420);i=typeof e=="function"?e:i;var a=$(i,1);try{var s=k.getFileFlag(o.flag);return s.isWriteable()?P(this.root).writeFile(G(t),r,o.encoding,s,o.mode,a):a(new u(f.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(h){return a(h)}},B.prototype.writeFileSync=function(t,r,e){var i=Ft(e,"utf8","w",420),o=k.getFileFlag(i.flag);if(!o.isWriteable())throw new u(f.EINVAL,"Flag passed to writeFile must allow for writing.");return P(this.root).writeFileSync(G(t),r,i.encoding,o,i.mode)},B.prototype.appendFile=function(t,r,e,i){i===void 0&&(i=dt);var o=Ft(e,"utf8","a",420);i=typeof e=="function"?e:i;var a=$(i,1);try{var s=k.getFileFlag(o.flag);if(!s.isAppendable())return a(new u(f.EINVAL,"Flag passed to appendFile must allow for appending."));P(this.root).appendFile(G(t),r,o.encoding,s,o.mode,a)}catch(h){a(h)}},B.prototype.appendFileSync=function(t,r,e){var i=Ft(e,"utf8","a",420),o=k.getFileFlag(i.flag);if(!o.isAppendable())throw new u(f.EINVAL,"Flag passed to appendFile must allow for appending.");return P(this.root).appendFileSync(G(t),r,i.encoding,o,i.mode)},B.prototype.fstat=function(t,r){r===void 0&&(r=dt);var e=$(r,2);try{var i=this.fd2file(t);i.stat(e)}catch(o){e(o)}},B.prototype.fstatSync=function(t){return this.fd2file(t).statSync()},B.prototype.close=function(t,r){var e=this;r===void 0&&(r=dt);var i=$(r,1);try{this.fd2file(t).close(function(o){o||e.closeFd(t),i(o)})}catch(o){i(o)}},B.prototype.closeSync=function(t){this.fd2file(t).closeSync(),this.closeFd(t)},B.prototype.ftruncate=function(t,r,e){e===void 0&&(e=dt);var i=typeof r=="number"?r:0;e=typeof r=="function"?r:e;var o=$(e,1);try{var a=this.fd2file(t);if(i<0)throw new u(f.EINVAL);a.truncate(i,o)}catch(s){o(s)}},B.prototype.ftruncateSync=function(t,r){r===void 0&&(r=0);var e=this.fd2file(t);if(r<0)throw new u(f.EINVAL);e.truncateSync(r)},B.prototype.fsync=function(t,r){r===void 0&&(r=dt);var e=$(r,1);try{this.fd2file(t).sync(e)}catch(i){e(i)}},B.prototype.fsyncSync=function(t){this.fd2file(t).syncSync()},B.prototype.fdatasync=function(t,r){r===void 0&&(r=dt);var e=$(r,1);try{this.fd2file(t).datasync(e)}catch(i){e(i)}},B.prototype.fdatasyncSync=function(t){this.fd2file(t).datasyncSync()},B.prototype.write=function(t,r,e,i,o,a){a===void 0&&(a=dt);var s,h,d,O=null;if(typeof r=="string"){var L="utf8";switch(typeof e){case"function":a=e;break;case"number":O=e,L=typeof i=="string"?i:"utf8",a=typeof o=="function"?o:a;break;default:return a=typeof i=="function"?i:typeof o=="function"?o:a,a(new u(f.EINVAL,"Invalid arguments."))}s=S.from(r,L),h=0,d=s.length}else s=r,h=e,d=i,O=typeof o=="number"?o:null,a=typeof o=="function"?o:a;var H=$(a,3);try{var Q=this.fd2file(t);O==null&&(O=Q.getPos()),Q.write(s,h,d,O,H)}catch(et){H(et)}},B.prototype.writeSync=function(t,r,e,i,o){var a,s=0,h,d;if(typeof r=="string"){d=typeof e=="number"?e:null;var O=typeof i=="string"?i:"utf8";s=0,a=S.from(r,O),h=a.length}else a=r,s=e,h=i,d=typeof o=="number"?o:null;var L=this.fd2file(t);return d==null&&(d=L.getPos()),L.writeSync(a,s,h,d)},B.prototype.read=function(t,r,e,i,o,a){a===void 0&&(a=dt);var s,h,d,O,L;if(typeof r=="number"){d=r,s=e;var H=i;a=typeof o=="function"?o:a,h=0,O=S.alloc(d),L=$(function(et,ft,yt){if(et)return a(et);a(et,yt.toString(H),ft)},3)}else O=r,h=e,d=i,s=o,L=$(a,3);try{var Q=this.fd2file(t);s==null&&(s=Q.getPos()),Q.read(O,h,d,s,L)}catch(et){L(et)}},B.prototype.readSync=function(t,r,e,i,o){var a=!1,s,h,d,O,L="utf8";typeof r=="number"?(d=r,O=e,L=i,h=0,s=S.alloc(d),a=!0):(s=r,h=e,d=i,O=o);var H=this.fd2file(t);O==null&&(O=H.getPos());var Q=H.readSync(s,h,d,O);return a?[s.toString(L),Q]:Q},B.prototype.fchown=function(t,r,e,i){i===void 0&&(i=dt);var o=$(i,1);try{this.fd2file(t).chown(r,e,o)}catch(a){o(a)}},B.prototype.fchownSync=function(t,r,e){this.fd2file(t).chownSync(r,e)},B.prototype.fchmod=function(t,r,e){var i=$(e,1);try{var o=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmod(o,i)}catch(a){i(a)}},B.prototype.fchmodSync=function(t,r){var e=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmodSync(e)},B.prototype.futimes=function(t,r,e,i){i===void 0&&(i=dt);var o=$(i,1);try{var a=this.fd2file(t);typeof r=="number"&&(r=new Date(r*1e3)),typeof e=="number"&&(e=new Date(e*1e3)),a.utimes(r,e,o)}catch(s){o(s)}},B.prototype.futimesSync=function(t,r,e){this.fd2file(t).utimesSync(pt(r),pt(e))},B.prototype.rmdir=function(t,r){r===void 0&&(r=dt);var e=$(r,1);try{t=G(t),P(this.root).rmdir(t,e)}catch(i){e(i)}},B.prototype.rmdirSync=function(t){return t=G(t),P(this.root).rmdirSync(t)},B.prototype.mkdir=function(t,r,e){e===void 0&&(e=dt),typeof r=="function"&&(e=r,r=511);var i=$(e,1);try{t=G(t),P(this.root).mkdir(t,r,i)}catch(o){i(o)}},B.prototype.mkdirSync=function(t,r){P(this.root).mkdirSync(G(t),W(r,511))},B.prototype.readdir=function(t,r){r===void 0&&(r=dt);var e=$(r,2);try{t=G(t),P(this.root).readdir(t,e)}catch(i){e(i)}},B.prototype.readdirSync=function(t){return t=G(t),P(this.root).readdirSync(t)},B.prototype.link=function(t,r,e){e===void 0&&(e=dt);var i=$(e,1);try{t=G(t),r=G(r),P(this.root).link(t,r,i)}catch(o){i(o)}},B.prototype.linkSync=function(t,r){return t=G(t),r=G(r),P(this.root).linkSync(t,r)},B.prototype.symlink=function(t,r,e,i){i===void 0&&(i=dt);var o=typeof e=="string"?e:"file";i=typeof e=="function"?e:i;var a=$(i,1);try{if(o!=="file"&&o!=="dir")return a(new u(f.EINVAL,"Invalid type: "+o));t=G(t),r=G(r),P(this.root).symlink(t,r,o,a)}catch(s){a(s)}},B.prototype.symlinkSync=function(t,r,e){if(!e)e="file";else if(e!=="file"&&e!=="dir")throw new u(f.EINVAL,"Invalid type: "+e);return t=G(t),r=G(r),P(this.root).symlinkSync(t,r,e)},B.prototype.readlink=function(t,r){r===void 0&&(r=dt);var e=$(r,2);try{t=G(t),P(this.root).readlink(t,e)}catch(i){e(i)}},B.prototype.readlinkSync=function(t){return t=G(t),P(this.root).readlinkSync(t)},B.prototype.chown=function(t,r,e,i){i===void 0&&(i=dt);var o=$(i,1);try{t=G(t),P(this.root).chown(t,!1,r,e,o)}catch(a){o(a)}},B.prototype.chownSync=function(t,r,e){t=G(t),P(this.root).chownSync(t,!1,r,e)},B.prototype.lchown=function(t,r,e,i){i===void 0&&(i=dt);var o=$(i,1);try{t=G(t),P(this.root).chown(t,!0,r,e,o)}catch(a){o(a)}},B.prototype.lchownSync=function(t,r,e){t=G(t),P(this.root).chownSync(t,!0,r,e)},B.prototype.chmod=function(t,r,e){e===void 0&&(e=dt);var i=$(e,1);try{var o=W(r,-1);if(o<0)throw new u(f.EINVAL,"Invalid mode.");P(this.root).chmod(G(t),!1,o,i)}catch(a){i(a)}},B.prototype.chmodSync=function(t,r){var e=W(r,-1);if(e<0)throw new u(f.EINVAL,"Invalid mode.");t=G(t),P(this.root).chmodSync(t,!1,e)},B.prototype.lchmod=function(t,r,e){e===void 0&&(e=dt);var i=$(e,1);try{var o=W(r,-1);if(o<0)throw new u(f.EINVAL,"Invalid mode.");P(this.root).chmod(G(t),!0,o,i)}catch(a){i(a)}},B.prototype.lchmodSync=function(t,r){var e=W(r,-1);if(e<1)throw new u(f.EINVAL,"Invalid mode.");P(this.root).chmodSync(G(t),!0,e)},B.prototype.utimes=function(t,r,e,i){i===void 0&&(i=dt);var o=$(i,1);try{P(this.root).utimes(G(t),pt(r),pt(e),o)}catch(a){o(a)}},B.prototype.utimesSync=function(t,r,e){P(this.root).utimesSync(G(t),pt(r),pt(e))},B.prototype.realpath=function(t,r,e){e===void 0&&(e=dt);var i=typeof r=="object"?r:{};e=typeof r=="function"?r:dt;var o=$(e,2);try{t=G(t),P(this.root).realpath(t,i,o)}catch(a){o(a)}},B.prototype.realpathSync=function(t,r){return r===void 0&&(r={}),t=G(t),P(this.root).realpathSync(t,r)},B.prototype.watchFile=function(t,r,e){throw new u(f.ENOTSUP)},B.prototype.unwatchFile=function(t,r){throw new u(f.ENOTSUP)},B.prototype.watch=function(t,r,e){throw new u(f.ENOTSUP)},B.prototype.access=function(t,r,e){throw new u(f.ENOTSUP)},B.prototype.accessSync=function(t,r){throw new u(f.ENOTSUP)},B.prototype.createReadStream=function(t,r){throw new u(f.ENOTSUP)},B.prototype.createWriteStream=function(t,r){throw new u(f.ENOTSUP)},B.prototype.wrapCallbacks=function(t){$=t},B.prototype.getFdForFile=function(t){var r=this.nextFd++;return this.fdMap[r]=t,r},B.prototype.fd2file=function(t){var r=this.fdMap[t];if(r)return r;throw new u(f.EBADF,"Invalid file descriptor.")},B.prototype.closeFd=function(t){delete this.fdMap[t]},B.Stats=A;var tt=new B,st={},Rt=B.prototype;Object.keys(Rt).forEach(function(n){typeof tt[n]=="function"?st[n]=function(){return tt[n].apply(tt,arguments)}:st[n]=tt[n]}),st.changeFSModule=function(n){tt=n},st.getFSModule=function(){return tt},st.FS=B;function vt(n,t,r,e,i){return n<t||r<t?n>r?r+1:n+1:e===i?t:t+1}function At(n,t){if(n===t)return 0;if(n.length>t.length){var r=n;n=t,t=r}for(var e=n.length,i=t.length;e>0&&n.charCodeAt(e-1)===t.charCodeAt(i-1);)e--,i--;for(var o=0;o<e&&n.charCodeAt(o)===t.charCodeAt(o);)o++;if(e-=o,i-=o,e===0||i===1)return i;for(var a=new Array(e<<1),s=0;s<e;)a[e+s]=n.charCodeAt(o+s),a[s]=++s;var h,d,O,L,H;for(h=0;h+3<i;)for(var Q=t.charCodeAt(o+(d=h)),et=t.charCodeAt(o+(O=h+1)),ft=t.charCodeAt(o+(L=h+2)),yt=t.charCodeAt(o+(H=h+3)),It=h+=4,Vt=0;Vt<e;){var se=a[e+Vt],Ne=a[Vt];d=vt(Ne,d,O,Q,se),O=vt(d,O,L,et,se),L=vt(O,L,H,ft,se),It=vt(L,H,It,yt,se),a[Vt++]=It,H=L,L=O,O=d,d=Ne}for(var Re=0;h<i;){var ar=t.charCodeAt(o+(d=h));Re=++h;for(var Ae=0;Ae<e;Ae++){var Ce=a[Ae];a[Ae]=Re=Ce<d||Re<d?Ce>Re?Re+1:Ce+1:ar===a[e+Ae]?d:d+1,d=Ce}}return Re}function Ot(n,t,r){n&&console.warn("["+t+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+t+".Create("+JSON.stringify(r)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}var St=typeof navigator<"u"&&!!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident")!==-1),qt=typeof window>"u";function U(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function M(n,t,r){r.existsSync(n)||(M(p.dirname(n),t,r),r.mkdirSync(n,t))}function J(n){var t=ut(n),r=t.byteOffset,e=t.byteLength;return r===0&&e===t.buffer.byteLength?t.buffer:t.buffer.slice(r,r+e)}function ut(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function xt(n){return n instanceof S?n:n instanceof Uint8Array?wt(n):S.from(n)}function wt(n){return n instanceof S?n:n.byteOffset===0&&n.byteLength===n.buffer.byteLength?Et(n.buffer):S.from(n.buffer,n.byteOffset,n.byteLength)}function Et(n){return S.from(n)}function bt(n,t,r){if(t===void 0&&(t=0),r===void 0&&(r=n.length),t<0||r<0||r>n.length||t>r)throw new TypeError("Invalid slice bounds on buffer of length "+n.length+": ["+t+", "+r+"]");if(n.length===0)return Mt();var e=ut(n),i=n[0],o=(i+1)%255;return n[0]=o,e[0]===o?(e[0]=i,wt(e.slice(t,r))):(n[0]=i,wt(e.subarray(t,r)))}var Wt=null;function Mt(){return Wt||(Wt=S.alloc(0))}function F(n,t){S.isBuffer(n)?t():t(new u(f.EINVAL,"option must be a Buffer."))}function I(n,t,r){var e=n.Options,i=n.Name,o=0,a=!1,s=!1;function h(H){a||(H&&(a=!0,r(H)),o--,o===0&&s&&r())}var d=function(H){if(e.hasOwnProperty(H)){var Q=e[H],et=t[H];if(et==null){if(!Q.optional){var ft=Object.keys(t).filter(function(It){return!(It in e)}).map(function(It){return{str:It,distance:At(H,It)}}).filter(function(It){return It.distance<5}).sort(function(It,Vt){return It.distance-Vt.distance});return a?{}:(a=!0,{v:r(new u(f.EINVAL,"["+i+"] Required option '"+H+"' not provided."+(ft.length>0?" You provided unrecognized option '"+ft[0].str+"'; perhaps you meant to type '"+H+"'.":"")+`
Option description: `+Q.description))})}}else{var yt=!1;if(Array.isArray(Q.type)?yt=Q.type.indexOf(typeof et)!==-1:yt=typeof et===Q.type,yt)Q.validator&&(o++,Q.validator(et,h));else return a?{}:(a=!0,{v:r(new u(f.EINVAL,"["+i+"] Value provided for option "+H+" is not the proper type. Expected "+(Array.isArray(Q.type)?"one of {"+Q.type.join(", ")+"}":Q.type)+", but received "+typeof et+`
Option description: `+Q.description))})}}};for(var O in e){var L=d(O);if(L)return L.v}s=!0,o===0&&!a&&r()}var Y=Object.freeze({deprecationMessage:Ot,isIE:St,isWebWorker:qt,fail:U,mkdirpSync:M,buffer2ArrayBuffer:J,buffer2Uint8array:ut,arrayish2Buffer:xt,uint8Array2Buffer:wt,arrayBuffer2Buffer:Et,copyingSlice:bt,emptyBuffer:Mt,bufferValidator:F,checkOptions:I}),rt=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};rt.prototype.open=function(t){var r=this.fs.realPath(t.node),e=this.FS;try{e.isFile(t.node.mode)&&(t.nfd=this.nodefs.openSync(r,this.fs.flagsToPermissionString(t.flags)))}catch(i){throw i.code?new e.ErrnoError(this.ERRNO_CODES[i.code]):i}},rt.prototype.close=function(t){var r=this.FS;try{r.isFile(t.node.mode)&&t.nfd&&this.nodefs.closeSync(t.nfd)}catch(e){throw e.code?new r.ErrnoError(this.ERRNO_CODES[e.code]):e}},rt.prototype.read=function(t,r,e,i,o){try{return this.nodefs.readSync(t.nfd,wt(r),e,i,o)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},rt.prototype.write=function(t,r,e,i,o){try{return this.nodefs.writeSync(t.nfd,wt(r),e,i,o)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},rt.prototype.llseek=function(t,r,e){var i=r;if(e===1)i+=t.position;else if(e===2&&this.FS.isFile(t.node.mode))try{var o=this.nodefs.fstatSync(t.nfd);i+=o.size}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}if(i<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return t.position=i,i};var ht=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};ht.prototype.getattr=function(t){var r=this.fs.realPath(t),e;try{e=this.nodefs.lstatSync(r)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}return{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},ht.prototype.setattr=function(t,r){var e=this.fs.realPath(t);try{if(r.mode!==void 0&&(this.nodefs.chmodSync(e,r.mode),t.mode=r.mode),r.timestamp!==void 0){var i=new Date(r.timestamp);this.nodefs.utimesSync(e,i,i)}}catch(o){if(!o.code)throw o;if(o.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[o.code])}if(r.size!==void 0)try{this.nodefs.truncateSync(e,r.size)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},ht.prototype.lookup=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r),i=this.fs.getMode(e);return this.fs.createNode(t,r,i)},ht.prototype.mknod=function(t,r,e,i){var o=this.fs.createNode(t,r,e,i),a=this.fs.realPath(o);try{this.FS.isDir(o.mode)?this.nodefs.mkdirSync(a,o.mode):this.nodefs.writeFileSync(a,"",{mode:o.mode})}catch(s){throw s.code?new this.FS.ErrnoError(this.ERRNO_CODES[s.code]):s}return o},ht.prototype.rename=function(t,r,e){var i=this.fs.realPath(t),o=this.PATH.join2(this.fs.realPath(r),e);try{this.nodefs.renameSync(i,o),t.name=e,t.parent=r}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},ht.prototype.unlink=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.unlinkSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},ht.prototype.rmdir=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.rmdirSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},ht.prototype.readdir=function(t){var r=this.fs.realPath(t);try{var e=this.nodefs.readdirSync(r);return e.push(".",".."),e}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},ht.prototype.symlink=function(t,r,e){var i=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.symlinkSync(e,i)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},ht.prototype.readlink=function(t){var r=this.fs.realPath(t);try{return this.nodefs.readlinkSync(r)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}};var _t=function(t,r,e,i){t===void 0&&(t=self.FS),r===void 0&&(r=self.PATH),e===void 0&&(e=self.ERRNO_CODES),i===void 0&&(i=st),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=i,this.FS=t,this.PATH=r,this.ERRNO_CODES=e,this.node_ops=new ht(this),this.stream_ops=new rt(this)};_t.prototype.mount=function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},_t.prototype.createNode=function(t,r,e,i){var o=this.FS;if(!o.isDir(e)&&!o.isFile(e)&&!o.isLink(e))throw new o.ErrnoError(this.ERRNO_CODES.EINVAL);var a=o.createNode(t,r,e);return a.node_ops=this.node_ops,a.stream_ops=this.stream_ops,a},_t.prototype.getMode=function(t){var r;try{r=this.nodefs.lstatSync(t)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}return r.mode},_t.prototype.realPath=function(t){for(var r=[];t.parent!==t;)r.push(t.name),t=t.parent;return r.push(t.mount.opts.root),r.reverse(),this.PATH.join.apply(null,r)},_t.prototype.flagsToPermissionString=function(t){var r=typeof t=="string"?parseInt(t,10):t;return r&=8191,r in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[r]:t},_t.prototype.getNodeFS=function(){return this.nodefs},_t.prototype.getFS=function(){return this.FS},_t.prototype.getPATH=function(){return this.PATH},_t.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var K=function(){};K.prototype.supportsLinks=function(){return!1},K.prototype.diskSpace=function(t,r){r(0,0)},K.prototype.openFile=function(t,r,e){throw new u(f.ENOTSUP)},K.prototype.createFile=function(t,r,e,i){throw new u(f.ENOTSUP)},K.prototype.open=function(t,r,e,i){var o=this,a=function(s,h){if(s)switch(r.pathNotExistsAction()){case x.CREATE_FILE:return o.stat(p.dirname(t),!1,function(d,O){d?i(d):O&&!O.isDirectory()?i(u.ENOTDIR(p.dirname(t))):o.createFile(t,r,e,i)});case x.THROW_EXCEPTION:return i(u.ENOENT(t));default:return i(new u(f.EINVAL,"Invalid FileFlag object."))}else{if(h&&h.isDirectory())return i(u.EISDIR(t));switch(r.pathExistsAction()){case x.THROW_EXCEPTION:return i(u.EEXIST(t));case x.TRUNCATE_FILE:return o.openFile(t,r,function(d,O){d?i(d):O?O.truncate(0,function(){O.sync(function(){i(null,O)})}):U()});case x.NOP:return o.openFile(t,r,i);default:return i(new u(f.EINVAL,"Invalid FileFlag object."))}}};this.stat(t,!1,a)},K.prototype.rename=function(t,r,e){e(new u(f.ENOTSUP))},K.prototype.renameSync=function(t,r){throw new u(f.ENOTSUP)},K.prototype.stat=function(t,r,e){e(new u(f.ENOTSUP))},K.prototype.statSync=function(t,r){throw new u(f.ENOTSUP)},K.prototype.openFileSync=function(t,r,e){throw new u(f.ENOTSUP)},K.prototype.createFileSync=function(t,r,e){throw new u(f.ENOTSUP)},K.prototype.openSync=function(t,r,e){var i;try{i=this.statSync(t,!1)}catch{switch(r.pathNotExistsAction()){case x.CREATE_FILE:var o=this.statSync(p.dirname(t),!1);if(!o.isDirectory())throw u.ENOTDIR(p.dirname(t));return this.createFileSync(t,r,e);case x.THROW_EXCEPTION:throw u.ENOENT(t);default:throw new u(f.EINVAL,"Invalid FileFlag object.")}}if(i.isDirectory())throw u.EISDIR(t);switch(r.pathExistsAction()){case x.THROW_EXCEPTION:throw u.EEXIST(t);case x.TRUNCATE_FILE:return this.unlinkSync(t),this.createFileSync(t,r,i.mode);case x.NOP:return this.openFileSync(t,r,e);default:throw new u(f.EINVAL,"Invalid FileFlag object.")}},K.prototype.unlink=function(t,r){r(new u(f.ENOTSUP))},K.prototype.unlinkSync=function(t){throw new u(f.ENOTSUP)},K.prototype.rmdir=function(t,r){r(new u(f.ENOTSUP))},K.prototype.rmdirSync=function(t){throw new u(f.ENOTSUP)},K.prototype.mkdir=function(t,r,e){e(new u(f.ENOTSUP))},K.prototype.mkdirSync=function(t,r){throw new u(f.ENOTSUP)},K.prototype.readdir=function(t,r){r(new u(f.ENOTSUP))},K.prototype.readdirSync=function(t){throw new u(f.ENOTSUP)},K.prototype.exists=function(t,r){this.stat(t,null,function(e){r(!e)})},K.prototype.existsSync=function(t){try{return this.statSync(t,!0),!0}catch{return!1}},K.prototype.realpath=function(t,r,e){if(this.supportsLinks())for(var i=t.split(p.sep),o=0;o<i.length;o++){var a=i.slice(0,o+1);i[o]=p.join.apply(null,a)}else this.exists(t,function(s){s?e(null,t):e(u.ENOENT(t))})},K.prototype.realpathSync=function(t,r){if(this.supportsLinks()){for(var e=t.split(p.sep),i=0;i<e.length;i++){var o=e.slice(0,i+1);e[i]=p.join.apply(p,o)}return e.join(p.sep)}else{if(this.existsSync(t))return t;throw u.ENOENT(t)}},K.prototype.truncate=function(t,r,e){this.open(t,k.getFileFlag("r+"),420,function(i,o){if(i)return e(i);o.truncate(r,function(a){o.close(function(s){e(a||s)})})})},K.prototype.truncateSync=function(t,r){var e=this.openSync(t,k.getFileFlag("r+"),420);try{e.truncateSync(r)}catch(i){throw i}finally{e.closeSync()}},K.prototype.readFile=function(t,r,e,i){var o=i;this.open(t,e,420,function(a,s){if(a)return i(a);i=function(h,d){s.close(function(O){return h||(h=O),o(h,d)})},s.stat(function(h,d){if(h)return i(h);var O=S.alloc(d.size);s.read(O,0,d.size,0,function(L){if(L)return i(L);if(r===null)return i(L,O);try{i(null,O.toString(r))}catch(H){i(H)}})})})},K.prototype.readFileSync=function(t,r,e){var i=this.openSync(t,e,420);try{var o=i.statSync(),a=S.alloc(o.size);return i.readSync(a,0,o.size,0),i.closeSync(),r===null?a:a.toString(r)}finally{i.closeSync()}},K.prototype.writeFile=function(t,r,e,i,o,a){var s=a;this.open(t,i,420,function(h,d){if(h)return a(h);a=function(O){d.close(function(L){s(O||L)})};try{typeof r=="string"&&(r=S.from(r,e))}catch(O){return a(O)}d.write(r,0,r.length,0,a)})},K.prototype.writeFileSync=function(t,r,e,i,o){var a=this.openSync(t,i,o);try{typeof r=="string"&&(r=S.from(r,e)),a.writeSync(r,0,r.length,0)}finally{a.closeSync()}},K.prototype.appendFile=function(t,r,e,i,o,a){var s=a;this.open(t,i,o,function(h,d){if(h)return a(h);a=function(O){d.close(function(L){s(O||L)})},typeof r=="string"&&(r=S.from(r,e)),d.write(r,0,r.length,null,a)})},K.prototype.appendFileSync=function(t,r,e,i,o){var a=this.openSync(t,i,o);try{typeof r=="string"&&(r=S.from(r,e)),a.writeSync(r,0,r.length,null)}finally{a.closeSync()}},K.prototype.chmod=function(t,r,e,i){i(new u(f.ENOTSUP))},K.prototype.chmodSync=function(t,r,e){throw new u(f.ENOTSUP)},K.prototype.chown=function(t,r,e,i,o){o(new u(f.ENOTSUP))},K.prototype.chownSync=function(t,r,e,i){throw new u(f.ENOTSUP)},K.prototype.utimes=function(t,r,e,i){i(new u(f.ENOTSUP))},K.prototype.utimesSync=function(t,r,e){throw new u(f.ENOTSUP)},K.prototype.link=function(t,r,e){e(new u(f.ENOTSUP))},K.prototype.linkSync=function(t,r){throw new u(f.ENOTSUP)},K.prototype.symlink=function(t,r,e,i){i(new u(f.ENOTSUP))},K.prototype.symlinkSync=function(t,r,e){throw new u(f.ENOTSUP)},K.prototype.readlink=function(t,r){r(new u(f.ENOTSUP))},K.prototype.readlinkSync=function(t){throw new u(f.ENOTSUP)};var re=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.supportsSynch=function(){return!0},t.prototype.rename=function(e,i,o){try{this.renameSync(e,i),o()}catch(a){o(a)}},t.prototype.stat=function(e,i,o){try{o(null,this.statSync(e,i))}catch(a){o(a)}},t.prototype.open=function(e,i,o,a){try{a(null,this.openSync(e,i,o))}catch(s){a(s)}},t.prototype.unlink=function(e,i){try{this.unlinkSync(e),i()}catch(o){i(o)}},t.prototype.rmdir=function(e,i){try{this.rmdirSync(e),i()}catch(o){i(o)}},t.prototype.mkdir=function(e,i,o){try{this.mkdirSync(e,i),o()}catch(a){o(a)}},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.chmod=function(e,i,o,a){try{this.chmodSync(e,i,o),a()}catch(s){a(s)}},t.prototype.chown=function(e,i,o,a,s){try{this.chownSync(e,i,o,a),s()}catch(h){s(h)}},t.prototype.utimes=function(e,i,o,a){try{this.utimesSync(e,i,o),a()}catch(s){a(s)}},t.prototype.link=function(e,i,o){try{this.linkSync(e,i),o()}catch(a){o(a)}},t.prototype.symlink=function(e,i,o,a){try{this.symlinkSync(e,i,o),a()}catch(s){a(s)}},t.prototype.readlink=function(e,i){try{i(null,this.readlinkSync(e))}catch(o){i(o)}},t}(K),gt=function(){};gt.prototype.sync=function(t){t(new u(f.ENOTSUP))},gt.prototype.syncSync=function(){throw new u(f.ENOTSUP)},gt.prototype.datasync=function(t){this.sync(t)},gt.prototype.datasyncSync=function(){return this.syncSync()},gt.prototype.chown=function(t,r,e){e(new u(f.ENOTSUP))},gt.prototype.chownSync=function(t,r){throw new u(f.ENOTSUP)},gt.prototype.chmod=function(t,r){r(new u(f.ENOTSUP))},gt.prototype.chmodSync=function(t){throw new u(f.ENOTSUP)},gt.prototype.utimes=function(t,r,e){e(new u(f.ENOTSUP))},gt.prototype.utimesSync=function(t,r){throw new u(f.ENOTSUP)};var oe=function(n){function t(r,e,i,o,a){if(n.call(this),this._pos=0,this._dirty=!1,this._fs=r,this._path=e,this._flag=i,this._stat=o,a?this._buffer=a:this._buffer=Mt(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getBuffer=function(){return this._buffer},t.prototype.getStats=function(){return this._stat},t.prototype.getFlag=function(){return this._flag},t.prototype.getPath=function(){return this._path},t.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},t.prototype.advancePos=function(e){return this._pos+=e},t.prototype.setPos=function(e){return this._pos=e},t.prototype.sync=function(e){try{this.syncSync(),e()}catch(i){e(i)}},t.prototype.syncSync=function(){throw new u(f.ENOTSUP)},t.prototype.close=function(e){try{this.closeSync(),e()}catch(i){e(i)}},t.prototype.closeSync=function(){throw new u(f.ENOTSUP)},t.prototype.stat=function(e){try{e(null,this._stat.clone())}catch(i){e(i)}},t.prototype.statSync=function(){return this._stat.clone()},t.prototype.truncate=function(e,i){try{this.truncateSync(e),this._flag.isSynchronous()&&!st.getRootFS().supportsSynch()&&this.sync(i),i()}catch(o){return i(o)}},t.prototype.truncateSync=function(e){if(this._dirty=!0,!this._flag.isWriteable())throw new u(f.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,e>this._buffer.length){var i=S.alloc(e-this._buffer.length,0);this.writeSync(i,0,i.length,this._buffer.length),this._flag.isSynchronous()&&st.getRootFS().supportsSynch()&&this.syncSync();return}this._stat.size=e;var o=S.alloc(e);this._buffer.copy(o,0,0,e),this._buffer=o,this._flag.isSynchronous()&&st.getRootFS().supportsSynch()&&this.syncSync()},t.prototype.write=function(e,i,o,a,s){try{s(null,this.writeSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.writeSync=function(e,i,o,a){if(this._dirty=!0,a==null&&(a=this.getPos()),!this._flag.isWriteable())throw new u(f.EPERM,"File not opened with a writeable mode.");var s=a+o;if(s>this._stat.size&&(this._stat.size=s,s>this._buffer.length)){var h=S.alloc(s);this._buffer.copy(h),this._buffer=h}var d=e.copy(this._buffer,a,i,i+o);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),d):(this.setPos(a+d),d)},t.prototype.read=function(e,i,o,a,s){try{s(null,this.readSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.readSync=function(e,i,o,a){if(!this._flag.isReadable())throw new u(f.EPERM,"File not opened with a readable mode.");a==null&&(a=this.getPos());var s=a+o;s>this._stat.size&&(o=this._stat.size-a);var h=this._buffer.copy(e,i,a,a+o);return this._stat.atime=new Date,this._pos=a+o,h},t.prototype.chmod=function(e,i){try{this.chmodSync(e),i()}catch(o){i(o)}},t.prototype.chmodSync=function(e){if(!this._fs.supportsProps())throw new u(f.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()},t.prototype.isDirty=function(){return this._dirty},t.prototype.resetDirty=function(){this._dirty=!1},t}(gt),fe=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.close=function(e){e()},t.prototype.closeSync=function(){},t}(oe),_e=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(oe),m=function(n){function t(r,e,i){if(i===void 0&&(i=!0),n.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=r,this._async=e,!r.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");Ot(i,t.Name,{sync:"sync file system instance",async:"async file system instance"})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.sync,e.async,!1);o.initialize(function(a){a?i(a):i(null,o)},!1)}catch(a){i(a)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){return t.Name},t.prototype._syncSync=function(e){this._sync.writeFileSync(e.getPath(),e.getBuffer(),null,k.getFileFlag("w"),e.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[e.getPath(),e.getBuffer(),null,e.getFlag(),e.getStats().mode]})},t.prototype.initialize=function(e,i){var o=this;i===void 0&&(i=!0),i&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var a=this._initializeCallbacks,s=function(L){o._isInitialized=!L,o._initializeCallbacks=[],a.forEach(function(H){return H(L)})};if(this._isInitialized)e();else if(a.push(e)===1){var h=function(L,H,Q){L!=="/"&&o._sync.mkdirSync(L,H),o._async.readdir(L,function(et,ft){var yt=0;function It(Vt){Vt?Q(Vt):yt<ft.length?(O(p.join(L,ft[yt]),It),yt++):Q()}et?Q(et):It()})},d=function(L,H,Q){o._async.readFile(L,null,k.getFileFlag("r"),function(et,ft){if(et)Q(et);else try{o._sync.writeFileSync(L,ft,null,k.getFileFlag("w"),H)}catch(yt){et=yt}finally{Q(et)}})},O=function(L,H){o._async.stat(L,!1,function(Q,et){Q?H(Q):et.isDirectory()?h(L,et.mode,H):d(L,et.mode,H)})};h("/",0,s)}},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},t.prototype.renameSync=function(e,i){this.checkInitialized(),this._sync.renameSync(e,i),this.enqueueOp({apiMethod:"rename",arguments:[e,i]})},t.prototype.statSync=function(e,i){return this.checkInitialized(),this._sync.statSync(e,i)},t.prototype.openSync=function(e,i,o){this.checkInitialized();var a=this._sync.openSync(e,i,o);return a.closeSync(),new _e(this,e,i,this._sync.statSync(e,!1),this._sync.readFileSync(e,null,k.getFileFlag("r")))},t.prototype.unlinkSync=function(e){this.checkInitialized(),this._sync.unlinkSync(e),this.enqueueOp({apiMethod:"unlink",arguments:[e]})},t.prototype.rmdirSync=function(e){this.checkInitialized(),this._sync.rmdirSync(e),this.enqueueOp({apiMethod:"rmdir",arguments:[e]})},t.prototype.mkdirSync=function(e,i){this.checkInitialized(),this._sync.mkdirSync(e,i),this.enqueueOp({apiMethod:"mkdir",arguments:[e,i]})},t.prototype.readdirSync=function(e){return this.checkInitialized(),this._sync.readdirSync(e)},t.prototype.existsSync=function(e){return this.checkInitialized(),this._sync.existsSync(e)},t.prototype.chmodSync=function(e,i,o){this.checkInitialized(),this._sync.chmodSync(e,i,o),this.enqueueOp({apiMethod:"chmod",arguments:[e,i,o]})},t.prototype.chownSync=function(e,i,o,a){this.checkInitialized(),this._sync.chownSync(e,i,o,a),this.enqueueOp({apiMethod:"chown",arguments:[e,i,o,a]})},t.prototype.utimesSync=function(e,i,o){this.checkInitialized(),this._sync.utimesSync(e,i,o),this.enqueueOp({apiMethod:"utimes",arguments:[e,i,o]})},t.prototype.checkInitialized=function(){if(!this._isInitialized)throw new u(f.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},t.prototype.enqueueOp=function(e){var i=this;if(this._queue.push(e),!this._queueRunning){this._queueRunning=!0;var o=function(a){if(a&&console.error("WARNING: File system has desynchronized. Received following error: "+a+`
$`),i._queue.length>0){var s=i._queue.shift(),h=s.arguments;h.push(o),i._async[s.apiMethod].apply(i._async,h)}else i._queueRunning=!1};o()}},t}(re);m.Name="AsyncMirror",m.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};function c(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}var l=Math.max;function _(n,t,r){return t=l(t===void 0?n.length-1:t,0),function(){for(var e=arguments,i=-1,o=l(e.length-t,0),a=Array(o);++i<o;)a[i]=e[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=e[i];return s[t]=r(a),c(n,this,s)}}function C(n){return n}function Z(n,t){return _(n,t,C)}var q=function(n){return Z(function(t){var r=t.pop();n.call(this,t,r)})};function kt(n){return Z(function(t,r){var e=q(function(i,o){var a=this;return n(t,function(s,h){s.apply(a,i.concat(h))},o)});return r.length?e.apply(this,r):e})}var Dt=typeof R=="object"&&R&&R.Object===Object&&R,Pt=typeof self=="object"&&self&&self.Object===Object&&self,Gt=Dt||Pt||Function("return this")(),Ct=Gt.Symbol,Fe=Object.prototype,Je=Fe.hasOwnProperty,Ue=Fe.toString,ze=Ct?Ct.toStringTag:void 0;function Cr(n){var t=Je.call(n,ze),r=n[ze];try{n[ze]=void 0;var e=!0}catch{}var i=Ue.call(n);return e&&(t?n[ze]=r:delete n[ze]),i}var Mr=Object.prototype,Pr=Mr.toString;function j(n){return Pr.call(n)}var it="[object Null]",y="[object Undefined]",at=Ct?Ct.toStringTag:void 0;function Bt(n){return n==null?n===void 0?y:it:at&&at in Object(n)?Cr(n):j(n)}function nt(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var ce="[object AsyncFunction]",ot="[object Function]",Jt="[object GeneratorFunction]",X="[object Proxy]";function V(n){if(!nt(n))return!1;var t=Bt(n);return t==ot||t==Jt||t==ce||t==X}var Ke=9007199254740991;function Ut(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Ke}function ct(n){return n!=null&&Ut(n.length)&&!V(n)}var je={};function be(){}function Ht(n){return function(){if(n!==null){var t=n;n=null,t.apply(this,arguments)}}}var Tt=typeof Symbol=="function"&&Symbol.iterator,ne=function(n){return Tt&&n[Tt]&&n[Tt]()};function ue(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function ie(n){return n!=null&&typeof n=="object"}var Qe="[object Arguments]";function We(n){return ie(n)&&Bt(n)==Qe}var Xt=Object.prototype,le=Xt.hasOwnProperty,ee=Xt.propertyIsEnumerable,Ie=We(function(){return arguments}())?We:function(n){return ie(n)&&le.call(n,"callee")&&!ee.call(n,"callee")},me=Array.isArray;function wr(){return!1}var tn=typeof T=="object"&&T&&!T.nodeType&&T,en=tn&&typeof E=="object"&&E&&!E.nodeType&&E,di=en&&en.exports===tn,rn=di?Gt.Buffer:void 0,yi=rn?rn.isBuffer:void 0,vi=yi||wr,gi=9007199254740991,wi=/^(?:0|[1-9]\d*)$/;function mi(n,t){return t=t??gi,!!t&&(typeof n=="number"||wi.test(n))&&n>-1&&n%1==0&&n<t}var Si="[object Arguments]",Ei="[object Array]",_i="[object Boolean]",Fi="[object Date]",Ii="[object Error]",xi="[object Function]",Oi="[object Map]",ki="[object Number]",Ni="[object Object]",Ri="[object RegExp]",bi="[object Set]",Ti="[object String]",Li="[object WeakMap]",Di="[object ArrayBuffer]",Ai="[object DataView]",Ci="[object Float32Array]",Mi="[object Float64Array]",Pi="[object Int8Array]",Bi="[object Int16Array]",Ui="[object Int32Array]",zi="[object Uint8Array]",ji="[object Uint8ClampedArray]",Wi="[object Uint16Array]",Hi="[object Uint32Array]",zt={};zt[Ci]=zt[Mi]=zt[Pi]=zt[Bi]=zt[Ui]=zt[zi]=zt[ji]=zt[Wi]=zt[Hi]=!0,zt[Si]=zt[Ei]=zt[Di]=zt[_i]=zt[Ai]=zt[Fi]=zt[Ii]=zt[xi]=zt[Oi]=zt[ki]=zt[Ni]=zt[Ri]=zt[bi]=zt[Ti]=zt[Li]=!1;function Zi(n){return ie(n)&&Ut(n.length)&&!!zt[Bt(n)]}function Vi(n){return function(t){return n(t)}}var nn=typeof T=="object"&&T&&!T.nodeType&&T,on=nn&&typeof E=="object"&&E&&!E.nodeType&&E,Xi=on&&on.exports===nn,Br=Xi&&Dt.process,an=function(){try{return Br&&Br.binding&&Br.binding("util")}catch{}}(),sn=an&&an.isTypedArray,Yi=sn?Vi(sn):Zi,qi=Object.prototype,Gi=qi.hasOwnProperty;function Ji(n,t){var r=me(n),e=!r&&Ie(n),i=!r&&!e&&vi(n),o=!r&&!e&&!i&&Yi(n),a=r||e||i||o,s=a?ue(n.length,String):[],h=s.length;for(var d in n)(t||Gi.call(n,d))&&!(a&&(d=="length"||i&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||mi(d,h)))&&s.push(d);return s}var Ki=Object.prototype;function Qi(n){var t=n&&n.constructor,r=typeof t=="function"&&t.prototype||Ki;return n===r}function $i(n,t){return function(r){return n(t(r))}}var to=$i(Object.keys,Object),eo=Object.prototype,ro=eo.hasOwnProperty;function no(n){if(!Qi(n))return to(n);var t=[];for(var r in Object(n))ro.call(n,r)&&r!="constructor"&&t.push(r);return t}function io(n){return ct(n)?Ji(n):no(n)}function oo(n){var t=-1,r=n.length;return function(){return++t<r?{value:n[t],key:t}:null}}function ao(n){var t=-1;return function(){var e=n.next();return e.done?null:(t++,{value:e.value,key:t})}}function so(n){var t=io(n),r=-1,e=t.length;return function(){var o=t[++r];return r<e?{value:n[o],key:o}:null}}function fo(n){if(ct(n))return oo(n);var t=ne(n);return t?ao(t):so(n)}function fn(n){return function(){if(n===null)throw new Error("Callback was already called.");var t=n;n=null,t.apply(this,arguments)}}function un(n){return function(t,r,e){if(e=Ht(e||be),n<=0||!t)return e(null);var i=fo(t),o=!1,a=0;function s(d,O){if(a-=1,d)o=!0,e(d);else{if(O===je||o&&a<=0)return o=!0,e(null);h()}}function h(){for(;a<n&&!o;){var d=i();if(d===null){o=!0,a<=0&&e(null);return}a+=1,r(d.value,d.key,fn(s))}}h()}}function cn(n,t,r,e){un(t)(n,r,e)}function Ur(n,t){return function(r,e,i){return n(r,t,e,i)}}function uo(n,t,r){r=Ht(r||be);var e=0,i=0,o=n.length;o===0&&r(null);function a(s,h){s?r(s):(++i===o||h===je)&&r(null)}for(;e<o;e++)t(n[e],e,fn(a))}var co=Ur(cn,1/0),ln=function(n,t,r){var e=ct(n)?uo:co;e(n,t,r)};function lo(n){return function(t,r,e){return n(ln,t,r,e)}}function hn(n,t,r,e){e=e||be,t=t||[];var i=[],o=0;n(t,function(a,s,h){var d=o++;r(a,function(O,L){i[d]=L,h(O)})},function(a){e(a,i)})}var ho=lo(hn);kt(ho);function po(n){return function(t,r,e,i){return n(un(r),t,e,i)}}var yo=po(hn),vo=Ur(yo,1);kt(vo),Z(function(n,t){return Z(function(r){return n.apply(null,t.concat(r))})});function go(n,t){for(var r=-1,e=n==null?0:n.length;++r<e&&t(n[r],r,n)!==!1;);return n}var pn=typeof setImmediate=="function"&&setImmediate,dn=typeof N=="object"&&typeof N.nextTick=="function";function yn(n){setTimeout(n,0)}function vn(n){return Z(function(t,r){n(function(){t.apply(null,r)})})}var mr;pn?mr=setImmediate:dn?mr=N.nextTick:mr=yn,vn(mr);var wo=Ur(cn,1);function mo(n,t,r,e){e=Ht(e||be),wo(n,function(i,o,a){r(t,i,function(s,h){t=h,a(s)})},function(i){e(i,t)})}var So=Z(function(t){return Z(function(r){var e=this,i=r[r.length-1];typeof i=="function"?r.pop():i=be,mo(t,r,function(o,a,s){a.apply(e,o.concat(Z(function(h,d){s(h,d)})))},function(o,a){i.apply(e,[o].concat(a))})})});Z(function(n){return So.apply(null,n.reverse())}),Z(function(n){var t=[null].concat(n);return q(function(r,e){return e.apply(this,t)})});function gn(n){return Z(function(t,r){t.apply(null,r.concat(Z(function(e,i){typeof console=="object"&&(e?console.error&&console.error(e):console[n]&&go(i,function(o){console[n](o)}))})))})}gn("dir");function Eo(n){return function(t,r,e){return n(t,e)}}function wn(n,t,r){ln(n,Eo(t),r)}gn("log");var Sr;dn?Sr=N.nextTick:pn?Sr=setImmediate:Sr=yn,vn(Sr);var he;function _o(){he||(he={},he[Dropbox.ApiError.NETWORK_ERROR]=f.EIO,he[Dropbox.ApiError.INVALID_PARAM]=f.EINVAL,he[Dropbox.ApiError.INVALID_TOKEN]=f.EPERM,he[Dropbox.ApiError.OAUTH_ERROR]=f.EPERM,he[Dropbox.ApiError.NOT_FOUND]=f.ENOENT,he[Dropbox.ApiError.INVALID_METHOD]=f.EINVAL,he[Dropbox.ApiError.NOT_ACCEPTABLE]=f.EINVAL,he[Dropbox.ApiError.CONFLICT]=f.EINVAL,he[Dropbox.ApiError.RATE_LIMITED]=f.EBUSY,he[Dropbox.ApiError.SERVER_ERROR]=f.EBUSY,he[Dropbox.ApiError.OVER_QUOTA]=f.ENOSPC)}function Fo(n){return n&&n.stat.isFile}function Io(n){return n&&n.stat.isFolder}function xo(n){return n==null||typeof n=="object"&&typeof n.byteLength=="number"}var ae=function(t){this._cache={},this._client=t};ae.prototype.readdir=function(t,r){var e=this,i=this.getCachedDirInfo(t);this._wrap(function(o){i!==null&&i.contents?e._client.readdir(t,{contentHash:i.stat.contentHash},o):e._client.readdir(t,o)},function(o,a,s,h){o?o.status===Dropbox.ApiError.NO_CONTENT&&i!==null?r(null,i.contents.slice(0)):r(o):(e.updateCachedDirInfo(t,s,a.slice(0)),h.forEach(function(d){e.updateCachedInfo(p.join(t,d.name),d)}),r(null,a))})},ae.prototype.remove=function(t,r){var e=this;this._wrap(function(i){e._client.remove(t,i)},function(i,o){i||e.updateCachedInfo(t,o),r(i)})},ae.prototype.move=function(t,r,e){var i=this;this._wrap(function(o){i._client.move(t,r,o)},function(o,a){o||(i.deleteCachedInfo(t),i.updateCachedInfo(r,a)),e(o)})},ae.prototype.stat=function(t,r){var e=this;this._wrap(function(i){e._client.stat(t,i)},function(i,o){i||e.updateCachedInfo(t,o),r(i,o)})},ae.prototype.readFile=function(t,r){var e=this,i=this.getCachedFileInfo(t);i!==null&&i.contents!==null?this.stat(t,function(o,a){o?r(o):a.contentHash===i.stat.contentHash?r(o,i.contents.slice(0),i.stat):e.readFile(t,r)}):this._wrap(function(o){e._client.readFile(t,{arrayBuffer:!0},o)},function(o,a,s){o||e.updateCachedInfo(t,s,a.slice(0)),r(o,a,s)})},ae.prototype.writeFile=function(t,r,e){var i=this;this._wrap(function(o){i._client.writeFile(t,r,o)},function(o,a){o||i.updateCachedInfo(t,a,r.slice(0)),e(o,a)})},ae.prototype.mkdir=function(t,r){var e=this;this._wrap(function(i){e._client.mkdir(t,i)},function(i,o){i||e.updateCachedInfo(t,o,[]),r(i)})},ae.prototype._wrap=function(t,r){var e=0,i=function(o){var a=2;if(o&&3>++e)switch(o.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){t(i)},a*1e3);break;default:r.apply(null,arguments);break}else r.apply(null,arguments)};t(i)},ae.prototype.getCachedInfo=function(t){return this._cache[t.toLowerCase()]},ae.prototype.putCachedInfo=function(t,r){this._cache[t.toLowerCase()]=r},ae.prototype.deleteCachedInfo=function(t){delete this._cache[t.toLowerCase()]},ae.prototype.getCachedDirInfo=function(t){var r=this.getCachedInfo(t);return Io(r)?r:null},ae.prototype.getCachedFileInfo=function(t){var r=this.getCachedInfo(t);return Fo(r)?r:null},ae.prototype.updateCachedDirInfo=function(t,r,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);r.contentHash!==null&&(i===void 0||i.stat.contentHash!==r.contentHash)&&this.putCachedInfo(t,{stat:r,contents:e})},ae.prototype.updateCachedFileInfo=function(t,r,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);r.versionTag!==null&&(i===void 0||i.stat.versionTag!==r.versionTag)&&this.putCachedInfo(t,{stat:r,contents:e})},ae.prototype.updateCachedInfo=function(t,r,e){e===void 0&&(e=null),r.isFile&&xo(e)?this.updateCachedFileInfo(t,r,e):r.isFolder&&Array.isArray(e)&&this.updateCachedDirInfo(t,r,e)};var Oo=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(this.isDirty()){var o=this.getBuffer(),a=J(o);this._fs._writeFileStrict(this.getPath(),a,function(s){s||i.resetDirty(),e(s)})}else e()},t.prototype.close=function(e){this.sync(e)},t}(oe),Er=function(n){function t(r,e){e===void 0&&(e=!0),n.call(this),this._client=new ae(r),Ot(e,t.Name,{client:"authenticated dropbox client instance"}),_o()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.client,!1))},t.isAvailable=function(){return typeof Dropbox<"u"},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this._client.readdir("/",function(o,a){if(o)e(i.convert(o,"/"));else{var s=function(d,O){var L=p.join("/",d);i._client.remove(L,function(H){O(H?i.convert(H,L):null)})},h=function(d){d?e(d):e()};wn(a,s,h)}})},t.prototype.rename=function(e,i,o){var a=this;this._client.move(e,i,function(s){s?a._client.stat(i,function(h,d){if(h||d.isFolder){var O=s.response.error.indexOf(e)>-1?e:i;o(a.convert(s,O))}else a._client.remove(i,function(L){L?o(a.convert(L,i)):a.rename(e,i,o)})}):o()})},t.prototype.stat=function(e,i,o){var a=this;this._client.stat(e,function(s,h){if(s)o(a.convert(s,e));else if(h&&h.isRemoved)o(u.FileError(f.ENOENT,e));else{var d=new A(a._statType(h),h.size);return o(null,d)}})},t.prototype.open=function(e,i,o,a){var s=this;this._client.readFile(e,function(h,d,O){if(h)if(i.isReadable())a(s.convert(h,e));else switch(h.status){case Dropbox.ApiError.NOT_FOUND:var L=new ArrayBuffer(0);return s._writeFileStrict(e,L,function(et,ft){if(et)a(et);else{var yt=s._makeFile(e,i,ft,Et(L));a(null,yt)}});default:return a(s.convert(h,e))}else{var H;d===null?H=Mt():H=Et(d);var Q=s._makeFile(e,i,O,H);return a(null,Q)}})},t.prototype._writeFileStrict=function(e,i,o){var a=this,s=p.dirname(e);this.stat(s,!1,function(h,d){h?o(u.FileError(f.ENOENT,s)):a._client.writeFile(e,i,function(O,L){O?o(a.convert(O,e)):o(null,L)})})},t.prototype._statType=function(e){return e.isFile?D.FILE:D.DIRECTORY},t.prototype._makeFile=function(e,i,o,a){var s=this._statType(o),h=new A(s,o.size);return new Oo(this,e,i,h,a)},t.prototype._remove=function(e,i,o){var a=this;this._client.stat(e,function(s,h){s?i(a.convert(s,e)):h.isFile&&!o?i(u.FileError(f.ENOTDIR,e)):!h.isFile&&o?i(u.FileError(f.EISDIR,e)):a._client.remove(e,function(d){i(d?a.convert(d,e):null)})})},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){this._remove(e,i,!1)},t.prototype.mkdir=function(e,i,o){var a=this,s=p.dirname(e);this._client.stat(s,function(h,d){h?o(a.convert(h,s)):a._client.mkdir(e,function(O){o(O?u.FileError(f.EEXIST,e):null)})})},t.prototype.readdir=function(e,i){var o=this;this._client.readdir(e,function(a,s){return a?i(o.convert(a)):i(null,s)})},t.prototype.convert=function(e,i){i===void 0&&(i=null);var o=he[e.status];return o===void 0&&(o=f.EIO),i?u.FileError(o,i):new u(o)},t}(K);Er.Name="Dropbox",Er.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(n,t){n.isAuthenticated&&n.isAuthenticated()?t():t(new u(f.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};function Yt(n,t){t===void 0&&(t="");for(var r=n.errno,e=n.node,i=[];e&&(i.unshift(e.name),e!==e.parent);)e=e.parent;return new u(r,g[r],i.length>0?"/"+i.join("/"):t)}var ko=function(n){function t(r,e,i,o){n.call(this),this._fs=r,this._FS=e,this._path=i,this._stream=o}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getPos=function(){},t.prototype.close=function(e){var i=null;try{this.closeSync()}catch(o){i=o}finally{e(i)}},t.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(e){throw Yt(e,this._path)}},t.prototype.stat=function(e){try{e(null,this.statSync())}catch(i){e(i)}},t.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(e){throw Yt(e,this._path)}},t.prototype.truncate=function(e,i){var o=null;try{this.truncateSync(e)}catch(a){o=a}finally{i(o)}},t.prototype.truncateSync=function(e){try{this._FS.ftruncate(this._stream.fd,e)}catch(i){throw Yt(i,this._path)}},t.prototype.write=function(e,i,o,a,s){try{s(null,this.writeSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.writeSync=function(e,i,o,a){try{var s=ut(e),h=a===null?void 0:a;return this._FS.write(this._stream,s,i,o,h)}catch(d){throw Yt(d,this._path)}},t.prototype.read=function(e,i,o,a,s){try{s(null,this.readSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.readSync=function(e,i,o,a){try{var s=ut(e),h=a===null?void 0:a;return this._FS.read(this._stream,s,i,o,h)}catch(d){throw Yt(d,this._path)}},t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.chown=function(e,i,o){var a=null;try{this.chownSync(e,i)}catch(s){a=s}finally{o(a)}},t.prototype.chownSync=function(e,i){try{this._FS.fchown(this._stream.fd,e,i)}catch(o){throw Yt(o,this._path)}},t.prototype.chmod=function(e,i){var o=null;try{this.chmodSync(e)}catch(a){o=a}finally{i(o)}},t.prototype.chmodSync=function(e){try{this._FS.fchmod(this._stream.fd,e)}catch(i){throw Yt(i,this._path)}},t.prototype.utimes=function(e,i,o){var a=null;try{this.utimesSync(e,i)}catch(s){a=s}finally{o(a)}},t.prototype.utimesSync=function(e,i){this._fs.utimesSync(this._path,e,i)},t}(gt),_r=function(n){function t(r){n.call(this),this._FS=r}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.FS))},t.isAvailable=function(){return!0},t.prototype.getName=function(){return this._FS.DB_NAME()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!0},t.prototype.supportsProps=function(){return!0},t.prototype.supportsSynch=function(){return!0},t.prototype.renameSync=function(e,i){try{this._FS.rename(e,i)}catch(o){throw o.errno===f.ENOENT?Yt(o,this.existsSync(e)?i:e):Yt(o)}},t.prototype.statSync=function(e,i){try{var o=i?this._FS.lstat(e):this._FS.stat(e),a=this.modeToFileType(o.mode);return new A(a,o.size,o.mode,o.atime,o.mtime,o.ctime)}catch(s){throw Yt(s,e)}},t.prototype.openSync=function(e,i,o){try{var a=this._FS.open(e,i.getFlagString(),o);if(this._FS.isDir(a.node.mode))throw this._FS.close(a),u.EISDIR(e);return new ko(this,this._FS,e,a)}catch(s){throw Yt(s,e)}},t.prototype.unlinkSync=function(e){try{this._FS.unlink(e)}catch(i){throw Yt(i,e)}},t.prototype.rmdirSync=function(e){try{this._FS.rmdir(e)}catch(i){throw Yt(i,e)}},t.prototype.mkdirSync=function(e,i){try{this._FS.mkdir(e,i)}catch(o){throw Yt(o,e)}},t.prototype.readdirSync=function(e){try{return this._FS.readdir(e).filter(function(i){return i!=="."&&i!==".."})}catch(i){throw Yt(i,e)}},t.prototype.truncateSync=function(e,i){try{this._FS.truncate(e,i)}catch(o){throw Yt(o,e)}},t.prototype.readFileSync=function(e,i,o){try{var a=this._FS.readFile(e,{flags:o.getFlagString()}),s=wt(a);return i?s.toString(i):s}catch(h){throw Yt(h,e)}},t.prototype.writeFileSync=function(e,i,o,a,s){try{o&&(i=S.from(i,o));var h=ut(i);this._FS.writeFile(e,h,{flags:a.getFlagString(),encoding:"binary"}),this._FS.chmod(e,s)}catch(d){throw Yt(d,e)}},t.prototype.chmodSync=function(e,i,o){try{i?this._FS.lchmod(e,o):this._FS.chmod(e,o)}catch(a){throw Yt(a,e)}},t.prototype.chownSync=function(e,i,o,a){try{i?this._FS.lchown(e,o,a):this._FS.chown(e,o,a)}catch(s){throw Yt(s,e)}},t.prototype.symlinkSync=function(e,i,o){try{this._FS.symlink(e,i)}catch(a){throw Yt(a)}},t.prototype.readlinkSync=function(e){try{return this._FS.readlink(e)}catch(i){throw Yt(i,e)}},t.prototype.utimesSync=function(e,i,o){try{this._FS.utime(e,i.getTime(),o.getTime())}catch(a){throw Yt(a,e)}},t.prototype.modeToFileType=function(e){if(this._FS.isDir(e))return D.DIRECTORY;if(this._FS.isFile(e))return D.FILE;if(this._FS.isLink(e))return D.SYMLINK;throw u.EPERM("Invalid mode: "+e)},t}(re);_r.Name="EmscriptenFileSystem",_r.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var $e=function(n){function t(r,e){n.call(this),this._folder=r,this._wrapped=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.folder,e.wrapped))},t.isAvailable=function(){return!0},t.prototype.initialize=function(e){var i=this;this._wrapped.exists(this._folder,function(o){o?e():i._wrapped.isReadOnly()?e(u.ENOENT(i._folder)):i._wrapped.mkdir(i._folder,511,e)})},t.prototype.getName=function(){return this._wrapped.getName()},t.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},t.prototype.supportsProps=function(){return this._wrapped.supportsProps()},t.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t}(K);$e.Name="FolderAdapter",$e.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}};function mn(n,t){if(t!==null&&typeof t=="object"){var r=t,e=r.path;e&&(e="/"+p.relative(n,e),r.message=r.message.replace(r.path,e),r.path=e)}return t}function No(n,t){return typeof t=="function"?function(r){arguments.length>0&&(arguments[0]=mn(n,r)),t.apply(null,arguments)}:t}function Sn(n,t,r){return n.slice(n.length-4)!=="Sync"?function(){return arguments.length>0&&(t&&(arguments[0]=p.join(this._folder,arguments[0])),r&&(arguments[1]=p.join(this._folder,arguments[1])),arguments[arguments.length-1]=No(this._folder,arguments[arguments.length-1])),this._wrapped[n].apply(this._wrapped,arguments)}:function(){try{return t&&(arguments[0]=p.join(this._folder,arguments[0])),r&&(arguments[1]=p.join(this._folder,arguments[1])),this._wrapped[n].apply(this._wrapped,arguments)}catch(e){throw mn(this._folder,e)}}}["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(n){$e.prototype[n]=Sn(n,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(n){$e.prototype[n]=Sn(n,!0,!0)});var Fr;typeof window<"u"?Fr=window:typeof self<"u"?Fr=self:Fr=R;var Kt=Fr;function Ro(n){return n.isDirectory}var zr=Kt.webkitRequestFileSystem||Kt.requestFileSystem||null;function bo(n,t,r,e){if(typeof navigator.webkitPersistentStorage<"u")switch(n){case Kt.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(t,r,e);break;case Kt.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(t,r,e);break;default:e(new TypeError("Invalid storage type: "+n));break}else Kt.webkitStorageInfo.requestQuota(n,t,r,e)}function To(n){return Array.prototype.slice.call(n||[],0)}function xe(n,t,r){switch(n.name){case"PathExistsError":return u.EEXIST(t);case"QuotaExceededError":return u.FileError(f.ENOSPC,t);case"NotFoundError":return u.ENOENT(t);case"SecurityError":return u.FileError(f.EACCES,t);case"InvalidModificationError":return u.FileError(f.EPERM,t);case"TypeMismatchError":return u.FileError(r?f.ENOTDIR:f.EISDIR,t);case"EncodingError":case"InvalidStateError":case"NoModificationAllowedError":default:return u.FileError(f.EINVAL,t)}}var Lo=function(n){function t(r,e,i,o,a,s){n.call(this,r,i,o,a,s),this._entry=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty())return e();this._entry.createWriter(function(o){var a=i.getBuffer(),s=new Blob([J(a)]),h=s.size;o.onwriteend=function(d){o.onwriteend=null,o.onerror=null,o.truncate(h),i.resetDirty(),e()},o.onerror=function(d){e(xe(d,i.getPath(),!1))},o.write(s)})},t.prototype.close=function(e){this.sync(e)},t}(oe),Ir=function(n){function t(r,e,i){r===void 0&&(r=5),e===void 0&&(e=Kt.PERSISTENT),i===void 0&&(i=!0),n.call(this),this.size=1024*1024*r,this.type=e,Ot(i,t.Name,{size:r,type:e})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.size,e.type,!1);o.allocate(function(a){return a?i(a):i(null,o)},!1)},t.isAvailable=function(){return!!zr},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.allocate=function(e,i){var o=this;e===void 0&&(e=function(){}),i===void 0&&(i=!0),i&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var a=function(h){o.fs=h,e()},s=function(h){e(xe(h,"/",!0))};this.type===Kt.PERSISTENT?bo(this.type,this.size,function(h){zr(o.type,h,a,s)},s):zr(this.type,this.size,a,s)},t.prototype.empty=function(e){this._readdir("/",function(i,o){if(i)console.error("Failed to empty FS"),e(i);else{var a=function(h){i?(console.error("Failed to empty FS"),e(i)):e()},s=function(h,d){var O=function(){d()},L=function(H){d(xe(H,h.fullPath,!h.isDirectory))};Ro(h)?h.removeRecursively(O,L):h.remove(O,L)};wn(o,s,a)}})},t.prototype.rename=function(e,i,o){var a=this,s=2,h=0,d=this.fs.root,O=e,L=function(Q){--s<=0&&o(xe(Q,O,!1))},H=function(Q){if(++h===2)return o(new u(f.EINVAL,"Something was identified as both a file and a directory. This should never happen."));if(e===i)return o();O=p.dirname(i),d.getDirectory(O,{},function(et){O=p.basename(i),Q.moveTo(et,O,function(ft){o()},function(ft){Q.isDirectory?(O=i,a.unlink(i,function(yt){yt?L(ft):a.rename(e,i,o)})):L(ft)})},L)};d.getFile(e,{},H,L),d.getDirectory(e,{},H,L)},t.prototype.stat=function(e,i,o){var a=this,s={create:!1},h=function(H){var Q=function(et){var ft=new A(D.FILE,et.size);o(null,ft)};H.file(Q,O)},d=function(H){var Q=4096,et=new A(D.DIRECTORY,Q);o(null,et)},O=function(H){o(xe(H,e,!1))},L=function(){a.fs.root.getDirectory(e,s,d,O)};this.fs.root.getFile(e,s,h,L)},t.prototype.open=function(e,i,o,a){var s=this,h=function(d){d.name==="InvalidModificationError"&&i.isExclusive()?a(u.EEXIST(e)):a(xe(d,e,!1))};this.fs.root.getFile(e,{create:i.pathNotExistsAction()===x.CREATE_FILE,exclusive:i.isExclusive()},function(d){d.file(function(O){var L=new FileReader;L.onloadend=function(H){var Q=s._makeFile(e,d,i,O,L.result);a(null,Q)},L.onerror=function(H){h(L.error)},L.readAsArrayBuffer(O)},h)},h)},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(a,s){a?i(a):s.length>0?i(u.ENOTEMPTY(e)):o._remove(e,i,!1)})},t.prototype.mkdir=function(e,i,o){var a={create:!0,exclusive:!0},s=function(d){o()},h=function(d){o(xe(d,e,!0))};this.fs.root.getDirectory(e,a,s,h)},t.prototype.readdir=function(e,i){this._readdir(e,function(o,a){if(a){for(var s=[],h=0,d=a;h<d.length;h+=1){var O=d[h];s.push(O.name)}i(null,s)}else return i(o)})},t.prototype._makeFile=function(e,i,o,a,s){s===void 0&&(s=new ArrayBuffer(0));var h=new A(D.FILE,a.size),d=Et(s);return new Lo(this,i,e,o,h,d)},t.prototype._readdir=function(e,i){var o=function(a){i(xe(a,e,!0))};this.fs.root.getDirectory(e,{create:!1},function(a){var s=a.createReader(),h=[],d=function(){s.readEntries(function(O){O.length?(h=h.concat(To(O)),d()):i(null,h)},o)};d()},o)},t.prototype._remove=function(e,i,o){var a=function(d){var O=function(){i()},L=function(H){i(xe(H,e,!o))};d.remove(O,L)},s=function(d){i(xe(d,e,!o))},h={create:!1};o?this.fs.root.getFile(e,h,a,s):this.fs.root.getDirectory(e,h,a,s)},t}(K);Ir.Name="HTML5FS",Ir.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var pe=function(t,r,e,i,o,a){this.id=t,this.size=r,this.mode=e,this.atime=i,this.mtime=o,this.ctime=a};pe.fromBuffer=function(t){if(t===void 0)throw new Error("NO");return new pe(t.toString("ascii",30),t.readUInt32LE(0),t.readUInt16LE(4),t.readDoubleLE(6),t.readDoubleLE(14),t.readDoubleLE(22))},pe.prototype.toStats=function(){return new A((this.mode&61440)===D.DIRECTORY?D.DIRECTORY:D.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},pe.prototype.getSize=function(){return 30+this.id.length},pe.prototype.toBuffer=function(t){return t===void 0&&(t=S.alloc(this.getSize())),t.writeUInt32LE(this.size,0),t.writeUInt16LE(this.mode,4),t.writeDoubleLE(this.atime,6),t.writeDoubleLE(this.mtime,14),t.writeDoubleLE(this.ctime,22),t.write(this.id,30,this.id.length,"ascii"),t},pe.prototype.update=function(t){var r=!1;this.size!==t.size&&(this.size=t.size,r=!0),this.mode!==t.mode&&(this.mode=t.mode,r=!0);var e=t.atime.getTime();this.atime!==e&&(this.atime=e,r=!0);var i=t.mtime.getTime();this.mtime!==i&&(this.mtime=i,r=!0);var o=t.ctime.getTime();return this.ctime!==o&&(this.ctime=o,r=!0),r},pe.prototype.isFile=function(){return(this.mode&61440)===D.FILE},pe.prototype.isDirectory=function(){return(this.mode&61440)===D.DIRECTORY};var Me="/",jr=null;function En(){return jr||(jr=S.from("{}"))}function xr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,r=n==="x"?t:t&3|8;return r.toString(16)})}function ve(n,t){return n?(t(n),!1):!0}function te(n,t,r){return n?(t.abort(function(){r(n)}),!1):!0}var Te=function(t){this.store=t,this.originalData={},this.modifiedKeys=[]};Te.prototype.get=function(t){var r=this.store.get(t);return this.stashOldValue(t,r),r},Te.prototype.put=function(t,r,e){return this.markModified(t),this.store.put(t,r,e)},Te.prototype.del=function(t){this.markModified(t),this.store.del(t)},Te.prototype.commit=function(){},Te.prototype.abort=function(){for(var t=this,r=0,e=t.modifiedKeys;r<e.length;r+=1){var i=e[r],o=t.originalData[i];o?t.store.put(i,o,!0):t.store.del(i)}},Te.prototype.stashOldValue=function(t,r){this.originalData.hasOwnProperty(t)||(this.originalData[t]=r)},Te.prototype.markModified=function(t){this.modifiedKeys.indexOf(t)===-1&&(this.modifiedKeys.push(t),this.originalData.hasOwnProperty(t)||(this.originalData[t]=this.store.get(t)))};var _n=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(oe),Fn=function(n){function t(r){n.call(this),this.store=r.store,this.makeRootDirectory()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},t.prototype.renameSync=function(e,i){var o=this.store.beginTransaction("readwrite"),a=p.dirname(e),s=p.basename(e),h=p.dirname(i),d=p.basename(i),O=this.findINode(o,a),L=this.getDirListing(o,a,O);if(!L[s])throw u.ENOENT(e);var H=L[s];if(delete L[s],(h+"/").indexOf(e+"/")===0)throw new u(f.EBUSY,a);var Q,et;if(h===a?(Q=O,et=L):(Q=this.findINode(o,h),et=this.getDirListing(o,h,Q)),et[d]){var ft=this.getINode(o,i,et[d]);if(ft.isFile())try{o.del(ft.id),o.del(et[d])}catch(yt){throw o.abort(),yt}else throw u.EPERM(i)}et[d]=H;try{o.put(O.id,S.from(JSON.stringify(L)),!0),o.put(Q.id,S.from(JSON.stringify(et)),!0)}catch(yt){throw o.abort(),yt}o.commit()},t.prototype.statSync=function(e,i){return this.findINode(this.store.beginTransaction("readonly"),e).toStats()},t.prototype.createFileSync=function(e,i,o){var a=this.store.beginTransaction("readwrite"),s=Mt(),h=this.commitNewFile(a,e,D.FILE,o,s);return new _n(this,e,i,h.toStats(),s)},t.prototype.openFileSync=function(e,i){var o=this.store.beginTransaction("readonly"),a=this.findINode(o,e),s=o.get(a.id);if(s===void 0)throw u.ENOENT(e);return new _n(this,e,i,a.toStats(),s)},t.prototype.unlinkSync=function(e){this.removeEntry(e,!1)},t.prototype.rmdirSync=function(e){if(this.readdirSync(e).length>0)throw u.ENOTEMPTY(e);this.removeEntry(e,!0)},t.prototype.mkdirSync=function(e,i){var o=this.store.beginTransaction("readwrite"),a=S.from("{}");this.commitNewFile(o,e,D.DIRECTORY,i,a)},t.prototype.readdirSync=function(e){var i=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(i,e,this.findINode(i,e)))},t.prototype._syncSync=function(e,i,o){var a=this.store.beginTransaction("readwrite"),s=this._findINode(a,p.dirname(e),p.basename(e)),h=this.getINode(a,e,s),d=h.update(o);try{a.put(h.id,i,!0),d&&a.put(s,h.toBuffer(),!0)}catch(O){throw a.abort(),O}a.commit()},t.prototype.makeRootDirectory=function(){var e=this.store.beginTransaction("readwrite");if(e.get(Me)===void 0){var i=new Date().getTime(),o=new pe(xr(),4096,511|D.DIRECTORY,i,i,i);e.put(o.id,En(),!1),e.put(Me,o.toBuffer(),!1),e.commit()}},t.prototype._findINode=function(e,i,o){var a=this,s=function(h){var d=a.getDirListing(e,i,h);if(d[o])return d[o];throw u.ENOENT(p.resolve(i,o))};return i==="/"?o===""?Me:s(this.getINode(e,i,Me)):s(this.getINode(e,i+p.sep+o,this._findINode(e,p.dirname(i),p.basename(i))))},t.prototype.findINode=function(e,i){return this.getINode(e,i,this._findINode(e,p.dirname(i),p.basename(i)))},t.prototype.getINode=function(e,i,o){var a=e.get(o);if(a===void 0)throw u.ENOENT(i);return pe.fromBuffer(a)},t.prototype.getDirListing=function(e,i,o){if(!o.isDirectory())throw u.ENOTDIR(i);var a=e.get(o.id);if(a===void 0)throw u.ENOENT(i);return JSON.parse(a.toString())},t.prototype.addNewNode=function(e,i){for(var o=0,a;o<5;)try{return a=xr(),e.put(a,i,!1),a}catch{}throw new u(f.EIO,"Unable to commit data to key-value store.")},t.prototype.commitNewFile=function(e,i,o,a,s){var h=p.dirname(i),d=p.basename(i),O=this.findINode(e,h),L=this.getDirListing(e,h,O),H=new Date().getTime();if(i==="/"||L[d])throw u.EEXIST(i);var Q;try{var et=this.addNewNode(e,s);Q=new pe(et,s.length,a|o,H,H,H);var ft=this.addNewNode(e,Q.toBuffer());L[d]=ft,e.put(O.id,S.from(JSON.stringify(L)),!0)}catch(yt){throw e.abort(),yt}return e.commit(),Q},t.prototype.removeEntry=function(e,i){var o=this.store.beginTransaction("readwrite"),a=p.dirname(e),s=this.findINode(o,a),h=this.getDirListing(o,a,s),d=p.basename(e);if(!h[d])throw u.ENOENT(e);var O=h[d];delete h[d];var L=this.getINode(o,e,O);if(!i&&L.isDirectory())throw u.EISDIR(e);if(i&&!L.isDirectory())throw u.ENOTDIR(e);try{o.del(L.id),o.del(O),o.put(s.id,S.from(JSON.stringify(h)),!0)}catch(H){throw o.abort(),H}o.commit()},t}(re),In=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(o){o||i.resetDirty(),e(o)}):e()},t.prototype.close=function(e){this.sync(e)},t}(oe),Do=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.init=function(e,i){this.store=e,this.makeRootDirectory(i)},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this.store.clear(function(o){ve(o,e)&&i.makeRootDirectory(e)})},t.prototype.rename=function(e,i,o){var a=this,s=this.store.beginTransaction("readwrite"),h=p.dirname(e),d=p.basename(e),O=p.dirname(i),L=p.basename(i),H={},Q={},et=!1;if((O+"/").indexOf(e+"/")===0)return o(new u(f.EBUSY,h));var ft=function(){if(!(et||!Q.hasOwnProperty(h)||!Q.hasOwnProperty(O))){var It=Q[h],Vt=H[h],se=Q[O],Ne=H[O];if(!It[d])o(u.ENOENT(e));else{var Re=It[d];delete It[d];var ar=function(){se[L]=Re,s.put(Vt.id,S.from(JSON.stringify(It)),!0,function(Ae){te(Ae,s,o)&&(h===O?s.commit(o):s.put(Ne.id,S.from(JSON.stringify(se)),!0,function(Ce){te(Ce,s,o)&&s.commit(o)}))})};se[L]?a.getINode(s,i,se[L],function(Ae,Ce){te(Ae,s,o)&&(Ce.isFile()?s.del(Ce.id,function(li){te(li,s,o)&&s.del(se[L],function(sa){te(sa,s,o)&&ar()})}):s.abort(function(li){o(u.EPERM(i))}))}):ar()}}},yt=function(It){a.findINodeAndDirListing(s,It,function(Vt,se,Ne){Vt?et||(et=!0,s.abort(function(){o(Vt)})):(H[It]=se,Q[It]=Ne,ft())})};yt(h),h!==O&&yt(O)},t.prototype.stat=function(e,i,o){var a=this.store.beginTransaction("readonly");this.findINode(a,e,function(s,h){ve(s,o)&&o(null,h.toStats())})},t.prototype.createFile=function(e,i,o,a){var s=this,h=this.store.beginTransaction("readwrite"),d=Mt();this.commitNewFile(h,e,D.FILE,o,d,function(O,L){ve(O,a)&&a(null,new In(s,e,i,L.toStats(),d))})},t.prototype.openFile=function(e,i,o){var a=this,s=this.store.beginTransaction("readonly");this.findINode(s,e,function(h,d){ve(h,o)&&s.get(d.id,function(O,L){ve(O,o)&&(L===void 0?o(u.ENOENT(e)):o(null,new In(a,e,i,d.toStats(),L)))})})},t.prototype.unlink=function(e,i){this.removeEntry(e,!1,i)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(a,s){a?i(a):s.length>0?i(u.ENOTEMPTY(e)):o.removeEntry(e,!0,i)})},t.prototype.mkdir=function(e,i,o){var a=this.store.beginTransaction("readwrite"),s=S.from("{}");this.commitNewFile(a,e,D.DIRECTORY,i,s,o)},t.prototype.readdir=function(e,i){var o=this,a=this.store.beginTransaction("readonly");this.findINode(a,e,function(s,h){ve(s,i)&&o.getDirListing(a,e,h,function(d,O){ve(d,i)&&i(null,Object.keys(O))})})},t.prototype._sync=function(e,i,o,a){var s=this,h=this.store.beginTransaction("readwrite");this._findINode(h,p.dirname(e),p.basename(e),function(d,O){te(d,h,a)&&s.getINode(h,e,O,function(L,H){if(te(L,h,a)){var Q=H.update(o);h.put(H.id,i,!0,function(et){te(et,h,a)&&(Q?h.put(O,H.toBuffer(),!0,function(ft){te(ft,h,a)&&h.commit(a)}):h.commit(a))})}})})},t.prototype.makeRootDirectory=function(e){var i=this.store.beginTransaction("readwrite");i.get(Me,function(o,a){if(o||a===void 0){var s=new Date().getTime(),h=new pe(xr(),4096,511|D.DIRECTORY,s,s,s);i.put(h.id,En(),!1,function(d){te(d,i,e)&&i.put(Me,h.toBuffer(),!1,function(O){O?i.abort(function(){e(O)}):i.commit(e)})})}else i.commit(e)})},t.prototype._findINode=function(e,i,o,a){var s=this,h=function(d,O,L){d?a(d):L[o]?a(null,L[o]):a(u.ENOENT(p.resolve(i,o)))};i==="/"?o===""?a(null,Me):this.getINode(e,i,Me,function(d,O){ve(d,a)&&s.getDirListing(e,i,O,function(L,H){h(L,O,H)})}):this.findINodeAndDirListing(e,i,h)},t.prototype.findINode=function(e,i,o){var a=this;this._findINode(e,p.dirname(i),p.basename(i),function(s,h){ve(s,o)&&a.getINode(e,i,h,o)})},t.prototype.getINode=function(e,i,o,a){e.get(o,function(s,h){ve(s,a)&&(h===void 0?a(u.ENOENT(i)):a(null,pe.fromBuffer(h)))})},t.prototype.getDirListing=function(e,i,o,a){o.isDirectory()?e.get(o.id,function(s,h){if(ve(s,a))try{a(null,JSON.parse(h.toString()))}catch{a(u.ENOENT(i))}}):a(u.ENOTDIR(i))},t.prototype.findINodeAndDirListing=function(e,i,o){var a=this;this.findINode(e,i,function(s,h){ve(s,o)&&a.getDirListing(e,i,h,function(d,O){ve(d,o)&&o(null,h,O)})})},t.prototype.addNewNode=function(e,i,o){var a=0,s,h=function(){++a===5?o(new u(f.EIO,"Unable to commit data to key-value store.")):(s=xr(),e.put(s,i,!1,function(d,O){d||!O?h():o(null,s)}))};h()},t.prototype.commitNewFile=function(e,i,o,a,s,h){var d=this,O=p.dirname(i),L=p.basename(i),H=new Date().getTime();if(i==="/")return h(u.EEXIST(i));this.findINodeAndDirListing(e,O,function(Q,et,ft){te(Q,e,h)&&(ft[L]?e.abort(function(){h(u.EEXIST(i))}):d.addNewNode(e,s,function(yt,It){if(te(yt,e,h)){var Vt=new pe(It,s.length,a|o,H,H,H);d.addNewNode(e,Vt.toBuffer(),function(se,Ne){te(se,e,h)&&(ft[L]=Ne,e.put(et.id,S.from(JSON.stringify(ft)),!0,function(Re){te(Re,e,h)&&e.commit(function(ar){te(ar,e,h)&&h(null,Vt)})}))})}}))})},t.prototype.removeEntry=function(e,i,o){var a=this,s=this.store.beginTransaction("readwrite"),h=p.dirname(e),d=p.basename(e);this.findINodeAndDirListing(s,h,function(O,L,H){if(te(O,s,o))if(!H[d])s.abort(function(){o(u.ENOENT(e))});else{var Q=H[d];delete H[d],a.getINode(s,e,Q,function(et,ft){te(et,s,o)&&(!i&&ft.isDirectory()?s.abort(function(){o(u.EISDIR(e))}):i&&!ft.isDirectory()?s.abort(function(){o(u.ENOTDIR(e))}):s.del(ft.id,function(yt){te(yt,s,o)&&s.del(Q,function(It){te(It,s,o)&&s.put(L.id,S.from(JSON.stringify(H)),!0,function(Vt){te(Vt,s,o)&&s.commit(o)})})}))})}})},t}(K),He=function(){this.store={}};He.prototype.name=function(){return tr.Name},He.prototype.clear=function(){this.store={}},He.prototype.beginTransaction=function(t){return new Te(this)},He.prototype.get=function(t){return this.store[t]},He.prototype.put=function(t,r,e){return!e&&this.store.hasOwnProperty(t)?!1:(this.store[t]=r,!0)},He.prototype.del=function(t){delete this.store[t]};var tr=function(n){function t(){n.call(this,{store:new He})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t}(Fn);tr.Name="InMemory",tr.Options={};var Wr=Kt.indexedDB||Kt.mozIndexedDB||Kt.webkitIndexedDB||Kt.msIndexedDB;function sr(n,t){switch(t===void 0&&(t=n.toString()),n.name){case"NotFoundError":return new u(f.ENOENT,t);case"QuotaExceededError":return new u(f.ENOSPC,t);default:return new u(f.EIO,t)}}function fr(n,t,r){return t===void 0&&(t=f.EIO),r===void 0&&(r=null),function(e){e.preventDefault(),n(new u(t,r!==null?r:void 0))}}var Hr=function(t,r){this.tx=t,this.store=r};Hr.prototype.get=function(t,r){try{var e=this.store.get(t);e.onerror=fr(r),e.onsuccess=function(i){var o=i.target.result;o===void 0?r(null,o):r(null,Et(o))}}catch(i){r(sr(i))}};var Ao=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.put=function(e,i,o,a){try{var s=J(i),h;o?h=this.store.put(s,e):h=this.store.add(s,e),h.onerror=fr(a),h.onsuccess=function(d){a(null,!0)}}catch(d){a(sr(d))}},t.prototype.del=function(e,i){try{var o=this.store.delete(e);o.onerror=fr(i),o.onsuccess=function(a){i()}}catch(a){i(sr(a))}},t.prototype.commit=function(e){setTimeout(e,0)},t.prototype.abort=function(e){var i=null;try{this.tx.abort()}catch(o){i=sr(o)}finally{e(i)}},t}(Hr),Or=function(t,r){var e=this;r===void 0&&(r="browserfs"),this.storeName=r;var i=Wr.open(this.storeName,1);i.onupgradeneeded=function(o){var a=o.target.result;a.objectStoreNames.contains(e.storeName)&&a.deleteObjectStore(e.storeName),a.createObjectStore(e.storeName)},i.onsuccess=function(o){e.db=o.target.result,t(null,e)},i.onerror=fr(t,f.EACCES)};Or.prototype.name=function(){return ur.Name+" - "+this.storeName},Or.prototype.clear=function(t){try{var r=this.db.transaction(this.storeName,"readwrite"),e=r.objectStore(this.storeName),i=e.clear();i.onsuccess=function(o){setTimeout(t,0)},i.onerror=fr(t)}catch(o){t(sr(o))}},Or.prototype.beginTransaction=function(t){t===void 0&&(t="readonly");var r=this.db.transaction(this.storeName,t),e=r.objectStore(this.storeName);if(t==="readwrite")return new Ao(r,e);if(t==="readonly")return new Hr(r,e);throw new u(f.EINVAL,"Invalid transaction type.")};var ur=function(n){function t(r,e,i){var o=this;i===void 0&&(i=!0),n.call(this),this.store=new Or(function(a){a?r(a):o.init(o.store,function(s){r(s,o)})},e),Ot(i,t.Name,{storeName:e})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){new t(i,e.storeName,!1)},t.isAvailable=function(){try{return typeof Wr<"u"&&Wr.open("__browserfs_test__")!==null}catch{return!1}},t}(Do);ur.Name="IndexedDB",ur.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var Zr=!1,cr;try{Kt.localStorage.setItem("__test__",String.fromCharCode(55296)),Zr=Kt.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch{Zr=!1}cr=Zr?"binary_string":"binary_string_ie",S.isEncoding(cr)||(cr="base64");var Ze=function(){};Ze.prototype.name=function(){return lr.Name},Ze.prototype.clear=function(){Kt.localStorage.clear()},Ze.prototype.beginTransaction=function(t){return new Te(this)},Ze.prototype.get=function(t){try{var r=Kt.localStorage.getItem(t);if(r!==null)return S.from(r,cr)}catch{}},Ze.prototype.put=function(t,r,e){try{return!e&&Kt.localStorage.getItem(t)!==null?!1:(Kt.localStorage.setItem(t,r.toString(cr)),!0)}catch{throw new u(f.ENOSPC,"LocalStorage is full.")}},Ze.prototype.del=function(t){try{Kt.localStorage.removeItem(t)}catch(r){throw new u(f.EIO,"Unable to delete key "+t+": "+r)}};var lr=function(n){function t(){n.call(this,{store:new Ze})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t.isAvailable=function(){return typeof Kt.localStorage<"u"},t}(Fn);lr.Name="LocalStorage",lr.Options={};var er=function(n){function t(){n.call(this),this.mountList=[],this.mntMap={},this.rootFs=new tr}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t;Object.keys(e).forEach(function(a){o.mount(a,e[a])}),i(null,o)},t.isAvailable=function(){return!0},t.prototype.mount=function(e,i){if(e[0]!=="/"&&(e="/"+e),e=p.resolve(e),this.mntMap[e])throw new u(f.EINVAL,"Mount point "+e+" is already taken.");M(e,511,this.rootFs),this.mntMap[e]=i,this.mountList.push(e),this.mountList=this.mountList.sort(function(o,a){return a.length-o.length})},t.prototype.umount=function(e){var i=this;if(e[0]!=="/"&&(e="/"+e),e=p.resolve(e),!this.mntMap[e])throw new u(f.EINVAL,"Mount point "+e+" is already unmounted.");for(delete this.mntMap[e],this.mountList.splice(this.mountList.indexOf(e),1);e!=="/"&&i.rootFs.readdirSync(e).length===0;)i.rootFs.rmdirSync(e),e=p.dirname(e)},t.prototype._getFs=function(e){for(var i=this,o=this.mountList,a=o.length,s=0;s<a;s++){var h=o[s];if(h.length<=e.length&&e.indexOf(h)===0)return e=e.substr(h.length>1?h.length:0),e===""&&(e="/"),{fs:i.mntMap[h],path:e}}return{fs:this.rootFs,path:e}},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.standardizeError=function(e,i,o){var a=e.message.indexOf(i);return a!==-1&&(e.message=e.message.substr(0,a)+o+e.message.substr(a+i.length),e.path=o),e},t.prototype.rename=function(e,i,o){var a=this,s=this._getFs(e),h=this._getFs(i);return s.fs===h.fs?s.fs.rename(s.path,h.path,function(d){d&&a.standardizeError(a.standardizeError(d,s.path,e),h.path,i),o(d)}):st.readFile(e,function(d,O){if(d)return o(d);st.writeFile(i,O,function(L){if(L)return o(L);st.unlink(e,o)})})},t.prototype.renameSync=function(e,i){var o=this._getFs(e),a=this._getFs(i);if(o.fs===a.fs)try{return o.fs.renameSync(o.path,a.path)}catch(h){throw this.standardizeError(this.standardizeError(h,o.path,e),a.path,i),h}var s=st.readFileSync(e);return st.writeFileSync(i,s),st.unlinkSync(e)},t.prototype.readdirSync=function(e){var i=this._getFs(e),o=null;if(i.fs!==this.rootFs)try{o=this.rootFs.readdirSync(e)}catch{}try{var a=i.fs.readdirSync(i.path);return o===null?a:a.concat(o.filter(function(s){return a.indexOf(s)===-1}))}catch(s){if(o===null)throw this.standardizeError(s,i.path,e);return o}},t.prototype.readdir=function(e,i){var o=this,a=this._getFs(e);a.fs.readdir(a.path,function(s,h){if(a.fs!==o.rootFs)try{var d=o.rootFs.readdirSync(e);h?h=h.concat(d.filter(function(O){return h.indexOf(O)===-1})):h=d}catch{if(s)return i(o.standardizeError(s,a.path,e))}else if(s)return i(o.standardizeError(s,a.path,e));i(null,h)})},t.prototype.rmdirSync=function(e){var i=this._getFs(e);if(this._containsMountPt(e))throw u.ENOTEMPTY(e);try{i.fs.rmdirSync(i.path)}catch(o){throw this.standardizeError(o,i.path,e)}},t.prototype.rmdir=function(e,i){var o=this,a=this._getFs(e);this._containsMountPt(e)?i(u.ENOTEMPTY(e)):a.fs.rmdir(a.path,function(s){i(s?o.standardizeError(s,a.path,e):null)})},t.prototype._containsMountPt=function(e){for(var i=this.mountList,o=i.length,a=0;a<o;a++){var s=i[a];if(s.length>=e.length&&s.slice(0,e.length)===e)return!0}return!1},t}(K);er.Name="MountableFileSystem",er.Options={};function xn(n,t,r){return t?function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var o=e[0],a=this._getFs(o);e[0]=a.path;try{return a.fs[n].apply(a.fs,e)}catch(s){throw this.standardizeError(s,a.path,o),s}}:function(){for(var e=this,i=[],o=arguments.length;o--;)i[o]=arguments[o];var a=i[0],s=this._getFs(a);if(i[0]=s.path,typeof i[i.length-1]=="function"){var h=i[i.length-1];i[i.length-1]=function(){for(var d=[],O=arguments.length;O--;)d[O]=arguments[O];d.length>0&&d[0]instanceof u&&e.standardizeError(d[0],s.path,a),h.apply(null,d)}}return s.fs[n].apply(s.fs,i)}}for(var On=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],Vr=0;Vr<On.length;Vr++)for(var Co=On[Vr],Xr=0,kn=Co;Xr<kn.length;Xr+=1){var kr=kn[Xr];er.prototype[kr]=xn(kr,!1),er.prototype[kr+"Sync"]=xn(kr+"Sync",!0)}var hr;if(typeof setImmediate<"u")hr=setImmediate;else{var Se=Kt,rr=[],Nn="zero-timeout-message",Mo=function(){if(typeof Se.importScripts<"u"||!Se.postMessage)return!1;var n=!0,t=Se.onmessage;return Se.onmessage=function(){n=!1},Se.postMessage("","*"),Se.onmessage=t,n};if(Mo()){hr=function(n){rr.push(n),Se.postMessage(Nn,"*")};var Rn=function(n){if(n.source===self&&n.data===Nn&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,rr.length>0)){var t=rr.shift();return t()}};Se.addEventListener?Se.addEventListener("message",Rn,!0):Se.attachEvent("onmessage",Rn)}else if(Se.MessageChannel){var bn=new Se.MessageChannel;bn.port1.onmessage=function(n){if(rr.length>0)return rr.shift()()},hr=function(n){rr.push(n),bn.port2.postMessage("")}}else hr=function(n){return setTimeout(n,0)}}var Yr=hr,pr=function(){this._locked=!1,this._waiters=[]};pr.prototype.lock=function(t){if(this._locked){this._waiters.push(t);return}this._locked=!0,t()},pr.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var t=this._waiters.shift();if(t){Yr(t);return}this._locked=!1},pr.prototype.tryLock=function(){return this._locked?!1:(this._locked=!0,!0)},pr.prototype.isLocked=function(){return this._locked};var mt=function(t){this._fs=t,this._mu=new pr};mt.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},mt.prototype.getFSUnlocked=function(){return this._fs},mt.prototype.initialize=function(t){this._fs.initialize(t)},mt.prototype.diskSpace=function(t,r){this._fs.diskSpace(t,r)},mt.prototype.isReadOnly=function(){return this._fs.isReadOnly()},mt.prototype.supportsLinks=function(){return this._fs.supportsLinks()},mt.prototype.supportsProps=function(){return this._fs.supportsProps()},mt.prototype.supportsSynch=function(){return this._fs.supportsSynch()},mt.prototype.rename=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.rename(t,r,function(o){i._mu.unlock(),e(o)})})},mt.prototype.renameSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(t,r)},mt.prototype.stat=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.stat(t,r,function(o,a){i._mu.unlock(),e(o,a)})})},mt.prototype.statSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(t,r)},mt.prototype.open=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.open(t,r,e,function(a,s){o._mu.unlock(),i(a,s)})})},mt.prototype.openSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(t,r,e)},mt.prototype.unlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.unlink(t,function(i){e._mu.unlock(),r(i)})})},mt.prototype.unlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(t)},mt.prototype.rmdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.rmdir(t,function(i){e._mu.unlock(),r(i)})})},mt.prototype.rmdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(t)},mt.prototype.mkdir=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.mkdir(t,r,function(o){i._mu.unlock(),e(o)})})},mt.prototype.mkdirSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(t,r)},mt.prototype.readdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.readdir(t,function(i,o){e._mu.unlock(),r(i,o)})})},mt.prototype.readdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(t)},mt.prototype.exists=function(t,r){var e=this;this._mu.lock(function(){e._fs.exists(t,function(i){e._mu.unlock(),r(i)})})},mt.prototype.existsSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(t)},mt.prototype.realpath=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.realpath(t,r,function(o,a){i._mu.unlock(),e(o,a)})})},mt.prototype.realpathSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(t,r)},mt.prototype.truncate=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.truncate(t,r,function(o){i._mu.unlock(),e(o)})})},mt.prototype.truncateSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(t,r)},mt.prototype.readFile=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.readFile(t,r,e,function(a,s){o._mu.unlock(),i(a,s)})})},mt.prototype.readFileSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(t,r,e)},mt.prototype.writeFile=function(t,r,e,i,o,a){var s=this;this._mu.lock(function(){s._fs.writeFile(t,r,e,i,o,function(h){s._mu.unlock(),a(h)})})},mt.prototype.writeFileSync=function(t,r,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(t,r,e,i,o)},mt.prototype.appendFile=function(t,r,e,i,o,a){var s=this;this._mu.lock(function(){s._fs.appendFile(t,r,e,i,o,function(h){s._mu.unlock(),a(h)})})},mt.prototype.appendFileSync=function(t,r,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(t,r,e,i,o)},mt.prototype.chmod=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.chmod(t,r,e,function(a){o._mu.unlock(),i(a)})})},mt.prototype.chmodSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(t,r,e)},mt.prototype.chown=function(t,r,e,i,o){var a=this;this._mu.lock(function(){a._fs.chown(t,r,e,i,function(s){a._mu.unlock(),o(s)})})},mt.prototype.chownSync=function(t,r,e,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(t,r,e,i)},mt.prototype.utimes=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.utimes(t,r,e,function(a){o._mu.unlock(),i(a)})})},mt.prototype.utimesSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(t,r,e)},mt.prototype.link=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.link(t,r,function(o){i._mu.unlock(),e(o)})})},mt.prototype.linkSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(t,r)},mt.prototype.symlink=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.symlink(t,r,e,function(a){o._mu.unlock(),i(a)})})},mt.prototype.symlinkSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(t,r,e)},mt.prototype.readlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.readlink(t,function(i,o){e._mu.unlock(),r(i,o)})})},mt.prototype.readlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(t)};var Le="/.deletedFiles.log";function Tn(n){return 146|n}function ge(n){return k.getFileFlag(n)}var Ln=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty()){e(null);return}this._fs._syncAsync(this,function(o){i.resetDirty(),e(o)})},t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.close=function(e){this.sync(e)},t.prototype.closeSync=function(){this.syncSync()},t}(oe),Dn=function(n){function t(r,e){if(n.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=r,this._readable=e,this._writable.isReadOnly())throw new u(f.EINVAL,"Writable file system must be writable.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},t.prototype._syncAsync=function(e,i){var o=this;this.createParentDirectoriesAsync(e.getPath(),function(a){if(a)return i(a);o._writable.writeFile(e.getPath(),e.getBuffer(),null,ge("w"),e.getStats().mode,i)})},t.prototype._syncSync=function(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,ge("w"),e.getStats().mode)},t.prototype.getName=function(){return dr.Name},t.prototype.initialize=function(e){var i=this,o=this._initializeCallbacks,a=function(s){i._isInitialized=!s,i._initializeCallbacks=[],o.forEach(function(h){return h(s)})};if(this._isInitialized)return e();o.push(e),o.length===1&&this._writable.readFile(Le,"utf8",ge("r"),function(s,h){if(s){if(s.errno!==f.ENOENT)return a(s)}else i._deleteLog=h;i._reparseDeletionLog(),a()})},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},t.prototype.getDeletionLog=function(){return this._deleteLog},t.prototype.restoreDeletionLog=function(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog("")},t.prototype.rename=function(e,i,o){var a=this;if(!(!this.checkInitAsync(o)||this.checkPathAsync(e,o)||this.checkPathAsync(i,o))){if(e===Le||i===Le)return o(u.EPERM("Cannot rename deletion log."));if(e===i)return o();this.stat(e,!1,function(s,h){return s?o(s):a.stat(i,!1,function(d,O){var L=a;function H(et){var ft=et.shift();if(!ft)return o();var yt=p.resolve(e,ft),It=p.resolve(i,ft);L.rename(yt,It,function(Vt){if(Vt)return o(Vt);H(et)})}var Q=511;if(h.isDirectory()){if(d)return d.errno!==f.ENOENT?o(d):a._writable.exists(e,function(et){if(et)return a._writable.rename(e,i,o);a._writable.mkdir(i,Q,function(ft){if(ft)return o(ft);a._readable.readdir(e,function(yt,It){if(yt)return o();H(It)})})});if(Q=O.mode,!O.isDirectory())return o(u.ENOTDIR(i));a.readdir(i,function(et,ft){if(ft&&ft.length)return o(u.ENOTEMPTY(i));a._readable.readdir(e,function(yt,It){if(yt)return o();H(It)})})}if(O&&O.isDirectory())return o(u.EISDIR(i));a.readFile(e,null,ge("r"),function(et,ft){return et?o(et):a.writeFile(i,ft,null,ge("w"),h.mode,function(yt){return yt?o(yt):a.unlink(e,o)})})})})}},t.prototype.renameSync=function(e,i){var o=this;if(this.checkInitialized(),this.checkPath(e),this.checkPath(i),e===Le||i===Le)throw u.EPERM("Cannot rename deletion log.");var a=this.statSync(e,!1);if(a.isDirectory()){if(e===i)return;var s=511;if(this.existsSync(i)){var h=this.statSync(i,!1);if(s=h.mode,h.isDirectory()){if(this.readdirSync(i).length>0)throw u.ENOTEMPTY(i)}else throw u.ENOTDIR(i)}this._writable.existsSync(e)?this._writable.renameSync(e,i):this._writable.existsSync(i)||this._writable.mkdirSync(i,s),this._readable.existsSync(e)&&this._readable.readdirSync(e).forEach(function(d){o.renameSync(p.resolve(e,d),p.resolve(i,d))})}else{if(this.existsSync(i)&&this.statSync(i,!1).isDirectory())throw u.EISDIR(i);this.writeFileSync(i,this.readFileSync(e,null,ge("r")),null,ge("w"),a.mode)}e!==i&&this.existsSync(e)&&this.unlinkSync(e)},t.prototype.stat=function(e,i,o){var a=this;!this.checkInitAsync(o)||this._writable.stat(e,i,function(s,h){s&&s.errno===f.ENOENT?(a._deletedFiles[e]&&o(u.ENOENT(e)),a._readable.stat(e,i,function(d,O){O&&(O=O.clone(),O.mode=Tn(O.mode)),o(d,O)})):o(s,h)})},t.prototype.statSync=function(e,i){this.checkInitialized();try{return this._writable.statSync(e,i)}catch{if(this._deletedFiles[e])throw u.ENOENT(e);var o=this._readable.statSync(e,i).clone();return o.mode=Tn(o.mode),o}},t.prototype.open=function(e,i,o,a){var s=this;!this.checkInitAsync(a)||this.checkPathAsync(e,a)||this.stat(e,!1,function(h,d){if(d)switch(i.pathExistsAction()){case x.TRUNCATE_FILE:return s.createParentDirectoriesAsync(e,function(O){if(O)return a(O);s._writable.open(e,i,o,a)});case x.NOP:return s._writable.exists(e,function(O){O?s._writable.open(e,i,o,a):(d=d.clone(),d.mode=o,s._readable.readFile(e,null,ge("r"),function(L,H){if(L)return a(L);d.size===-1&&(d.size=H.length);var Q=new Ln(s,e,i,d,H);a(null,Q)}))});default:return a(u.EEXIST(e))}else switch(i.pathNotExistsAction()){case x.CREATE_FILE:return s.createParentDirectoriesAsync(e,function(O){return O?a(O):s._writable.open(e,i,o,a)});default:return a(u.ENOENT(e))}})},t.prototype.openSync=function(e,i,o){if(this.checkInitialized(),this.checkPath(e),e===Le)throw u.EPERM("Cannot open deletion log.");if(this.existsSync(e))switch(i.pathExistsAction()){case x.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,i,o);case x.NOP:if(this._writable.existsSync(e))return this._writable.openSync(e,i,o);var a=this._readable.readFileSync(e,null,ge("r")),s=this._readable.statSync(e,!1).clone();return s.mode=o,new Ln(this,e,i,s,a);default:throw u.EEXIST(e)}else switch(i.pathNotExistsAction()){case x.CREATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,i,o);default:throw u.ENOENT(e)}},t.prototype.unlink=function(e,i){var o=this;!this.checkInitAsync(i)||this.checkPathAsync(e,i)||this.exists(e,function(a){if(!a)return i(u.ENOENT(e));o._writable.exists(e,function(s){if(s)return o._writable.unlink(e,function(h){if(h)return i(h);o.exists(e,function(d){d&&o.deletePath(e),i(null)})});o.deletePath(e),i(null)})})},t.prototype.unlinkSync=function(e){if(this.checkInitialized(),this.checkPath(e),this.existsSync(e))this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e);else throw u.ENOENT(e)},t.prototype.rmdir=function(e,i){var o=this;if(!!this.checkInitAsync(i)){var a=function(){o.readdir(e,function(s,h){if(s)return i(s);if(h.length)return i(u.ENOTEMPTY(e));o.deletePath(e),i(null)})};this.exists(e,function(s){if(!s)return i(u.ENOENT(e));o._writable.exists(e,function(h){h?o._writable.rmdir(e,function(d){if(d)return i(d);o._readable.exists(e,function(O){O?a():i()})}):a()})})}},t.prototype.rmdirSync=function(e){if(this.checkInitialized(),this.existsSync(e)){if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(this.readdirSync(e).length>0)throw u.ENOTEMPTY(e);this.deletePath(e)}}else throw u.ENOENT(e)},t.prototype.mkdir=function(e,i,o){var a=this;!this.checkInitAsync(o)||this.exists(e,function(s){if(s)return o(u.EEXIST(e));a.createParentDirectoriesAsync(e,function(h){if(h)return o(h);a._writable.mkdir(e,i,o)})})},t.prototype.mkdirSync=function(e,i){if(this.checkInitialized(),this.existsSync(e))throw u.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,i)},t.prototype.readdir=function(e,i){var o=this;!this.checkInitAsync(i)||this.stat(e,!1,function(a,s){if(a)return i(a);if(!s.isDirectory())return i(u.ENOTDIR(e));o._writable.readdir(e,function(h,d){if(h&&h.code!=="ENOENT")return i(h);(h||!d)&&(d=[]),o._readable.readdir(e,function(O,L){(O||!L)&&(L=[]);var H={},Q=d.concat(L.filter(function(et){return!o._deletedFiles[e+"/"+et]})).filter(function(et){var ft=!H[et];return H[et]=!0,ft});i(null,Q)})})})},t.prototype.readdirSync=function(e){var i=this;this.checkInitialized();var o=this.statSync(e,!1);if(!o.isDirectory())throw u.ENOTDIR(e);var a=[];try{a=a.concat(this._writable.readdirSync(e))}catch{}try{a=a.concat(this._readable.readdirSync(e).filter(function(h){return!i._deletedFiles[e+"/"+h]}))}catch{}var s={};return a.filter(function(h){var d=!s[h];return s[h]=!0,d})},t.prototype.exists=function(e,i){var o=this;this.checkInitialized(),this._writable.exists(e,function(a){if(a)return i(!0);o._readable.exists(e,function(s){i(s&&o._deletedFiles[e]!==!0)})})},t.prototype.existsSync=function(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&this._deletedFiles[e]!==!0},t.prototype.chmod=function(e,i,o,a){var s=this;!this.checkInitAsync(a)||this.operateOnWritableAsync(e,function(h){if(h)return a(h);s._writable.chmod(e,i,o,a)})},t.prototype.chmodSync=function(e,i,o){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.chmodSync(e,i,o)})},t.prototype.chown=function(e,i,o,a,s){var h=this;!this.checkInitAsync(s)||this.operateOnWritableAsync(e,function(d){if(d)return s(d);h._writable.chown(e,i,o,a,s)})},t.prototype.chownSync=function(e,i,o,a){var s=this;this.checkInitialized(),this.operateOnWritable(e,function(){s._writable.chownSync(e,i,o,a)})},t.prototype.utimes=function(e,i,o,a){var s=this;!this.checkInitAsync(a)||this.operateOnWritableAsync(e,function(h){if(h)return a(h);s._writable.utimes(e,i,o,a)})},t.prototype.utimesSync=function(e,i,o){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.utimesSync(e,i,o)})},t.prototype.deletePath=function(e){this._deletedFiles[e]=!0,this.updateLog("d"+e+`
`)},t.prototype.updateLog=function(e){var i=this;this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(Le,this._deleteLog,"utf8",k.getFileFlag("w"),420,function(o){i._deleteLogUpdatePending=!1,o?i._deleteLogError=o:i._deleteLogUpdateNeeded&&(i._deleteLogUpdateNeeded=!1,i.updateLog(""))}))},t.prototype._reparseDeletionLog=function(){var e=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(i){e._deletedFiles[i.slice(1)]=i.slice(0,1)==="d"})},t.prototype.checkInitialized=function(){if(this._isInitialized){if(this._deleteLogError!==null){var e=this._deleteLogError;throw this._deleteLogError=null,e}}else throw new u(f.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")},t.prototype.checkInitAsync=function(e){if(this._isInitialized){if(this._deleteLogError!==null){var i=this._deleteLogError;return this._deleteLogError=null,e(i),!1}}else return e(new u(f.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;return!0},t.prototype.checkPath=function(e){if(e===Le)throw u.EPERM(e)},t.prototype.checkPathAsync=function(e,i){return e===Le?(i(u.EPERM(e)),!0):!1},t.prototype.createParentDirectoriesAsync=function(e,i){var o=p.dirname(e),a=[],s=this;this._writable.stat(o,!1,h);function h(O,L){O?(a.push(o),o=p.dirname(o),s._writable.stat(o,!1,h)):d()}function d(){if(!a.length)return i();var O=a.pop();s._readable.stat(O,!1,function(L,H){if(!H)return i();s._writable.mkdir(O,H.mode,function(Q){if(Q)return i(Q);d()})})}},t.prototype.createParentDirectories=function(e){for(var i=this,o=p.dirname(e),a=[];!this._writable.existsSync(o);)a.push(o),o=p.dirname(o);a=a.reverse(),a.forEach(function(s){i._writable.mkdirSync(s,i.statSync(s,!1).mode)})},t.prototype.operateOnWritable=function(e,i){if(this.existsSync(e))this._writable.existsSync(e)||this.copyToWritable(e),i();else throw u.ENOENT(e)},t.prototype.operateOnWritableAsync=function(e,i){var o=this;this.exists(e,function(a){if(!a)return i(u.ENOENT(e));o._writable.exists(e,function(s){if(s)i();else return o.copyToWritableAsync(e,i)})})},t.prototype.copyToWritable=function(e){var i=this.statSync(e,!1);i.isDirectory()?this._writable.mkdirSync(e,i.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,ge("r")),null,ge("w"),this.statSync(e,!1).mode)},t.prototype.copyToWritableAsync=function(e,i){var o=this;this.stat(e,!1,function(a,s){if(a)return i(a);if(s.isDirectory())return o._writable.mkdir(e,s.mode,i);o._readable.readFile(e,null,ge("r"),function(h,d){if(h)return i(h);o.writeFile(e,d,null,ge("w"),s.mode,i)})})},t}(K),dr=function(n){function t(r,e,i){i===void 0&&(i=!0),n.call(this,new Dn(r,e)),Ot(i,t.Name,{readable:"readable file system",writable:"writable file system"})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.writable,e.readable,!1);o.initialize(function(a){i(a,o)},!1)}catch(a){i(a)}},t.isAvailable=function(){return Dn.isAvailable()},t.prototype.initialize=function(e,i){i===void 0&&(i=!0),i&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),n.prototype.initialize.call(this,e)},t.prototype.getOverlayedFileSystems=function(){return n.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},t.prototype.unwrap=function(){return n.prototype.getFSUnlocked.call(this)},t}(mt);dr.Name="OverlayFS",dr.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}};var Zt;(function(n){n[n.CB=0]="CB",n[n.FD=1]="FD",n[n.API_ERROR=2]="API_ERROR",n[n.STATS=3]="STATS",n[n.PROBE=4]="PROBE",n[n.FILEFLAG=5]="FILEFLAG",n[n.BUFFER=6]="BUFFER",n[n.ERROR=7]="ERROR"})(Zt||(Zt={}));var qr=function(){this._callbacks={},this._nextId=0};qr.prototype.toRemoteArg=function(t){var r=this._nextId++;return this._callbacks[r]=t,{type:Zt.CB,id:r}},qr.prototype.toLocalArg=function(t){var r=this._callbacks[t];return delete this._callbacks[t],r};var Nr=function(){this._fileDescriptors={},this._nextId=0};Nr.prototype.toRemoteArg=function(t,r,e,i){var o=this._nextId++,a,s;this._fileDescriptors[o]=t,t.stat(function(h,d){h?i(h):(s=Ve(d.toBuffer()),e.isReadable()?t.read(S.alloc(d.size),0,d.size,0,function(O,L,H){O?i(O):(a=Ve(H),i(null,{type:Zt.FD,id:o,data:a,stat:s,path:r,flag:e.getFlagString()}))}):i(null,{type:Zt.FD,id:o,data:new ArrayBuffer(0),stat:s,path:r,flag:e.getFlagString()}))})},Nr.prototype.applyFdAPIRequest=function(t,r){var e=this,i=t.args[0];this._applyFdChanges(i,function(o,a){o?r(o):a[t.method](function(s){t.method==="close"&&delete e._fileDescriptors[i.id],r(s)})})},Nr.prototype._applyFdChanges=function(t,r){var e=this._fileDescriptors[t.id],i=Xe(t.data),o=A.fromBuffer(Xe(t.stat)),a=k.getFileFlag(t.flag);a.isWriteable()?e.write(i,0,i.length,a.isAppendable()?e.getPos():0,function(s){function h(){e.stat(function(d,O){d?r(d):O.mode!==o.mode?e.chmod(o.mode,function(L){r(L,e)}):r(d,e)})}s?r(s):a.isAppendable()?h():e.truncate(i.length,function(){h()})}):r(null,e)};function Rr(n){return{type:Zt.API_ERROR,errorData:Ve(n.writeToBuffer())}}function An(n){return u.fromBuffer(Xe(n.errorData))}function Cn(n){return{type:Zt.ERROR,name:n.name,message:n.message,stack:n.stack}}function Mn(n){var t=Kt[n.name];typeof t!="function"&&(t=Error);var r=new t(n.message);return r.stack=n.stack,r}function Pn(n){return{type:Zt.STATS,statsData:Ve(n.toBuffer())}}function Bn(n){return A.fromBuffer(Xe(n.statsData))}function Un(n){return{type:Zt.FILEFLAG,flagStr:n.getFlagString()}}function zn(n){return k.getFileFlag(n.flagStr)}function Ve(n){return J(n)}function Xe(n){return Et(n)}function jn(n){return{type:Zt.BUFFER,data:Ve(n)}}function Wn(n){return Xe(n.data)}function Po(n){return n&&typeof n=="object"&&n.hasOwnProperty("browserfsMessage")&&n.browserfsMessage}function Bo(n){return n&&typeof n=="object"&&n.hasOwnProperty("browserfsMessage")&&n.browserfsMessage}var Hn=function(n){function t(r,e,i,o,a,s){n.call(this,r,e,i,o,s),this._remoteFdId=a}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getRemoteFdId=function(){return this._remoteFdId},t.prototype.toRemoteArg=function(){return{type:Zt.FD,id:this._remoteFdId,data:Ve(this.getBuffer()),stat:Ve(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},t.prototype.sync=function(e){this._syncClose("sync",e)},t.prototype.close=function(e){this._syncClose("close",e)},t.prototype._syncClose=function(e,i){var o=this;this.isDirty()?this._fs.syncClose(e,this,function(a){a||o.resetDirty(),i(a)}):i()},t}(oe),br=function(n){function t(r,e){var i=this;e===void 0&&(e=!0),n.call(this),this._callbackConverter=new qr,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=r,Ot(e,t.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(o){var a=o.data;if(Bo(a)){var s,h=a.args,d=new Array(h.length);for(s=0;s<d.length;s++)d[s]=i._argRemote2Local(h[s]);i._callbackConverter.toLocalArg(a.cbId).apply(null,d)}})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.worker,!1);o.initialize(function(){i(null,o)})},t.isAvailable=function(){return typeof importScripts<"u"||typeof Worker<"u"},t.attachRemoteListener=function(e){var i=new Nr;function o(s,h,d){switch(typeof s){case"object":s instanceof A?d(null,Pn(s)):s instanceof u?d(null,Rr(s)):s instanceof gt?d(null,i.toRemoteArg(s,h[0],h[1],d)):s instanceof k?d(null,Un(s)):s instanceof S?d(null,jn(s)):s instanceof Error?d(null,Cn(s)):d(null,s);break;default:d(null,s);break}}function a(s,h){if(!s)return s;switch(typeof s){case"object":if(typeof s.type=="number"){var d=s;switch(d.type){case Zt.CB:var O=s.id;return function(){var L=arguments,H,Q=new Array(arguments.length),et,ft=arguments.length;function yt(It){ft>0&&(ft=-1,et={browserfsMessage:!0,cbId:O,args:[Rr(It)]},e.postMessage(et))}for(H=0;H<arguments.length;H++)(function(It,Vt){o(Vt,h,function(se,Ne){Q[It]=Ne,se?yt(se):--ft===0&&(et={browserfsMessage:!0,cbId:O,args:Q},e.postMessage(et))})})(H,L[H]);arguments.length===0&&(et={browserfsMessage:!0,cbId:O,args:Q},e.postMessage(et))};case Zt.API_ERROR:return An(d);case Zt.STATS:return Bn(d);case Zt.FILEFLAG:return zn(d);case Zt.BUFFER:return Wn(d);case Zt.ERROR:return Mn(d);default:return s}}else return s;default:return s}}e.addEventListener("message",function(s){var h=s.data;if(Po(h)){var d=h.args,O=new Array(d.length);switch(h.method){case"close":case"sync":(function(){var Q=d[1];i.applyFdAPIRequest(h,function(et){var ft={browserfsMessage:!0,cbId:Q.id,args:et?[Rr(et)]:[]};e.postMessage(ft)})})();break;case"probe":(function(){var Q=st.getRootFS(),et=d[1],ft={type:Zt.PROBE,isReadOnly:Q.isReadOnly(),supportsLinks:Q.supportsLinks(),supportsProps:Q.supportsProps()},yt={browserfsMessage:!0,cbId:et.id,args:[ft]};e.postMessage(yt)})();break;default:for(var L=0;L<d.length;L++)O[L]=a(d[L],O);var H=st.getRootFS();H[h.method].apply(H,O);break}}})},t.prototype.getName=function(){return t.Name},t.prototype.initialize=function(e){var i=this;if(this._isInitialized)e();else{var o={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(Mt()),this._callbackConverter.toRemoteArg(function(a){i._isInitialized=!0,i._isReadOnly=a.isReadOnly,i._supportLinks=a.supportsLinks,i._supportProps=a.supportsProps,e()})]};this._worker.postMessage(o)}},t.prototype.isReadOnly=function(){return this._isReadOnly},t.prototype.supportsSynch=function(){return!1},t.prototype.supportsLinks=function(){return this._supportLinks},t.prototype.supportsProps=function(){return this._supportProps},t.prototype.rename=function(e,i,o){this._rpc("rename",arguments)},t.prototype.stat=function(e,i,o){this._rpc("stat",arguments)},t.prototype.open=function(e,i,o,a){this._rpc("open",arguments)},t.prototype.unlink=function(e,i){this._rpc("unlink",arguments)},t.prototype.rmdir=function(e,i){this._rpc("rmdir",arguments)},t.prototype.mkdir=function(e,i,o){this._rpc("mkdir",arguments)},t.prototype.readdir=function(e,i){this._rpc("readdir",arguments)},t.prototype.exists=function(e,i){this._rpc("exists",arguments)},t.prototype.realpath=function(e,i,o){this._rpc("realpath",arguments)},t.prototype.truncate=function(e,i,o){this._rpc("truncate",arguments)},t.prototype.readFile=function(e,i,o,a){this._rpc("readFile",arguments)},t.prototype.writeFile=function(e,i,o,a,s,h){this._rpc("writeFile",arguments)},t.prototype.appendFile=function(e,i,o,a,s,h){this._rpc("appendFile",arguments)},t.prototype.chmod=function(e,i,o,a){this._rpc("chmod",arguments)},t.prototype.chown=function(e,i,o,a,s){this._rpc("chown",arguments)},t.prototype.utimes=function(e,i,o,a){this._rpc("utimes",arguments)},t.prototype.link=function(e,i,o){this._rpc("link",arguments)},t.prototype.symlink=function(e,i,o,a){this._rpc("symlink",arguments)},t.prototype.readlink=function(e,i){this._rpc("readlink",arguments)},t.prototype.syncClose=function(e,i,o){this._worker.postMessage({browserfsMessage:!0,method:e,args:[i.toRemoteArg(),this._callbackConverter.toRemoteArg(o)]})},t.prototype._argRemote2Local=function(e){if(!e)return e;switch(typeof e){case"object":if(typeof e.type=="number"){var i=e;switch(i.type){case Zt.API_ERROR:return An(i);case Zt.FD:var o=i;return new Hn(this,o.path,k.getFileFlag(o.flag),A.fromBuffer(Xe(o.stat)),o.id,Xe(o.data));case Zt.STATS:return Bn(i);case Zt.FILEFLAG:return zn(i);case Zt.BUFFER:return Wn(i);case Zt.ERROR:return Mn(i);default:return e}}else return e;default:return e}},t.prototype._rpc=function(e,i){for(var o=this,a=new Array(i.length),s=0;s<i.length;s++)a[s]=o._argLocal2Remote(i[s]);var h={browserfsMessage:!0,method:e,args:a};this._worker.postMessage(h)},t.prototype._argLocal2Remote=function(e){if(!e)return e;switch(typeof e){case"object":return e instanceof A?Pn(e):e instanceof u?Rr(e):e instanceof Hn?e.toRemoteArg():e instanceof k?Un(e):e instanceof S?jn(e):e instanceof Error?Cn(e):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(e);default:return e}},t}(K);br.Name="WorkerFS",br.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(n,t){n.postMessage?t():t(new u(f.EINVAL,"option must be a Web Worker instance."))}}};function Uo(n,t,r){var e=new XMLHttpRequest;e.open("GET",n,!0);var i=!0;switch(t){case"buffer":e.responseType="arraybuffer";break;case"json":try{e.responseType="json",i=e.responseType==="json"}catch{i=!1}break;default:return r(new u(f.EINVAL,"Invalid download type: "+t))}e.onreadystatechange=function(o){if(e.readyState===4)if(e.status===200)switch(t){case"buffer":return r(null,e.response?S.from(e.response):Mt());case"json":return i?r(null,e.response):r(null,JSON.parse(e.responseText))}else return r(new u(e.status,"XHR error."))},e.send()}function zo(n,t){var r=new XMLHttpRequest;r.open("GET",n,!1);var e=null,i=null;if(r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(o){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":var a=r.responseText;e=S.alloc(a.length);for(var s=0;s<a.length;s++)e[s]=a.charCodeAt(s);return;case"json":e=JSON.parse(r.responseText);return}else{i=new u(r.status,"XHR error.");return}},r.send(),i)throw i;return e}function jo(n,t){var r=new XMLHttpRequest;switch(r.open("GET",n,!1),t){case"buffer":r.responseType="arraybuffer";break;case"json":break;default:throw new u(f.EINVAL,"Invalid download type: "+t)}var e,i;if(r.onreadystatechange=function(o){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":e=S.from(r.response);break;case"json":e=JSON.parse(r.response);break}else i=new u(r.status,"XHR error.")},r.send(),i)throw i;return e}function Zn(n,t,r){var e=new XMLHttpRequest;e.open("HEAD",t,n),e.onreadystatechange=function(i){if(e.readyState===4)if(e.status===200)try{return r(null,parseInt(e.getResponseHeader("Content-Length")||"-1",10))}catch{return r(new u(f.EIO,"XHR HEAD error: Could not read content-length."))}else return r(new u(e.status,"XHR HEAD error."))},e.send()}var Vn=Uo,Wo=St&&typeof Blob<"u"?jo:zo;function Ho(n){var t=-1;return Zn(!1,n,function(r,e){if(r)throw r;t=e}),t}function Zo(n,t){Zn(!0,n,t)}var Ee=function(){this._index={},this.addPath("/",new de)};Ee.fromListing=function(t){var r=new Ee,e=new de;r._index["/"]=e;for(var i=[["",t,e]];i.length>0;){var o=void 0,a=i.pop(),s=a[0],h=a[1],d=a[2];for(var O in h)if(h.hasOwnProperty(O)){var L=h[O],H=s+"/"+O;L?(r._index[H]=o=new de,i.push([H,L,o])):o=new nr(new A(D.FILE,-1,365)),d&&(d._ls[O]=o)}}return r},Ee.prototype.fileIterator=function(t){var r=this;for(var e in r._index)if(r._index.hasOwnProperty(e))for(var i=r._index[e],o=i.getListing(),a=0,s=o;a<s.length;a+=1){var h=s[a],d=i.getItem(h);De(d)&&t(d.getData())}},Ee.prototype.addPath=function(t,r){if(!r)throw new Error("Inode must be specified");if(t[0]!=="/")throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===r;var e=this._split_path(t),i=e[0],o=e[1],a=this._index[i];return a===void 0&&t!=="/"&&(a=new de,!this.addPath(i,a))||t!=="/"&&!a.addItem(o,r)?!1:(Pe(r)&&(this._index[t]=r),!0)},Ee.prototype.addPathFast=function(t,r){var e=t.lastIndexOf("/"),i=e===0?"/":t.substring(0,e),o=t.substring(e+1),a=this._index[i];return a===void 0&&(a=new de,this.addPathFast(i,a)),a.addItem(o,r)?(r.isDir()&&(this._index[t]=r),!0):!1},Ee.prototype.removePath=function(t){var r=this,e=this._split_path(t),i=e[0],o=e[1],a=this._index[i];if(a===void 0)return null;var s=a.remItem(o);if(s===null)return null;if(Pe(s)){for(var h=s.getListing(),d=0,O=h;d<O.length;d+=1){var L=O[d];r.removePath(t+"/"+L)}t!=="/"&&delete this._index[t]}return s},Ee.prototype.ls=function(t){var r=this._index[t];return r===void 0?null:r.getListing()},Ee.prototype.getInode=function(t){var r=this._split_path(t),e=r[0],i=r[1],o=this._index[e];return o===void 0?null:e===t?o:o.getItem(i)},Ee.prototype._split_path=function(t){var r=p.dirname(t),e=t.substr(r.length+(r==="/"?0:1));return[r,e]};var nr=function(t){this.data=t};nr.prototype.isFile=function(){return!0},nr.prototype.isDir=function(){return!1},nr.prototype.getData=function(){return this.data},nr.prototype.setData=function(t){this.data=t};var de=function(t){t===void 0&&(t=null),this.data=t,this._ls={}};de.prototype.isFile=function(){return!1},de.prototype.isDir=function(){return!0},de.prototype.getData=function(){return this.data},de.prototype.getStats=function(){return new A(D.DIRECTORY,4096,365)},de.prototype.getListing=function(){return Object.keys(this._ls)},de.prototype.getItem=function(t){var r=this._ls[t];return r||null},de.prototype.addItem=function(t,r){return t in this._ls?!1:(this._ls[t]=r,!0)},de.prototype.remItem=function(t){var r=this._ls[t];return r===void 0?null:(delete this._ls[t],r)};function De(n){return!!n&&n.isFile()}function Pe(n){return!!n&&n.isDir()}function Vo(n,t,r){try{r(null,n.toString(t))}catch(e){r(e)}}var Tr=function(n){function t(r,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),r||(r="index.json"),e.length>0&&e.charAt(e.length-1)!=="/"&&(e=e+"/"),this.prefixUrl=e;var o=null;if(typeof r=="string"){if(o=this._requestFileSync(r,"json"),!o)throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else o=r;Ot(i,t.Name,{index:typeof r=="string"?r:"file index as an object",baseUrl:e}),this._index=Ee.fromListing(o)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){e.index===void 0&&(e.index="index.json"),typeof e.index=="string"?t.FromURL(e.index,i,e.baseUrl,!1):i(null,new t(e.index,e.baseUrl,!1))},t.isAvailable=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},t.FromURL=function(e,i,o,a){o===void 0&&(o=e.slice(0,e.lastIndexOf("/")+1)),a===void 0&&(a=!0),a&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+e+'", baseUrl: "'+o+`" }, cb)' instead.`),Vn(e,"json",function(s,h){s?i(s):i(null,new t(h,o,!1))})},t.prototype.empty=function(){this._index.fileIterator(function(e){e.fileData=null})},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.preloadFile=function(e,i){var o=this._index.getInode(e);if(De(o)){if(o===null)throw u.ENOENT(e);var a=o.getData();a.size=i.length,a.fileData=i}else throw u.EISDIR(e)},t.prototype.stat=function(e,i,o){var a=this._index.getInode(e);if(a===null)return o(u.ENOENT(e));var s;De(a)?(s=a.getData(),s.size<0?this._requestFileSizeAsync(e,function(h,d){if(h)return o(h);s.size=d,o(null,s.clone())}):o(null,s.clone())):Pe(a)?(s=a.getStats(),o(null,s)):o(u.FileError(f.EINVAL,e))},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw u.ENOENT(e);var a;if(De(o))a=o.getData(),a.size<0&&(a.size=this._requestFileSizeSync(e));else if(Pe(o))a=o.getStats();else throw u.FileError(f.EINVAL,e);return a},t.prototype.open=function(e,i,o,a){if(i.isWriteable())return a(new u(f.EPERM,e));var s=this,h=this._index.getInode(e);if(h===null)return a(u.ENOENT(e));if(De(h)){var d=h.getData();switch(i.pathExistsAction()){case x.THROW_EXCEPTION:case x.TRUNCATE_FILE:return a(u.EEXIST(e));case x.NOP:if(d.fileData)return a(null,new fe(s,e,i,d.clone(),d.fileData));this._requestFileAsync(e,"buffer",function(O,L){return O?a(O):(d.size=L.length,d.fileData=L,a(null,new fe(s,e,i,d.clone(),L)))});break;default:return a(new u(f.EINVAL,"Invalid FileMode object."))}}else return a(u.EISDIR(e))},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new u(f.EPERM,e);var a=this._index.getInode(e);if(a===null)throw u.ENOENT(e);if(De(a)){var s=a.getData();switch(i.pathExistsAction()){case x.THROW_EXCEPTION:case x.TRUNCATE_FILE:throw u.EEXIST(e);case x.NOP:if(s.fileData)return new fe(this,e,i,s.clone(),s.fileData);var h=this._requestFileSync(e,"buffer");return s.size=h.length,s.fileData=h,new fe(this,e,i,s.clone(),h);default:throw new u(f.EINVAL,"Invalid FileMode object.")}}else throw u.EISDIR(e)},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i===null)throw u.ENOENT(e);if(Pe(i))return i.getListing();throw u.ENOTDIR(e)},t.prototype.readFile=function(e,i,o,a){var s=a;this.open(e,o,420,function(h,d){if(h)return a(h);a=function(H,Q){d.close(function(et){return H||(H=et),s(H,Q)})};var O=d,L=O.getBuffer();i===null?a(h,bt(L)):Vo(L,i,a)})},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var s=a,h=s.getBuffer();return i===null?bt(h):h.toString(i)}finally{a.closeSync()}},t.prototype.getXhrPath=function(e){return e.charAt(0)==="/"&&(e=e.slice(1)),this.prefixUrl+e},t.prototype._requestFileAsync=function(e,i,o){Vn(this.getXhrPath(e),i,o)},t.prototype._requestFileSync=function(e,i){return Wo(this.getXhrPath(e),i)},t.prototype._requestFileSizeAsync=function(e,i){Zo(this.getXhrPath(e),i)},t.prototype._requestFileSizeSync=function(e){return Ho(this.getXhrPath(e))},t}(K);Tr.Name="XmlHttpRequest",Tr.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var Ye=function(){};Ye.str2byte=function(t,r){for(var e=t.length>r.length?r.length:t.length,i=0;i<e;i++){var o=t.charCodeAt(i);if(o>127){var a=Ye.extendedChars.indexOf(t.charAt(i));a>-1&&(o=a+128)}r[o]=i}return e},Ye.byte2str=function(t){for(var r=new Array(t.length),e=0;e<t.length;e++){var i=t[e];i>127?r[e]=Ye.extendedChars[i-128]:r[e]=String.fromCharCode(i)}return r.join("")},Ye.byteLength=function(t){return t.length},Ye.extendedChars=["\xC7","\xFC","\xE9","\xE2","\xE4","\xE0","\xE5","\xE7","\xEA","\xEB","\xE8","\xEF","\xEE","\xEC","\xC4","\xC5","\xC9","\xE6","\xC6","\xF4","\xF6","\xF2","\xFB","\xF9","\xFF","\xD6","\xDC","\xF8","\xA3","\xD8","\xD7","\u0192","\xE1","\xED","\xF3","\xFA","\xF1","\xD1","\xAA","\xBA","\xBF","\xAE","\xAC","\xBD","\xBC","\xA1","\xAB","\xBB","_","_","_","\xA6","\xA6","\xC1","\xC2","\xC0","\xA9","\xA6","\xA6","+","+","\xA2","\xA5","+","+","-","-","+","-","+","\xE3","\xC3","+","+","-","-","\xA6","-","+","\xA4","\xF0","\xD0","\xCA","\xCB","\xC8","i","\xCD","\xCE","\xCF","+","+","_","_","\xA6","\xCC","_","\xD3","\xDF","\xD4","\xD2","\xF5","\xD5","\xB5","\xFE","\xDE","\xDA","\xDB","\xD9","\xFD","\xDD","\xAF","\xB4","\xAD","\xB1","_","\xBE","\xB6","\xA7","\xF7","\xB8","\xB0","\xA8","\xB7","\xB9","\xB3","\xB2","_"," "];var Xo=v(31).inflateRaw,Xn={},Yn;(function(n){n[n.MSDOS=0]="MSDOS",n[n.AMIGA=1]="AMIGA",n[n.OPENVMS=2]="OPENVMS",n[n.UNIX=3]="UNIX",n[n.VM_CMS=4]="VM_CMS",n[n.ATARI_ST=5]="ATARI_ST",n[n.OS2_HPFS=6]="OS2_HPFS",n[n.MAC=7]="MAC",n[n.Z_SYSTEM=8]="Z_SYSTEM",n[n.CP_M=9]="CP_M",n[n.NTFS=10]="NTFS",n[n.MVS=11]="MVS",n[n.VSE=12]="VSE",n[n.ACORN_RISC=13]="ACORN_RISC",n[n.VFAT=14]="VFAT",n[n.ALT_MVS=15]="ALT_MVS",n[n.BEOS=16]="BEOS",n[n.TANDEM=17]="TANDEM",n[n.OS_400=18]="OS_400",n[n.OSX=19]="OSX"})(Yn||(Yn={}));var ir;(function(n){n[n.STORED=0]="STORED",n[n.SHRUNK=1]="SHRUNK",n[n.REDUCED_1=2]="REDUCED_1",n[n.REDUCED_2=3]="REDUCED_2",n[n.REDUCED_3=4]="REDUCED_3",n[n.REDUCED_4=5]="REDUCED_4",n[n.IMPLODE=6]="IMPLODE",n[n.DEFLATE=8]="DEFLATE",n[n.DEFLATE64=9]="DEFLATE64",n[n.TERSE_OLD=10]="TERSE_OLD",n[n.BZIP2=12]="BZIP2",n[n.LZMA=14]="LZMA",n[n.TERSE_NEW=18]="TERSE_NEW",n[n.LZ77=19]="LZ77",n[n.WAVPACK=97]="WAVPACK",n[n.PPMD=98]="PPMD"})(ir||(ir={}));function qn(n,t){var r=t&31,e=(t>>5&15)-1,i=(t>>9)+1980,o=n&31,a=n>>5&63,s=n>>11;return new Date(i,e,r,s,a,o)}function Lr(n,t,r,e){return e===0?"":t?n.toString("utf8",r,r+e):Ye.byte2str(n.slice(r,r+e))}var we=function(t){if(this.data=t,t.readUInt32LE(0)!==67324752)throw new u(f.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};we.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},we.prototype.flags=function(){return this.data.readUInt16LE(6)},we.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},we.prototype.lastModFileTime=function(){return qn(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},we.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},we.prototype.crc32=function(){return this.data.readUInt32LE(14)},we.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},we.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},we.prototype.fileName=function(){return Lr(this.data,this.useUTF8(),30,this.fileNameLength())},we.prototype.extraField=function(){var t=30+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},we.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},we.prototype.useUTF8=function(){return(this.flags()&2048)===2048};var yr=function(t,r,e){this.header=t,this.record=r,this.data=e};yr.prototype.decompress=function(){var t=this.header.compressionMethod(),r=Xn[t];if(r)return r(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var e=ir[t];throw e||(e="Unknown: "+t),new u(f.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+e)},yr.prototype.getHeader=function(){return this.header},yr.prototype.getRecord=function(){return this.record},yr.prototype.getRawData=function(){return this.data};var Lt=function(t,r){if(this.zipData=t,this.data=r,this.data.readUInt32LE(0)!==33639248)throw new u(f.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};Lt.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},Lt.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},Lt.prototype.flag=function(){return this.data.readUInt16LE(8)},Lt.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},Lt.prototype.lastModFileTime=function(){return qn(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},Lt.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},Lt.prototype.crc32=function(){return this.data.readUInt32LE(16)},Lt.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},Lt.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},Lt.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},Lt.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},Lt.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},Lt.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},Lt.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},Lt.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},Lt.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},Lt.prototype.produceFilename=function(){var t=Lr(this.data,this.useUTF8(),46,this.fileNameLength());return t.replace(/\\/g,"/")},Lt.prototype.fileName=function(){return this._filename},Lt.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},Lt.prototype.extraField=function(){var t=44+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},Lt.prototype.fileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return Lr(this.data,this.useUTF8(),t,this.fileCommentLength())},Lt.prototype.rawFileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(t,t+this.fileCommentLength())},Lt.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},Lt.prototype.isDirectory=function(){var t=this.fileName();return!!(this.externalAttributes()&16)||t.charAt(t.length-1)==="/"},Lt.prototype.isFile=function(){return!this.isDirectory()},Lt.prototype.useUTF8=function(){return(this.flag()&2048)===2048},Lt.prototype.isEncrypted=function(){return(this.flag()&1)===1},Lt.prototype.getFileData=function(){var t=this.headerRelativeOffset(),r=new we(this.zipData.slice(t));return new yr(r,this,this.zipData.slice(t+r.totalSize()))},Lt.prototype.getData=function(){return this.getFileData().decompress()},Lt.prototype.getRawData=function(){return this.getFileData().getRawData()},Lt.prototype.getStats=function(){return new A(D.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var Oe=function(t){if(this.data=t,this.data.readUInt32LE(0)!==101010256)throw new u(f.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};Oe.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},Oe.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},Oe.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},Oe.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},Oe.prototype.cdSize=function(){return this.data.readUInt32LE(12)},Oe.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},Oe.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},Oe.prototype.cdZipComment=function(){return Lr(this.data,!0,22,this.cdZipCommentLength())},Oe.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var Gn=function(t,r,e,i){this.index=t,this.directoryEntries=r,this.eocd=e,this.data=i},qe=function(n){function t(r,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),this.name=e,this._index=new Ee,this._directoryEntries=[],this._eocd=null,Ot(i,t.Name,{zipData:"zip data as a Buffer",name:e}),r instanceof Gn?(this._index=r.index,this._directoryEntries=r.directoryEntries,this._eocd=r.eocd,this.data=r.data):(this.data=r,this.populateIndex())}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{t.computeIndex(e.zipData,function(o){var a=new t(o,e.name,!1);i(null,a)},!1)}catch(o){i(o)}},t.isAvailable=function(){return!0},t.RegisterDecompressionMethod=function(e,i){Xn[e]=i},t.computeIndex=function(e,i,o){o===void 0&&(o=!0),o&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var a=new Ee,s=t.getEOCD(e);if(s.diskNumber()!==s.cdDiskNumber())throw new u(f.EINVAL,"ZipFS does not support spanned zip files.");var h=s.cdOffset();if(h===4294967295)throw new u(f.EINVAL,"ZipFS does not support Zip64.");var d=h+s.cdSize();t.computeIndexResponsive(e,a,h,d,i,[],s)},t.getEOCD=function(e){for(var i=22,o=Math.min(i+65535,e.length-1),a=i;a<o;a++)if(e.readUInt32LE(e.length-a)===101010256)return new Oe(e.slice(e.length-a));throw new u(f.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},t.addToIndex=function(e,i){var o=e.fileName();if(o.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");o.charAt(o.length-1)==="/"&&(o=o.substr(0,o.length-1)),e.isDirectory()?i.addPathFast("/"+o,new de(e)):i.addPathFast("/"+o,new nr(e))},t.computeIndexResponsive=function(e,i,o,a,s,h,d){if(o<a){for(var O=0;O++<200&&o<a;){var L=new Lt(e,e.slice(o));t.addToIndex(L,i),o+=L.totalSize(),h.push(L)}Yr(function(){t.computeIndexResponsive(e,i,o,a,s,h,d)})}else s(new Gn(i,h,d,e))},t.prototype.getName=function(){return t.Name+(this.name!==""?" "+this.name:"")},t.prototype.getCentralDirectoryEntry=function(e){var i=this._index.getInode(e);if(i===null)throw u.ENOENT(e);if(De(i))return i.getData();if(Pe(i))return i.getData();throw u.EPERM("Invalid inode: "+i)},t.prototype.getCentralDirectoryEntryAt=function(e){var i=this._directoryEntries[e];if(!i)throw new RangeError("Invalid directory index: "+e+".");return i},t.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},t.prototype.getEndOfCentralDirectory=function(){return this._eocd},t.prototype.diskSpace=function(e,i){i(this.data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw u.ENOENT(e);var a;if(De(o))a=o.getData().getStats();else if(Pe(o))a=o.getStats();else throw new u(f.EINVAL,"Invalid inode.");return a},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new u(f.EPERM,e);var a=this._index.getInode(e);if(a)if(De(a)){var s=a.getData(),h=s.getStats();switch(i.pathExistsAction()){case x.THROW_EXCEPTION:case x.TRUNCATE_FILE:throw u.EEXIST(e);case x.NOP:return new fe(this,e,i,h,s.getData());default:throw new u(f.EINVAL,"Invalid FileMode object.")}}else throw u.EISDIR(e);else throw u.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i){if(Pe(i))return i.getListing();throw u.ENOTDIR(e)}else throw u.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var s=a,h=s.getBuffer();return i===null?bt(h):h.toString(i)}finally{a.closeSync()}},t.prototype.populateIndex=function(){var e=this,i=this._eocd=t.getEOCD(this.data);if(i.diskNumber()!==i.cdDiskNumber())throw new u(f.EINVAL,"ZipFS does not support spanned zip files.");var o=i.cdOffset();if(o===4294967295)throw new u(f.EINVAL,"ZipFS does not support Zip64.");for(var a=o+i.cdSize();o<a;){var s=new Lt(e.data,e.data.slice(o));o+=s.totalSize(),t.addToIndex(s,e._index),e._directoryEntries.push(s)}},t}(re);qe.Name="ZipFS",qe.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:F},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},qe.CompressionMethod=ir,qe.RegisterDecompressionMethod(ir.DEFLATE,function(n,t,r){return xt(Xo(n.slice(0,t),{chunkSize:r}))}),qe.RegisterDecompressionMethod(ir.STORED,function(n,t,r){return bt(n,0,r)});var Yo="IEEE_P1282";function ye(n,t,r){return n.toString("ascii",t,t+r).trim()}function Gr(n,t,r){if(r===1)return String.fromCharCode(n[t]);for(var e=Math.floor(r/2),i=new Array(e),o=0;o<e;o++){var a=t+(o<<1);i[o]=String.fromCharCode(n[a+1]|n[a]<<8)}return i.join("")}function ke(n,t){var r=parseInt(ye(n,t,4),10),e=parseInt(ye(n,t+4,2),10),i=parseInt(ye(n,t+6,2),10),o=parseInt(ye(n,t+8,2),10),a=parseInt(ye(n,t+10,2),10),s=parseInt(ye(n,t+12,2),10),h=parseInt(ye(n,t+14,2),10);return new Date(r,e,i,o,a,s,h*100)}function Ge(n,t){var r=n[t],e=n[t+1],i=n[t+2],o=n[t+3],a=n[t+4],s=n[t+5];return new Date(r,e-1,i,o,a,s)}function qo(n,t){var r=n.slice(t),e=new Qt(r);switch(e.signatureWord()){case 17221:return new ti(r);case 20548:return new Ko(r);case 21328:return new ei(r);case 21332:return new ri(r);case 17746:return new ni(r);case 17747:return new Qo(r);case 20568:return new oi(r);case 20558:return new $o(r);case 21324:return new Jr(r);case 20045:return new ai(r);case 17228:return new Kr(r);case 20556:return new ta(r);case 21061:return new si(r);case 21574:return new fi(r);case 21318:return new ea(r);case 21074:return new ii(r);default:return e}}function Jn(n,t,r,e){r=r-4;for(var i=new Array;t<r;){var o=qo(n,t),a=o.length();if(a===0)return i;if(t+=a,o instanceof ri)break;o instanceof ti?i=i.concat(o.getEntries(e)):i.push(o)}return i}var or=function(t){this._data=t};or.prototype.type=function(){return this._data[0]},or.prototype.standardIdentifier=function(){return ye(this._data,1,5)},or.prototype.version=function(){return this._data[6]},or.prototype.data=function(){return this._data.slice(7,2048)};var Kn=function(n){function t(r){n.call(this,r),this._root=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.systemIdentifier=function(){return this._getString32(8)},t.prototype.volumeIdentifier=function(){return this._getString32(40)},t.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},t.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},t.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},t.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},t.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},t.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},t.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},t.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},t.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},t.prototype.rootDirectoryEntry=function(e){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(e)),this._root},t.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},t.prototype.publisherIdentifier=function(){return this._getString(318,128)},t.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},t.prototype.applicationIdentifier=function(){return this._getString(574,128)},t.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},t.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},t.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},t.prototype.volumeCreationDate=function(){return ke(this._data,813)},t.prototype.volumeModificationDate=function(){return ke(this._data,830)},t.prototype.volumeExpirationDate=function(){return ke(this._data,847)},t.prototype.volumeEffectiveDate=function(){return ke(this._data,864)},t.prototype.fileStructureVersion=function(){return this._data[881]},t.prototype.applicationUsed=function(){return this._data.slice(883,883+512)},t.prototype.reserved=function(){return this._data.slice(1395,1395+653)},t.prototype._getString32=function(e){return this._getString(e,32)},t}(or),Go=function(n){function t(r){if(n.call(this,r),this.type()!==1)throw new u(f.EIO,"Invalid primary volume descriptor.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"ISO9660"},t.prototype._constructRootDirectoryRecord=function(e){return new Qn(e,-1)},t.prototype._getString=function(e,i){return this._getString(e,i)},t}(Kn),Jo=function(n){function t(r){if(n.call(this,r),this.type()!==2)throw new u(f.EIO,"Invalid supplementary volume descriptor.");var e=this.escapeSequence(),i=e[2];if(e[0]!==37||e[1]!==47||i!==64&&i!==67&&i!==69)throw new u(f.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+e.toString())}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"Joliet"},t.prototype.escapeSequence=function(){return this._data.slice(88,120)},t.prototype._constructRootDirectoryRecord=function(e){return new $n(e,-1)},t.prototype._getString=function(e,i){return Gr(this._data,e,i)},t}(Kn),jt=function(t,r){this._suEntries=null,this._fileOrDir=null,this._data=t,this._rockRidgeOffset=r};jt.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},jt.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},jt.prototype.rootCheckForRockRidge=function(t){var r=this.getDirectory(t);this._rockRidgeOffset=r.getDotEntry(t)._getRockRidgeOffset(t),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},jt.prototype.length=function(){return this._data[0]},jt.prototype.extendedAttributeRecordLength=function(){return this._data[1]},jt.prototype.lba=function(){return this._data.readUInt32LE(2)*2048},jt.prototype.dataLength=function(){return this._data.readUInt32LE(10)},jt.prototype.recordingDate=function(){return Ge(this._data,18)},jt.prototype.fileFlags=function(){return this._data[25]},jt.prototype.fileUnitSize=function(){return this._data[26]},jt.prototype.interleaveGapSize=function(){return this._data[27]},jt.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},jt.prototype.identifier=function(){return this._getString(33,this._data[32])},jt.prototype.fileName=function(t){if(this.hasRockRidge()){var r=this._rockRidgeFilename(t);if(r!==null)return r}var e=this.identifier();if(this.isDirectory(t))return e;var i=e.indexOf(";");return i===-1?e:e[i-1]==="."?e.slice(0,i-1):e.slice(0,i)},jt.prototype.isDirectory=function(t){var r=!!(this.fileFlags()&2);return!r&&this.hasRockRidge()&&(r=this.getSUEntries(t).filter(function(e){return e instanceof Kr}).length>0),r},jt.prototype.isSymlink=function(t){return this.hasRockRidge()&&this.getSUEntries(t).filter(function(r){return r instanceof Jr}).length>0},jt.prototype.getSymlinkPath=function(t){for(var r="",e=this.getSUEntries(t),i=this._getGetString(),o=0,a=e;o<a.length;o+=1){var s=a[o];if(s instanceof Jr){for(var h=s.componentRecords(),d=0,O=h;d<O.length;d+=1){var L=O[d],H=L.flags();H&2?r+="./":H&4?r+="../":H&8?r+="/":(r+=L.content(i),H&1||(r+="/"))}if(!s.continueFlag())break}}return r.length>1&&r[r.length-1]==="/"?r.slice(0,r.length-1):r},jt.prototype.getFile=function(t){if(this.isDirectory(t))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=t.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},jt.prototype.getDirectory=function(t){if(!this.isDirectory(t))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(t)),this._fileOrDir},jt.prototype.getSUEntries=function(t){return this._suEntries||this._constructSUEntries(t),this._suEntries},jt.prototype._rockRidgeFilename=function(t){var r=this.getSUEntries(t).filter(function(h){return h instanceof ai});if(r.length===0||r[0].flags()&6)return null;for(var e="",i=this._getGetString(),o=0,a=r;o<a.length;o+=1){var s=a[o];if(e+=s.name(i),!(s.flags()&1))break}return e},jt.prototype._constructSUEntries=function(t){var r=33+this._data[32];r%2===1&&r++,r+=this._rockRidgeOffset,this._suEntries=Jn(this._data,r,this.length(),t)},jt.prototype._getRockRidgeOffset=function(t){this._rockRidgeOffset=0;var r=this.getSUEntries(t);if(r.length>0){var e=r[0];if(e instanceof ei&&e.checkBytesPass())for(var i=1;i<r.length;i++){var o=r[i];if(o instanceof ii||o instanceof ni&&o.extensionIdentifier()===Yo)return e.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var Qn=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return ye(this._data,e,i)},t.prototype._constructDirectory=function(e){return new ra(this,e)},t.prototype._getGetString=function(){return ye},t}(jt),$n=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return Gr(this._data,e,i)},t.prototype._constructDirectory=function(e){return new na(this,e)},t.prototype._getGetString=function(){return Gr},t}(jt),Qt=function(t){this._data=t};Qt.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},Qt.prototype.signatureWordString=function(){return ye(this._data,0,2)},Qt.prototype.length=function(){return this._data[2]},Qt.prototype.suVersion=function(){return this._data[3]};var ti=function(n){function t(r){n.call(this,r),this._entries=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},t.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},t.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},t.prototype.getEntries=function(e){if(!this._entries){var i=this.continuationLba()*2048+this.continuationLbaOffset();this._entries=Jn(e,i,this.continuationLength(),e)}return this._entries},t}(Qt),Ko=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Qt),ei=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.checkBytesPass=function(){return this._data[4]===190&&this._data[5]===239},t.prototype.bytesSkipped=function(){return this._data[6]},t}(Qt),ri=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Qt),ni=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.identifierLength=function(){return this._data[4]},t.prototype.descriptorLength=function(){return this._data[5]},t.prototype.sourceLength=function(){return this._data[6]},t.prototype.extensionVersion=function(){return this._data[7]},t.prototype.extensionIdentifier=function(){return ye(this._data,8,this.identifierLength())},t.prototype.extensionDescriptor=function(){return ye(this._data,8+this.identifierLength(),this.descriptorLength())},t.prototype.extensionSource=function(){return ye(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},t}(Qt),Qo=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.extensionSequence=function(){return this._data[4]},t}(Qt),ii=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Qt),oi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.mode=function(){return this._data.readUInt32LE(4)},t.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},t.prototype.uid=function(){return this._data.readUInt32LE(20)},t.prototype.gid=function(){return this._data.readUInt32LE(28)},t.prototype.inode=function(){return this._data.readUInt32LE(36)},t}(Qt),$o=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},t.prototype.devTLow=function(){return this._data.readUInt32LE(12)},t}(Qt),Jr=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.continueFlag=function(){return this.flags()&1},t.prototype.componentRecords=function(){for(var e=this,i=new Array,o=5;o<this.length();){var a=new vr(e._data.slice(o));i.push(a),o+=a.length()}return i},t}(Qt),vr=function(t){this._data=t};vr.prototype.flags=function(){return this._data[0]},vr.prototype.length=function(){return 2+this.componentLength()},vr.prototype.componentLength=function(){return this._data[1]},vr.prototype.content=function(t){return t(this._data,2,this.componentLength())};var ai=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.name=function(e){return e(this._data,5,this.length()-5)},t}(Qt),Kr=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(Qt),ta=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(Qt),si=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Qt),fi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.creation=function(){return this.flags()&1?this._longFormDates()?ke(this._data,5):Ge(this._data,5):null},t.prototype.modify=function(){if(this.flags()&2){var e=this.flags()&1?1:0;return this._longFormDates?ke(this._data,5+e*17):Ge(this._data,5+e*7)}else return null},t.prototype.access=function(){if(this.flags()&4){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,this._longFormDates?ke(this._data,5+e*17):Ge(this._data,5+e*7)}else return null},t.prototype.backup=function(){if(this.flags()&16){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,this._longFormDates?ke(this._data,5+e*17):Ge(this._data,5+e*7)}else return null},t.prototype.expiration=function(){if(this.flags()&32){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,this._longFormDates?ke(this._data,5+e*17):Ge(this._data,5+e*7)}else return null},t.prototype.effective=function(){if(this.flags()&64){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,e+=this.flags()&32?1:0,this._longFormDates?ke(this._data,5+e*17):Ge(this._data,5+e*7)}else return null},t.prototype._longFormDates=function(){return!!this.flags()},t}(Qt),ea=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},t.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},t.prototype.tableDepth=function(){return this._data[20]},t}(Qt),gr=function(t,r){var e=this;this._fileList=[],this._fileMap={},this._record=t;var i=t.lba(),o=i+t.dataLength();if(!(t.fileFlags()&2)){var a=t.getSUEntries(r).filter(function(O){return O instanceof Kr})[0];i=a.childDirectoryLba()*2048,o=1/0}for(;i<o;){var s=r[i];if(s===0){i++;continue}var h=e._constructDirectoryRecord(r.slice(i)),d=h.fileName(r);d!=="\0"&&d!==""?(!h.hasRockRidge()||h.getSUEntries(r).filter(function(O){return O instanceof si}).length===0)&&(e._fileMap[d]=h,e._fileList.push(d)):o===1/0&&(o=i+h.dataLength()),i+=h.length()}};gr.prototype.getRecord=function(t){return this._fileMap[t]},gr.prototype.getFileList=function(){return this._fileList},gr.prototype.getDotEntry=function(t){return this._constructDirectoryRecord(t.slice(this._record.lba()))};var ra=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new Qn(e,this._record.getRockRidgeOffset())},t}(gr),na=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new $n(e,this._record.getRockRidgeOffset())},t}(gr),Dr=function(n){function t(r,e,i){var o=this;e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),this._data=r,Ot(i,t.Name,{data:"ISO data as a Buffer",name:e});for(var a=!1,s=16*2048,h=new Array;!a;){var d=r.slice(s),O=new or(d);switch(O.type()){case 1:h.push(new Go(d));break;case 2:h.push(new Jo(d));break;case 255:a=!0;break}s+=2048}if(h.length===0)throw new u(f.EIO,"Unable to find a suitable volume descriptor.");h.forEach(function(L){(!o._pvd||o._pvd.type()!==2)&&(o._pvd=L)}),this._root=this._pvd.rootDirectoryEntry(r),this._name=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o,a;try{o=new t(e.data,e.name,!1)}catch(s){s=s}finally{i(a,o)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){var e="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(e+="-RockRidge"),e},t.prototype.diskSpace=function(e,i){i(this._data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._getDirectoryRecord(e);if(o===null)throw u.ENOENT(e);return this._getStats(e,o)},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new u(f.EPERM,e);var a=this._getDirectoryRecord(e);if(a){if(a.isSymlink(this._data))return this.openSync(p.resolve(e,a.getSymlinkPath(this._data)),i,o);if(a.isDirectory(this._data))throw u.EISDIR(e);var s=a.getFile(this._data),h=this._getStats(e,a);switch(i.pathExistsAction()){case x.THROW_EXCEPTION:case x.TRUNCATE_FILE:throw u.EEXIST(e);case x.NOP:return new fe(this,e,i,h,s);default:throw new u(f.EINVAL,"Invalid FileMode object.")}}else throw u.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._getDirectoryRecord(e);if(i){if(i.isDirectory(this._data))return i.getDirectory(this._data).getFileList().slice(0);throw u.ENOTDIR(e)}else throw u.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var s=a,h=s.getBuffer();return i===null?bt(h):h.toString(i)}finally{a.closeSync()}},t.prototype._getDirectoryRecord=function(e){var i=this;if(e==="/")return this._root;for(var o=e.split("/").slice(1),a=this._root,s=0,h=o;s<h.length;s+=1){var d=h[s];if(a.isDirectory(i._data)){if(a=a.getDirectory(i._data).getRecord(d),!a)return null}else return null}return a},t.prototype._getStats=function(e,i){if(i.isSymlink(this._data)){var o=p.resolve(e,i.getSymlinkPath(this._data)),a=this._getDirectoryRecord(o);return a?this._getStats(o,a):null}else{var s=i.dataLength(),h=365,d=i.recordingDate(),O=d,L=d,H=d;if(i.hasRockRidge())for(var Q=i.getSUEntries(this._data),et=0,ft=Q;et<ft.length;et+=1){var yt=ft[et];if(yt instanceof oi)h=yt.mode();else if(yt instanceof fi){var It=yt.flags();It&4&&(O=yt.access()),It&2&&(L=yt.modify()),It&1&&(H=yt.creation())}}return h=h&365,new A(i.isDirectory(this._data)?D.DIRECTORY:D.FILE,s,h,O,L,H)}},t}(re);Dr.Name="IsoFS",Dr.Options={data:{type:"object",description:"The ISO file in a buffer",validator:F}},[m,Er,_r,$e,Ir,tr,ur,Dr,lr,er,dr,br,Tr,qe].forEach(function(n){var t=n.Create;n.Create=function(r,e){var i=typeof r=="function",o=i?r:e,a=i?{}:r;function s(h){h?o(h):t.call(n,a,o)}I(n,a,s)}});var Ar={AsyncMirror:m,Dropbox:Er,Emscripten:_r,FolderAdapter:$e,HTML5FS:Ir,InMemory:tr,IndexedDB:ur,IsoFS:Dr,LocalStorage:lr,MountableFileSystem:er,OverlayFS:dr,WorkerFS:br,XmlHttpRequest:Tr,ZipFS:qe};N.initializeTTYs&&N.initializeTTYs();function ia(n){n.Buffer=S,n.process=N;var t=n.require?n.require:null;n.require=function(r){var e=ui(r);return e||t.apply(null,Array.prototype.slice.call(arguments,0))}}function oa(n,t){Ar[n]=t}function ui(n){switch(n){case"fs":return st;case"path":return p;case"buffer":return w;case"process":return N;case"bfs_utils":return Y;default:return Ar[n]}}function ci(n){return st.initialize(n)}function aa(n,t){Qr(n,function(r,e){e?(ci(e),t()):t(r)})}function Qr(n,t){var r=n.fs;if(!r)return t(new u(f.EPERM,'Missing "fs" property on configuration object.'));var e=n.options,i=0,o=!1;function a(){if(!o){o=!0;var d=Ar[r];d?d.Create(e,t):t(new u(f.EPERM,"File system "+r+" is not available in BrowserFS."))}}if(e!==null&&typeof e=="object"){var s=!1,h=Object.keys(e).filter(function(d){return d!=="fs"});h.forEach(function(d){var O=e[d];O!==null&&typeof O=="object"&&O.fs&&(i++,Qr(O,function(L,H){if(i--,L){if(o)return;o=!0,t(L)}else e[d]=H,i===0&&s&&a()}))}),s=!0}i===0&&a()}"ab".substr(-1)!=="b"&&(String.prototype.substr=function(n){return function(t,r){return t<0&&(t=this.length+t),n.call(this,t,r)}}(String.prototype.substr)),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(n,t){n===void 0&&(n=0),t===void 0&&(t=this.length);var r=this;return n<0&&(n=this.length+n,n<0&&(n=0)),t<0&&(t=this.length+t,t<0&&(t=0)),t<n&&(t=n),new Uint8Array(r.buffer,r.byteOffset+n,t-n)})),T.install=ia,T.registerFileSystem=oa,T.BFSRequire=ui,T.initialize=ci,T.configure=aa,T.getFileSystem=Qr,T.EmscriptenFS=_t,T.FileSystem=Ar,T.Errors=b,T.setImmediate=Yr}).call(T,v(1),function(){return this}(),v(5)(z),v(6))},function(z,T,v){z.exports=v(2).Buffer},function(z,T,v){(function(f){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license  MIT
*/var R=v(3),E=v(4);T.Buffer=f,T.SlowBuffer=W,T.INSPECT_MAX_BYTES=50;var N=2147483647;T.kMaxLength=N,f.TYPED_ARRAY_SUPPORT=w(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{var m=new Uint8Array(1);return m.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},m.foo()===42}catch{return!1}}function p(m){if(m>N)throw new RangeError("Invalid typed array length");var c=new Uint8Array(m);return c.__proto__=f.prototype,c}function f(m,c,l){if(typeof m=="number"){if(typeof c=="string")throw new Error("If encoding is specified then the first argument must be a string");return x(m)}return g(m,c,l)}typeof Symbol<"u"&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192;function g(m,c,l){if(typeof m=="number")throw new TypeError('"value" argument must not be a number');return oe(m)?A(m,c,l):typeof m=="string"?k(m,c):$(m)}f.from=function(m,c,l){return g(m,c,l)},f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array;function u(m){if(typeof m!="number")throw new TypeError('"size" argument must be a number');if(m<0)throw new RangeError('"size" argument must not be negative')}function b(m,c,l){return u(m),m<=0?p(m):c!==void 0?typeof l=="string"?p(m).fill(c,l):p(m).fill(c):p(m)}f.alloc=function(m,c,l){return b(m,c,l)};function x(m){return u(m),p(m<0?0:P(m)|0)}f.allocUnsafe=function(m){return x(m)},f.allocUnsafeSlow=function(m){return x(m)};function k(m,c){if((typeof c!="string"||c==="")&&(c="utf8"),!f.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');var l=pt(m,c)|0,_=p(l),C=_.write(m,c);return C!==l&&(_=_.slice(0,C)),_}function D(m){for(var c=m.length<0?0:P(m.length)|0,l=p(c),_=0;_<c;_+=1)l[_]=m[_]&255;return l}function A(m,c,l){if(c<0||m.byteLength<c)throw new RangeError("'offset' is out of bounds");if(m.byteLength<c+(l||0))throw new RangeError("'length' is out of bounds");var _;return c===void 0&&l===void 0?_=new Uint8Array(m):l===void 0?_=new Uint8Array(m,c):_=new Uint8Array(m,c,l),_.__proto__=f.prototype,_}function $(m){if(f.isBuffer(m)){var c=P(m.length)|0,l=p(c);return l.length===0||m.copy(l,0,0,c),l}if(m){if(fe(m)||"length"in m)return typeof m.length!="number"||_e(m.length)?p(0):D(m);if(m.type==="Buffer"&&Array.isArray(m.data))return D(m.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function P(m){if(m>=N)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+N.toString(16)+" bytes");return m|0}function W(m){return+m!=m&&(m=0),f.alloc(+m)}f.isBuffer=function(c){return c!=null&&c._isBuffer===!0},f.compare=function(c,l){if(!f.isBuffer(c)||!f.isBuffer(l))throw new TypeError("Arguments must be Buffers");if(c===l)return 0;for(var _=c.length,C=l.length,Z=0,q=Math.min(_,C);Z<q;++Z)if(c[Z]!==l[Z]){_=c[Z],C=l[Z];break}return _<C?-1:C<_?1:0},f.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(c,l){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return f.alloc(0);var _;if(l===void 0)for(l=0,_=0;_<c.length;++_)l+=c[_].length;var C=f.allocUnsafe(l),Z=0;for(_=0;_<c.length;++_){var q=c[_];if(!f.isBuffer(q))throw new TypeError('"list" argument must be an Array of Buffers');q.copy(C,Z),Z+=q.length}return C};function pt(m,c){if(f.isBuffer(m))return m.length;if(fe(m)||oe(m))return m.byteLength;typeof m!="string"&&(m=""+m);var l=m.length;if(l===0)return 0;for(var _=!1;;)switch(c){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":case void 0:return ht(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return re(m).length;default:if(_)return ht(m).length;c=(""+c).toLowerCase(),_=!0}}f.byteLength=pt;function G(m,c,l){var _=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,c>>>=0,l<=c))return"";for(m||(m="utf8");;)switch(m){case"hex":return xt(this,c,l);case"utf8":case"utf-8":return qt(this,c,l);case"ascii":return J(this,c,l);case"latin1":case"binary":return ut(this,c,l);case"base64":return St(this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wt(this,c,l);default:if(_)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),_=!0}}f.prototype._isBuffer=!0;function Ft(m,c,l){var _=m[c];m[c]=m[l],m[l]=_}f.prototype.swap16=function(){var c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var l=0;l<c;l+=2)Ft(this,l,l+1);return this},f.prototype.swap32=function(){var c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var l=0;l<c;l+=4)Ft(this,l,l+3),Ft(this,l+1,l+2);return this},f.prototype.swap64=function(){var c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var l=0;l<c;l+=8)Ft(this,l,l+7),Ft(this,l+1,l+6),Ft(this,l+2,l+5),Ft(this,l+3,l+4);return this},f.prototype.toString=function(){var c=this.length;return c===0?"":arguments.length===0?qt(this,0,c):G.apply(this,arguments)},f.prototype.equals=function(c){if(!f.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:f.compare(this,c)===0},f.prototype.inspect=function(){var c="",l=T.INSPECT_MAX_BYTES;return this.length>0&&(c=this.toString("hex",0,l).match(/.{2}/g).join(" "),this.length>l&&(c+=" ... ")),"<Buffer "+c+">"},f.prototype.compare=function(c,l,_,C,Z){if(!f.isBuffer(c))throw new TypeError("Argument must be a Buffer");if(l===void 0&&(l=0),_===void 0&&(_=c?c.length:0),C===void 0&&(C=0),Z===void 0&&(Z=this.length),l<0||_>c.length||C<0||Z>this.length)throw new RangeError("out of range index");if(C>=Z&&l>=_)return 0;if(C>=Z)return-1;if(l>=_)return 1;if(l>>>=0,_>>>=0,C>>>=0,Z>>>=0,this===c)return 0;for(var q=Z-C,kt=_-l,Dt=Math.min(q,kt),Pt=this.slice(C,Z),Gt=c.slice(l,_),Ct=0;Ct<Dt;++Ct)if(Pt[Ct]!==Gt[Ct]){q=Pt[Ct],kt=Gt[Ct];break}return q<kt?-1:kt<q?1:0};function dt(m,c,l,_,C){if(m.length===0)return-1;if(typeof l=="string"?(_=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,_e(l)&&(l=C?0:m.length-1),l<0&&(l=m.length+l),l>=m.length){if(C)return-1;l=m.length-1}else if(l<0)if(C)l=0;else return-1;if(typeof c=="string"&&(c=f.from(c,_)),f.isBuffer(c))return c.length===0?-1:B(m,c,l,_,C);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?C?Uint8Array.prototype.indexOf.call(m,c,l):Uint8Array.prototype.lastIndexOf.call(m,c,l):B(m,[c],l,_,C);throw new TypeError("val must be string, number or Buffer")}function B(m,c,l,_,C){var Z=1,q=m.length,kt=c.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(m.length<2||c.length<2)return-1;Z=2,q/=2,kt/=2,l/=2}function Dt(Je,Ue){return Z===1?Je[Ue]:Je.readUInt16BE(Ue*Z)}var Pt;if(C){var Gt=-1;for(Pt=l;Pt<q;Pt++)if(Dt(m,Pt)===Dt(c,Gt===-1?0:Pt-Gt)){if(Gt===-1&&(Gt=Pt),Pt-Gt+1===kt)return Gt*Z}else Gt!==-1&&(Pt-=Pt-Gt),Gt=-1}else for(l+kt>q&&(l=q-kt),Pt=l;Pt>=0;Pt--){for(var Ct=!0,Fe=0;Fe<kt;Fe++)if(Dt(m,Pt+Fe)!==Dt(c,Fe)){Ct=!1;break}if(Ct)return Pt}return-1}f.prototype.includes=function(c,l,_){return this.indexOf(c,l,_)!==-1},f.prototype.indexOf=function(c,l,_){return dt(this,c,l,_,!0)},f.prototype.lastIndexOf=function(c,l,_){return dt(this,c,l,_,!1)};function tt(m,c,l,_){l=Number(l)||0;var C=m.length-l;_?(_=Number(_),_>C&&(_=C)):_=C;var Z=c.length;if(Z%2!==0)throw new TypeError("Invalid hex string");_>Z/2&&(_=Z/2);for(var q=0;q<_;++q){var kt=parseInt(c.substr(q*2,2),16);if(_e(kt))return q;m[l+q]=kt}return q}function st(m,c,l,_){return gt(ht(c,m.length-l),m,l,_)}function Rt(m,c,l,_){return gt(_t(c),m,l,_)}function vt(m,c,l,_){return Rt(m,c,l,_)}function At(m,c,l,_){return gt(re(c),m,l,_)}function Ot(m,c,l,_){return gt(K(c,m.length-l),m,l,_)}f.prototype.write=function(c,l,_,C){if(l===void 0)C="utf8",_=this.length,l=0;else if(_===void 0&&typeof l=="string")C=l,_=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(_)?(_=_>>>0,C===void 0&&(C="utf8")):(C=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Z=this.length-l;if((_===void 0||_>Z)&&(_=Z),c.length>0&&(_<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");for(var q=!1;;)switch(C){case"hex":return tt(this,c,l,_);case"utf8":case"utf-8":return st(this,c,l,_);case"ascii":return Rt(this,c,l,_);case"latin1":case"binary":return vt(this,c,l,_);case"base64":return At(this,c,l,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ot(this,c,l,_);default:if(q)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),q=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function St(m,c,l){return c===0&&l===m.length?R.fromByteArray(m):R.fromByteArray(m.slice(c,l))}function qt(m,c,l){l=Math.min(m.length,l);for(var _=[],C=c;C<l;){var Z=m[C],q=null,kt=Z>239?4:Z>223?3:Z>191?2:1;if(C+kt<=l){var Dt,Pt,Gt,Ct;switch(kt){case 1:Z<128&&(q=Z);break;case 2:Dt=m[C+1],(Dt&192)===128&&(Ct=(Z&31)<<6|Dt&63,Ct>127&&(q=Ct));break;case 3:Dt=m[C+1],Pt=m[C+2],(Dt&192)===128&&(Pt&192)===128&&(Ct=(Z&15)<<12|(Dt&63)<<6|Pt&63,Ct>2047&&(Ct<55296||Ct>57343)&&(q=Ct));break;case 4:Dt=m[C+1],Pt=m[C+2],Gt=m[C+3],(Dt&192)===128&&(Pt&192)===128&&(Gt&192)===128&&(Ct=(Z&15)<<18|(Dt&63)<<12|(Pt&63)<<6|Gt&63,Ct>65535&&Ct<1114112&&(q=Ct))}}q===null?(q=65533,kt=1):q>65535&&(q-=65536,_.push(q>>>10&1023|55296),q=56320|q&1023),_.push(q),C+=kt}return M(_)}var U=4096;function M(m){var c=m.length;if(c<=U)return String.fromCharCode.apply(String,m);for(var l="",_=0;_<c;)l+=String.fromCharCode.apply(String,m.slice(_,_+=U));return l}function J(m,c,l){var _="";l=Math.min(m.length,l);for(var C=c;C<l;++C)_+=String.fromCharCode(m[C]&127);return _}function ut(m,c,l){var _="";l=Math.min(m.length,l);for(var C=c;C<l;++C)_+=String.fromCharCode(m[C]);return _}function xt(m,c,l){var _=m.length;(!c||c<0)&&(c=0),(!l||l<0||l>_)&&(l=_);for(var C="",Z=c;Z<l;++Z)C+=rt(m[Z]);return C}function wt(m,c,l){for(var _=m.slice(c,l),C="",Z=0;Z<_.length;Z+=2)C+=String.fromCharCode(_[Z]+_[Z+1]*256);return C}f.prototype.slice=function(c,l){var _=this.length;c=~~c,l=l===void 0?_:~~l,c<0?(c+=_,c<0&&(c=0)):c>_&&(c=_),l<0?(l+=_,l<0&&(l=0)):l>_&&(l=_),l<c&&(l=c);var C=this.subarray(c,l);return C.__proto__=f.prototype,C};function Et(m,c,l){if(m%1!==0||m<0)throw new RangeError("offset is not uint");if(m+c>l)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUIntLE=function(c,l,_){c=c>>>0,l=l>>>0,_||Et(c,l,this.length);for(var C=this[c],Z=1,q=0;++q<l&&(Z*=256);)C+=this[c+q]*Z;return C},f.prototype.readUIntBE=function(c,l,_){c=c>>>0,l=l>>>0,_||Et(c,l,this.length);for(var C=this[c+--l],Z=1;l>0&&(Z*=256);)C+=this[c+--l]*Z;return C},f.prototype.readUInt8=function(c,l){return c=c>>>0,l||Et(c,1,this.length),this[c]},f.prototype.readUInt16LE=function(c,l){return c=c>>>0,l||Et(c,2,this.length),this[c]|this[c+1]<<8},f.prototype.readUInt16BE=function(c,l){return c=c>>>0,l||Et(c,2,this.length),this[c]<<8|this[c+1]},f.prototype.readUInt32LE=function(c,l){return c=c>>>0,l||Et(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},f.prototype.readUInt32BE=function(c,l){return c=c>>>0,l||Et(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},f.prototype.readIntLE=function(c,l,_){c=c>>>0,l=l>>>0,_||Et(c,l,this.length);for(var C=this[c],Z=1,q=0;++q<l&&(Z*=256);)C+=this[c+q]*Z;return Z*=128,C>=Z&&(C-=Math.pow(2,8*l)),C},f.prototype.readIntBE=function(c,l,_){c=c>>>0,l=l>>>0,_||Et(c,l,this.length);for(var C=l,Z=1,q=this[c+--C];C>0&&(Z*=256);)q+=this[c+--C]*Z;return Z*=128,q>=Z&&(q-=Math.pow(2,8*l)),q},f.prototype.readInt8=function(c,l){return c=c>>>0,l||Et(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},f.prototype.readInt16LE=function(c,l){c=c>>>0,l||Et(c,2,this.length);var _=this[c]|this[c+1]<<8;return _&32768?_|4294901760:_},f.prototype.readInt16BE=function(c,l){c=c>>>0,l||Et(c,2,this.length);var _=this[c+1]|this[c]<<8;return _&32768?_|4294901760:_},f.prototype.readInt32LE=function(c,l){return c=c>>>0,l||Et(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},f.prototype.readInt32BE=function(c,l){return c=c>>>0,l||Et(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},f.prototype.readFloatLE=function(c,l){return c=c>>>0,l||Et(c,4,this.length),E.read(this,c,!0,23,4)},f.prototype.readFloatBE=function(c,l){return c=c>>>0,l||Et(c,4,this.length),E.read(this,c,!1,23,4)},f.prototype.readDoubleLE=function(c,l){return c=c>>>0,l||Et(c,8,this.length),E.read(this,c,!0,52,8)},f.prototype.readDoubleBE=function(c,l){return c=c>>>0,l||Et(c,8,this.length),E.read(this,c,!1,52,8)};function bt(m,c,l,_,C,Z){if(!f.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>C||c<Z)throw new RangeError('"value" argument is out of bounds');if(l+_>m.length)throw new RangeError("Index out of range")}f.prototype.writeUIntLE=function(c,l,_,C){if(c=+c,l=l>>>0,_=_>>>0,!C){var Z=Math.pow(2,8*_)-1;bt(this,c,l,_,Z,0)}var q=1,kt=0;for(this[l]=c&255;++kt<_&&(q*=256);)this[l+kt]=c/q&255;return l+_},f.prototype.writeUIntBE=function(c,l,_,C){if(c=+c,l=l>>>0,_=_>>>0,!C){var Z=Math.pow(2,8*_)-1;bt(this,c,l,_,Z,0)}var q=_-1,kt=1;for(this[l+q]=c&255;--q>=0&&(kt*=256);)this[l+q]=c/kt&255;return l+_},f.prototype.writeUInt8=function(c,l,_){return c=+c,l=l>>>0,_||bt(this,c,l,1,255,0),this[l]=c&255,l+1},f.prototype.writeUInt16LE=function(c,l,_){return c=+c,l=l>>>0,_||bt(this,c,l,2,65535,0),this[l]=c&255,this[l+1]=c>>>8,l+2},f.prototype.writeUInt16BE=function(c,l,_){return c=+c,l=l>>>0,_||bt(this,c,l,2,65535,0),this[l]=c>>>8,this[l+1]=c&255,l+2},f.prototype.writeUInt32LE=function(c,l,_){return c=+c,l=l>>>0,_||bt(this,c,l,4,4294967295,0),this[l+3]=c>>>24,this[l+2]=c>>>16,this[l+1]=c>>>8,this[l]=c&255,l+4},f.prototype.writeUInt32BE=function(c,l,_){return c=+c,l=l>>>0,_||bt(this,c,l,4,4294967295,0),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4},f.prototype.writeIntLE=function(c,l,_,C){if(c=+c,l=l>>>0,!C){var Z=Math.pow(2,8*_-1);bt(this,c,l,_,Z-1,-Z)}var q=0,kt=1,Dt=0;for(this[l]=c&255;++q<_&&(kt*=256);)c<0&&Dt===0&&this[l+q-1]!==0&&(Dt=1),this[l+q]=(c/kt>>0)-Dt&255;return l+_},f.prototype.writeIntBE=function(c,l,_,C){if(c=+c,l=l>>>0,!C){var Z=Math.pow(2,8*_-1);bt(this,c,l,_,Z-1,-Z)}var q=_-1,kt=1,Dt=0;for(this[l+q]=c&255;--q>=0&&(kt*=256);)c<0&&Dt===0&&this[l+q+1]!==0&&(Dt=1),this[l+q]=(c/kt>>0)-Dt&255;return l+_},f.prototype.writeInt8=function(c,l,_){return c=+c,l=l>>>0,_||bt(this,c,l,1,127,-128),c<0&&(c=255+c+1),this[l]=c&255,l+1},f.prototype.writeInt16LE=function(c,l,_){return c=+c,l=l>>>0,_||bt(this,c,l,2,32767,-32768),this[l]=c&255,this[l+1]=c>>>8,l+2},f.prototype.writeInt16BE=function(c,l,_){return c=+c,l=l>>>0,_||bt(this,c,l,2,32767,-32768),this[l]=c>>>8,this[l+1]=c&255,l+2},f.prototype.writeInt32LE=function(c,l,_){return c=+c,l=l>>>0,_||bt(this,c,l,4,2147483647,-2147483648),this[l]=c&255,this[l+1]=c>>>8,this[l+2]=c>>>16,this[l+3]=c>>>24,l+4},f.prototype.writeInt32BE=function(c,l,_){return c=+c,l=l>>>0,_||bt(this,c,l,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4};function Wt(m,c,l,_,C,Z){if(l+_>m.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Mt(m,c,l,_,C){return c=+c,l=l>>>0,C||Wt(m,c,l,4),E.write(m,c,l,_,23,4),l+4}f.prototype.writeFloatLE=function(c,l,_){return Mt(this,c,l,!0,_)},f.prototype.writeFloatBE=function(c,l,_){return Mt(this,c,l,!1,_)};function F(m,c,l,_,C){return c=+c,l=l>>>0,C||Wt(m,c,l,8),E.write(m,c,l,_,52,8),l+8}f.prototype.writeDoubleLE=function(c,l,_){return F(this,c,l,!0,_)},f.prototype.writeDoubleBE=function(c,l,_){return F(this,c,l,!1,_)},f.prototype.copy=function(c,l,_,C){if(_||(_=0),!C&&C!==0&&(C=this.length),l>=c.length&&(l=c.length),l||(l=0),C>0&&C<_&&(C=_),C===_||c.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("sourceStart out of bounds");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),c.length-l<C-_&&(C=c.length-l+_);var Z=C-_,q;if(this===c&&_<l&&l<C)for(q=Z-1;q>=0;--q)c[q+l]=this[q+_];else if(Z<1e3)for(q=0;q<Z;++q)c[q+l]=this[q+_];else Uint8Array.prototype.set.call(c,this.subarray(_,_+Z),l);return Z},f.prototype.fill=function(c,l,_,C){if(typeof c=="string"){if(typeof l=="string"?(C=l,l=0,_=this.length):typeof _=="string"&&(C=_,_=this.length),c.length===1){var Z=c.charCodeAt(0);Z<256&&(c=Z)}if(C!==void 0&&typeof C!="string")throw new TypeError("encoding must be a string");if(typeof C=="string"&&!f.isEncoding(C))throw new TypeError("Unknown encoding: "+C)}else typeof c=="number"&&(c=c&255);if(l<0||this.length<l||this.length<_)throw new RangeError("Out of range index");if(_<=l)return this;l=l>>>0,_=_===void 0?this.length:_>>>0,c||(c=0);var q;if(typeof c=="number")for(q=l;q<_;++q)this[q]=c;else{var kt=f.isBuffer(c)?c:new f(c,C),Dt=kt.length;for(q=0;q<_-l;++q)this[q+l]=kt[q%Dt]}return this};var I=/[^+/0-9A-Za-z-_]/g;function Y(m){if(m=m.trim().replace(I,""),m.length<2)return"";for(;m.length%4!==0;)m=m+"=";return m}function rt(m){return m<16?"0"+m.toString(16):m.toString(16)}function ht(m,c){c=c||1/0;for(var l,_=m.length,C=null,Z=[],q=0;q<_;++q){if(l=m.charCodeAt(q),l>55295&&l<57344){if(!C){if(l>56319){(c-=3)>-1&&Z.push(239,191,189);continue}else if(q+1===_){(c-=3)>-1&&Z.push(239,191,189);continue}C=l;continue}if(l<56320){(c-=3)>-1&&Z.push(239,191,189),C=l;continue}l=(C-55296<<10|l-56320)+65536}else C&&(c-=3)>-1&&Z.push(239,191,189);if(C=null,l<128){if((c-=1)<0)break;Z.push(l)}else if(l<2048){if((c-=2)<0)break;Z.push(l>>6|192,l&63|128)}else if(l<65536){if((c-=3)<0)break;Z.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((c-=4)<0)break;Z.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return Z}function _t(m){for(var c=[],l=0;l<m.length;++l)c.push(m.charCodeAt(l)&255);return c}function K(m,c){for(var l,_,C,Z=[],q=0;q<m.length&&!((c-=2)<0);++q)l=m.charCodeAt(q),_=l>>8,C=l%256,Z.push(C),Z.push(_);return Z}function re(m){return R.toByteArray(Y(m))}function gt(m,c,l,_){for(var C=0;C<_&&!(C+l>=c.length||C>=m.length);++C)c[C+l]=m[C];return C}function oe(m){return m instanceof ArrayBuffer||m!=null&&m.constructor!=null&&m.constructor.name==="ArrayBuffer"&&typeof m.byteLength=="number"}function fe(m){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(m)}function _e(m){return m!==m}}).call(T,v(1))},function(z,T){T.byteLength=f,T.toByteArray=g,T.fromByteArray=x;for(var v=[],S=[],R=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=0,w=E.length;N<w;++N)v[N]=E[N],S[E.charCodeAt(N)]=N;S["-".charCodeAt(0)]=62,S["_".charCodeAt(0)]=63;function p(k){var D=k.length;if(D%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return k[D-2]==="="?2:k[D-1]==="="?1:0}function f(k){return k.length*3/4-p(k)}function g(k){var D,A,$,P,W,pt,G=k.length;W=p(k),pt=new R(G*3/4-W),$=W>0?G-4:G;var Ft=0;for(D=0,A=0;D<$;D+=4,A+=3)P=S[k.charCodeAt(D)]<<18|S[k.charCodeAt(D+1)]<<12|S[k.charCodeAt(D+2)]<<6|S[k.charCodeAt(D+3)],pt[Ft++]=P>>16&255,pt[Ft++]=P>>8&255,pt[Ft++]=P&255;return W===2?(P=S[k.charCodeAt(D)]<<2|S[k.charCodeAt(D+1)]>>4,pt[Ft++]=P&255):W===1&&(P=S[k.charCodeAt(D)]<<10|S[k.charCodeAt(D+1)]<<4|S[k.charCodeAt(D+2)]>>2,pt[Ft++]=P>>8&255,pt[Ft++]=P&255),pt}function u(k){return v[k>>18&63]+v[k>>12&63]+v[k>>6&63]+v[k&63]}function b(k,D,A){for(var $,P=[],W=D;W<A;W+=3)$=(k[W]<<16)+(k[W+1]<<8)+k[W+2],P.push(u($));return P.join("")}function x(k){for(var D,A=k.length,$=A%3,P="",W=[],pt=16383,G=0,Ft=A-$;G<Ft;G+=pt)W.push(b(k,G,G+pt>Ft?Ft:G+pt));return $===1?(D=k[A-1],P+=v[D>>2],P+=v[D<<4&63],P+="=="):$===2&&(D=(k[A-2]<<8)+k[A-1],P+=v[D>>10],P+=v[D>>4&63],P+=v[D<<2&63],P+="="),W.push(P),W.join("")}},function(z,T){T.read=function(v,S,R,E,N){var w,p,f=N*8-E-1,g=(1<<f)-1,u=g>>1,b=-7,x=R?N-1:0,k=R?-1:1,D=v[S+x];for(x+=k,w=D&(1<<-b)-1,D>>=-b,b+=f;b>0;w=w*256+v[S+x],x+=k,b-=8);for(p=w&(1<<-b)-1,w>>=-b,b+=E;b>0;p=p*256+v[S+x],x+=k,b-=8);if(w===0)w=1-u;else{if(w===g)return p?NaN:(D?-1:1)*(1/0);p=p+Math.pow(2,E),w=w-u}return(D?-1:1)*p*Math.pow(2,w-E)},T.write=function(v,S,R,E,N,w){var p,f,g,u=w*8-N-1,b=(1<<u)-1,x=b>>1,k=N===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=E?0:w-1,A=E?1:-1,$=S<0||S===0&&1/S<0?1:0;for(S=Math.abs(S),isNaN(S)||S===1/0?(f=isNaN(S)?1:0,p=b):(p=Math.floor(Math.log(S)/Math.LN2),S*(g=Math.pow(2,-p))<1&&(p--,g*=2),p+x>=1?S+=k/g:S+=k*Math.pow(2,1-x),S*g>=2&&(p++,g/=2),p+x>=b?(f=0,p=b):p+x>=1?(f=(S*g-1)*Math.pow(2,N),p=p+x):(f=S*Math.pow(2,x-1)*Math.pow(2,N),p=0));N>=8;v[R+D]=f&255,D+=A,f/=256,N-=8);for(p=p<<N|f,u+=N;u>0;v[R+D]=p&255,D+=A,p/=256,u-=8);v[R+D-A]|=$*128}},function(z,T){z.exports=function(v){return v.webpackPolyfill||(v.deprecate=function(){},v.paths=[],v.children=[],v.webpackPolyfill=1),v}},function(z,T,v){var S=v(7),R=new S,E={};function N(p){E[p]||(typeof R[p]=="function"?E[p]=function(){return R[p].apply(R,arguments)}:E[p]=R[p])}for(var w in R)N(w);E.initializeTTYs=function(){R.stdin===null&&(R.initializeTTYs(),E.stdin=R.stdin,E.stdout=R.stdout,E.stderr=R.stderr)},R.nextTick(function(){E.initializeTTYs()}),z.exports=E},function(z,T,v){(function(S){var R=this&&this.__extends||function(g,u){for(var b in u)u.hasOwnProperty(b)&&(g[b]=u[b]);function x(){this.constructor=g}g.prototype=u===null?Object.create(u):(x.prototype=u.prototype,new x)},E=v(8),N=null,w=function(){function g(u,b){this.fun=u,this.array=b}return g.prototype.run=function(){this.fun.apply(null,this.array)},g}(),p=function(){function g(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return g.prototype.push=function(u){var b=this;this._queue.push(u)===1&&!this._draining&&setTimeout(function(){return b._drainQueue()},0)},g.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},g.prototype._drainQueue=function(){var u=this;if(!this._draining){var b=setTimeout(function(){return u._cleanUpNextTick()});this._draining=!0;for(var x=this._queue.length;x;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<x;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,x=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(b)}},g}(),f=function(g){R(u,g);function u(){g.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new p,this.execPath=S,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=Math.random()*1e3|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return u.prototype.chdir=function(b){N===null&&(N=v(9)),this._cwd=N.resolve(b)},u.prototype.cwd=function(){return this._cwd},u.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},u.prototype.nextTick=function(b){for(var x=[],k=1;k<arguments.length;k++)x[k-1]=arguments[k];this._queue.push(new w(b,x))},u.prototype.abort=function(){this.emit("abort")},u.prototype.exit=function(b){this.exitCode=b,this.emit("exit",[b])},u.prototype.getgid=function(){return this._gid},u.prototype.setgid=function(b){typeof b=="number"?this._gid=b:this._gid=1},u.prototype.getuid=function(){return this._uid},u.prototype.setuid=function(b){typeof b=="number"?this._uid=b:this._uid=1},u.prototype.kill=function(b,x){this.emit("kill",[b,x])},u.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},u.prototype.umask=function(b){b===void 0&&(b=this._mask);var x=this._mask;return this._mask=b,this.emit("umask",[b]),x},u.prototype.hrtime=function(){var b;typeof performance<"u"?b=performance.now():Date.now?b=Date.now():b=new Date().getTime();var x=b/1e3|0;return b-=x*1e3,b=b*1e6|0,[x,b]},u.prototype.initializeTTYs=function(){if(this.stdout===null){var b=v(10);this.stdout=new b,this.stderr=new b,this.stdin=new b}},u.prototype.disconnect=function(){},u}(E.EventEmitter);z.exports=f}).call(T,"/")},function(z,T){function v(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}z.exports=v,v.EventEmitter=v,v.prototype._events=void 0,v.prototype._maxListeners=void 0,v.defaultMaxListeners=10,v.prototype.setMaxListeners=function(w){if(!R(w)||w<0||isNaN(w))throw TypeError("n must be a positive number");return this._maxListeners=w,this},v.prototype.emit=function(w){var p,f,g,u,b,x;if(this._events||(this._events={}),w==="error"&&(!this._events.error||E(this._events.error)&&!this._events.error.length)){if(p=arguments[1],p instanceof Error)throw p;var k=new Error('Uncaught, unspecified "error" event. ('+p+")");throw k.context=p,k}if(f=this._events[w],N(f))return!1;if(S(f))switch(arguments.length){case 1:f.call(this);break;case 2:f.call(this,arguments[1]);break;case 3:f.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),f.apply(this,u)}else if(E(f))for(u=Array.prototype.slice.call(arguments,1),x=f.slice(),g=x.length,b=0;b<g;b++)x[b].apply(this,u);return!0},v.prototype.addListener=function(w,p){var f;if(!S(p))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",w,S(p.listener)?p.listener:p),this._events[w]?E(this._events[w])?this._events[w].push(p):this._events[w]=[this._events[w],p]:this._events[w]=p,E(this._events[w])&&!this._events[w].warned&&(N(this._maxListeners)?f=v.defaultMaxListeners:f=this._maxListeners,f&&f>0&&this._events[w].length>f&&(this._events[w].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[w].length),typeof console.trace=="function"&&console.trace())),this},v.prototype.on=v.prototype.addListener,v.prototype.once=function(w,p){if(!S(p))throw TypeError("listener must be a function");var f=!1;function g(){this.removeListener(w,g),f||(f=!0,p.apply(this,arguments))}return g.listener=p,this.on(w,g),this},v.prototype.removeListener=function(w,p){var f,g,u,b;if(!S(p))throw TypeError("listener must be a function");if(!this._events||!this._events[w])return this;if(f=this._events[w],u=f.length,g=-1,f===p||S(f.listener)&&f.listener===p)delete this._events[w],this._events.removeListener&&this.emit("removeListener",w,p);else if(E(f)){for(b=u;b-- >0;)if(f[b]===p||f[b].listener&&f[b].listener===p){g=b;break}if(g<0)return this;f.length===1?(f.length=0,delete this._events[w]):f.splice(g,1),this._events.removeListener&&this.emit("removeListener",w,p)}return this},v.prototype.removeAllListeners=function(w){var p,f;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[w]&&delete this._events[w],this;if(arguments.length===0){for(p in this._events)p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events={},this}if(f=this._events[w],S(f))this.removeListener(w,f);else if(f)for(;f.length;)this.removeListener(w,f[f.length-1]);return delete this._events[w],this},v.prototype.listeners=function(w){var p;return!this._events||!this._events[w]?p=[]:S(this._events[w])?p=[this._events[w]]:p=this._events[w].slice(),p},v.prototype.listenerCount=function(w){if(this._events){var p=this._events[w];if(S(p))return 1;if(p)return p.length}return 0},v.listenerCount=function(w,p){return w.listenerCount(p)};function S(w){return typeof w=="function"}function R(w){return typeof w=="number"}function E(w){return typeof w=="object"&&w!==null}function N(w){return w===void 0}},function(z,T,v){(function(S){var R=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function E(w){var p=R.exec(w);return p.shift(),p}var N=function(){function w(){}return w.normalize=function(p){p===""&&(p=".");var f=p.charAt(0)===w.sep;p=w._removeDuplicateSeps(p);for(var g=p.split(w.sep),u=[],b=0;b<g.length;b++){var x=g[b];x!=="."&&(x===".."&&(f||!f&&u.length>0&&u[0]!=="..")?u.pop():u.push(x))}if(!f&&u.length<2)switch(u.length){case 1:u[0]===""&&u.unshift(".");break;default:u.push(".")}return p=u.join(w.sep),f&&p.charAt(0)!==w.sep&&(p=w.sep+p),p},w.join=function(){for(var p=[],f=0;f<arguments.length;f++)p[f-0]=arguments[f];for(var g=[],u=0;u<p.length;u++){var b=p[u];if(typeof b!="string")throw new TypeError("Invalid argument type to path.join: "+typeof b);b!==""&&g.push(b)}return w.normalize(g.join(w.sep))},w.resolve=function(){for(var p=[],f=0;f<arguments.length;f++)p[f-0]=arguments[f];for(var g=[],u=0;u<p.length;u++){var b=p[u];if(typeof b!="string")throw new TypeError("Invalid argument type to path.join: "+typeof b);b!==""&&(b.charAt(0)===w.sep&&(g=[]),g.push(b))}var x=w.normalize(g.join(w.sep));if(x.length>1&&x.charAt(x.length-1)===w.sep)return x.substr(0,x.length-1);if(x.charAt(0)!==w.sep){x.charAt(0)==="."&&(x.length===1||x.charAt(1)===w.sep)&&(x=x.length===1?"":x.substr(2));var k=S.cwd();x!==""?x=this.normalize(k+(k!=="/"?w.sep:"")+x):x=k}return x},w.relative=function(p,f){var g;p=w.resolve(p),f=w.resolve(f);var u=p.split(w.sep),b=f.split(w.sep);b.shift(),u.shift();var x=0,k=[];for(g=0;g<u.length;g++){var D=u[g];if(D!==b[g]){x=u.length-g;break}}k=b.slice(g),u.length===1&&u[0]===""&&(x=0),x>u.length&&(x=u.length);var A="";for(g=0;g<x;g++)A+="../";return A+=k.join(w.sep),A.length>1&&A.charAt(A.length-1)===w.sep&&(A=A.substr(0,A.length-1)),A},w.dirname=function(p){p=w._removeDuplicateSeps(p);var f=p.charAt(0)===w.sep,g=p.split(w.sep);return g.pop()===""&&g.length>0&&g.pop(),g.length>1||g.length===1&&!f?g.join(w.sep):f?w.sep:"."},w.basename=function(p,f){if(f===void 0&&(f=""),p==="")return p;p=w.normalize(p);var g=p.split(w.sep),u=g[g.length-1];if(u===""&&g.length>1)return g[g.length-2];if(f.length>0){var b=u.substr(u.length-f.length);if(b===f)return u.substr(0,u.length-f.length)}return u},w.extname=function(p){p=w.normalize(p);var f=p.split(w.sep);if(p=f.pop(),p===""&&f.length>0&&(p=f.pop()),p==="..")return"";var g=p.lastIndexOf(".");return g===-1||g===0?"":p.substr(g)},w.isAbsolute=function(p){return p.length>0&&p.charAt(0)===w.sep},w._makeLong=function(p){return p},w.parse=function(p){var f=E(p);return{root:f[0],dir:f[0]+f[1].slice(0,-1),base:f[2],ext:f[3],name:f[2].slice(0,f[2].length-f[3].length)}},w.format=function(p){if(p===null||typeof p!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof p);var f=p.root||"";if(typeof f!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof p.root);var g=p.dir?p.dir+w.sep:"",u=p.base||"";return g+u},w._removeDuplicateSeps=function(p){return p=p.replace(this._replaceRegex,this.sep),p},w.sep="/",w._replaceRegex=new RegExp("//+","g"),w.delimiter=":",w.posix=w,w.win32=w,w}();z.exports=N}).call(T,v(6))},function(z,T,v){(function(S){var R=this&&this.__extends||function(w,p){for(var f in p)p.hasOwnProperty(f)&&(w[f]=p[f]);function g(){this.constructor=w}w.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)},E=v(11),N=function(w){R(p,w);function p(){w.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return p.prototype.setRawMode=function(f){this.isRaw!==f&&(this.isRaw=f,this.emit("modeChange"))},p.prototype.changeColumns=function(f){f!==this.columns&&(this.columns=f,this.emit("resize"))},p.prototype.changeRows=function(f){f!==this.rows&&(this.rows=f,this.emit("resize"))},p.isatty=function(f){return f&&f instanceof p},p.prototype._write=function(f,g,u){var b;try{var x;typeof f=="string"?x=new S(f,g):x=f,this._bufferedWrites.push(x),this._waitingForWrites&&this._read(1024)}catch(k){b=k}finally{u(b)}},p.prototype._read=function(f){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),!!this._waitingForWrites););},p}(E.Duplex);z.exports=N}).call(T,v(1))},function(z,T,v){z.exports=E;var S=v(8).EventEmitter,R=v(12);R(E,S),E.Readable=v(13),E.Writable=v(27),E.Duplex=v(28),E.Transform=v(29),E.PassThrough=v(30),E.Stream=E;function E(){S.call(this)}E.prototype.pipe=function(N,w){var p=this;function f(A){N.writable&&N.write(A)===!1&&p.pause&&p.pause()}p.on("data",f);function g(){p.readable&&p.resume&&p.resume()}N.on("drain",g),!N._isStdio&&(!w||w.end!==!1)&&(p.on("end",b),p.on("close",x));var u=!1;function b(){u||(u=!0,N.end())}function x(){u||(u=!0,typeof N.destroy=="function"&&N.destroy())}function k(A){if(D(),S.listenerCount(this,"error")===0)throw A}p.on("error",k),N.on("error",k);function D(){p.removeListener("data",f),N.removeListener("drain",g),p.removeListener("end",b),p.removeListener("close",x),p.removeListener("error",k),N.removeListener("error",k),p.removeListener("end",D),p.removeListener("close",D),N.removeListener("close",D)}return p.on("end",D),p.on("close",D),N.on("close",D),N.emit("pipe",p),N}},function(z,T){typeof Object.create=="function"?z.exports=function(S,R){S.super_=R,S.prototype=Object.create(R.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}})}:z.exports=function(S,R){S.super_=R;var E=function(){};E.prototype=R.prototype,S.prototype=new E,S.prototype.constructor=S}},function(z,T,v){(function(S){var R=function(){try{return v(11)}catch{}}();T=z.exports=v(14),T.Stream=R||T,T.Readable=T,T.Writable=v(22),T.Duplex=v(21),T.Transform=v(25),T.PassThrough=v(26),!S.browser&&S.env.READABLE_STREAM==="disable"&&R&&(z.exports=R)}).call(T,v(6))},function(z,T,v){(function(S){z.exports=P;var R=v(15),E=v(16),N;P.ReadableState=$,v(8).EventEmitter;var w=function(F,I){return F.listeners(I).length},p;(function(){try{p=v(11)}catch{}finally{p||(p=v(8).EventEmitter)}})();var f=v(2).Buffer,g=v(17),u=v(18);u.inherits=v(12);var b=v(19),x=void 0;b&&b.debuglog?x=b.debuglog("stream"):x=function(){};var k=v(20),D;u.inherits(P,p);function A(F,I,Y){if(typeof F.prependListener=="function")return F.prependListener(I,Y);!F._events||!F._events[I]?F.on(I,Y):E(F._events[I])?F._events[I].unshift(Y):F._events[I]=[Y,F._events[I]]}function $(F,I){N=N||v(21),F=F||{},this.objectMode=!!F.objectMode,I instanceof N&&(this.objectMode=this.objectMode||!!F.readableObjectMode);var Y=F.highWaterMark,rt=this.objectMode?16:16*1024;this.highWaterMark=Y||Y===0?Y:rt,this.highWaterMark=~~this.highWaterMark,this.buffer=new k,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=F.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,F.encoding&&(D||(D=v(24).StringDecoder),this.decoder=new D(F.encoding),this.encoding=F.encoding)}function P(F){if(N=N||v(21),!(this instanceof P))return new P(F);this._readableState=new $(F,this),this.readable=!0,F&&typeof F.read=="function"&&(this._read=F.read),p.call(this)}P.prototype.push=function(F,I){var Y=this._readableState;return!Y.objectMode&&typeof F=="string"&&(I=I||Y.defaultEncoding,I!==Y.encoding&&(F=g.from(F,I),I="")),W(this,Y,F,I,!1)},P.prototype.unshift=function(F){var I=this._readableState;return W(this,I,F,"",!0)},P.prototype.isPaused=function(){return this._readableState.flowing===!1};function W(F,I,Y,rt,ht){var _t=B(I,Y);if(_t)F.emit("error",_t);else if(Y===null)I.reading=!1,tt(F,I);else if(I.objectMode||Y&&Y.length>0)if(I.ended&&!ht){var K=new Error("stream.push() after EOF");F.emit("error",K)}else if(I.endEmitted&&ht){var re=new Error("stream.unshift() after end event");F.emit("error",re)}else{var gt;I.decoder&&!ht&&!rt&&(Y=I.decoder.write(Y),gt=!I.objectMode&&Y.length===0),ht||(I.reading=!1),gt||(I.flowing&&I.length===0&&!I.sync?(F.emit("data",Y),F.read(0)):(I.length+=I.objectMode?1:Y.length,ht?I.buffer.unshift(Y):I.buffer.push(Y),I.needReadable&&st(F))),vt(F,I)}else ht||(I.reading=!1);return pt(I)}function pt(F){return!F.ended&&(F.needReadable||F.length<F.highWaterMark||F.length===0)}P.prototype.setEncoding=function(F){return D||(D=v(24).StringDecoder),this._readableState.decoder=new D(F),this._readableState.encoding=F,this};var G=8388608;function Ft(F){return F>=G?F=G:(F--,F|=F>>>1,F|=F>>>2,F|=F>>>4,F|=F>>>8,F|=F>>>16,F++),F}function dt(F,I){return F<=0||I.length===0&&I.ended?0:I.objectMode?1:F!==F?I.flowing&&I.length?I.buffer.head.data.length:I.length:(F>I.highWaterMark&&(I.highWaterMark=Ft(F)),F<=I.length?F:I.ended?I.length:(I.needReadable=!0,0))}P.prototype.read=function(F){x("read",F),F=parseInt(F,10);var I=this._readableState,Y=F;if(F!==0&&(I.emittedReadable=!1),F===0&&I.needReadable&&(I.length>=I.highWaterMark||I.ended))return x("read: emitReadable",I.length,I.ended),I.length===0&&I.ended?Et(this):st(this),null;if(F=dt(F,I),F===0&&I.ended)return I.length===0&&Et(this),null;var rt=I.needReadable;x("need readable",rt),(I.length===0||I.length-F<I.highWaterMark)&&(rt=!0,x("length less than watermark",rt)),I.ended||I.reading?(rt=!1,x("reading or ended",rt)):rt&&(x("do read"),I.reading=!0,I.sync=!0,I.length===0&&(I.needReadable=!0),this._read(I.highWaterMark),I.sync=!1,I.reading||(F=dt(Y,I)));var ht;return F>0?ht=J(F,I):ht=null,ht===null?(I.needReadable=!0,F=0):I.length-=F,I.length===0&&(I.ended||(I.needReadable=!0),Y!==F&&I.ended&&Et(this)),ht!==null&&this.emit("data",ht),ht};function B(F,I){var Y=null;return!f.isBuffer(I)&&typeof I!="string"&&I!==null&&I!==void 0&&!F.objectMode&&(Y=new TypeError("Invalid non-string/buffer chunk")),Y}function tt(F,I){if(!I.ended){if(I.decoder){var Y=I.decoder.end();Y&&Y.length&&(I.buffer.push(Y),I.length+=I.objectMode?1:Y.length)}I.ended=!0,st(F)}}function st(F){var I=F._readableState;I.needReadable=!1,I.emittedReadable||(x("emitReadable",I.flowing),I.emittedReadable=!0,I.sync?R(Rt,F):Rt(F))}function Rt(F){x("emit readable"),F.emit("readable"),M(F)}function vt(F,I){I.readingMore||(I.readingMore=!0,R(At,F,I))}function At(F,I){for(var Y=I.length;!I.reading&&!I.flowing&&!I.ended&&I.length<I.highWaterMark&&(x("maybeReadMore read 0"),F.read(0),Y!==I.length);)Y=I.length;I.readingMore=!1}P.prototype._read=function(F){this.emit("error",new Error("_read() is not implemented"))},P.prototype.pipe=function(F,I){var Y=this,rt=this._readableState;switch(rt.pipesCount){case 0:rt.pipes=F;break;case 1:rt.pipes=[rt.pipes,F];break;default:rt.pipes.push(F);break}rt.pipesCount+=1,x("pipe count=%d opts=%j",rt.pipesCount,I);var ht=(!I||I.end!==!1)&&F!==S.stdout&&F!==S.stderr,_t=ht?re:fe;rt.endEmitted?R(_t):Y.once("end",_t),F.on("unpipe",K);function K(Z){x("onunpipe"),Z===Y&&fe()}function re(){x("onend"),F.end()}var gt=Ot(Y);F.on("drain",gt);var oe=!1;function fe(){x("cleanup"),F.removeListener("close",l),F.removeListener("finish",_),F.removeListener("drain",gt),F.removeListener("error",c),F.removeListener("unpipe",K),Y.removeListener("end",re),Y.removeListener("end",fe),Y.removeListener("data",m),oe=!0,rt.awaitDrain&&(!F._writableState||F._writableState.needDrain)&&gt()}var _e=!1;Y.on("data",m);function m(Z){x("ondata"),_e=!1;var q=F.write(Z);q===!1&&!_e&&((rt.pipesCount===1&&rt.pipes===F||rt.pipesCount>1&&Mt(rt.pipes,F)!==-1)&&!oe&&(x("false write response, pause",Y._readableState.awaitDrain),Y._readableState.awaitDrain++,_e=!0),Y.pause())}function c(Z){x("onerror",Z),C(),F.removeListener("error",c),w(F,"error")===0&&F.emit("error",Z)}A(F,"error",c);function l(){F.removeListener("finish",_),C()}F.once("close",l);function _(){x("onfinish"),F.removeListener("close",l),C()}F.once("finish",_);function C(){x("unpipe"),Y.unpipe(F)}return F.emit("pipe",Y),rt.flowing||(x("pipe resume"),Y.resume()),F};function Ot(F){return function(){var I=F._readableState;x("pipeOnDrain",I.awaitDrain),I.awaitDrain&&I.awaitDrain--,I.awaitDrain===0&&w(F,"data")&&(I.flowing=!0,M(F))}}P.prototype.unpipe=function(F){var I=this._readableState;if(I.pipesCount===0)return this;if(I.pipesCount===1)return F&&F!==I.pipes?this:(F||(F=I.pipes),I.pipes=null,I.pipesCount=0,I.flowing=!1,F&&F.emit("unpipe",this),this);if(!F){var Y=I.pipes,rt=I.pipesCount;I.pipes=null,I.pipesCount=0,I.flowing=!1;for(var ht=0;ht<rt;ht++)Y[ht].emit("unpipe",this);return this}var _t=Mt(I.pipes,F);return _t===-1?this:(I.pipes.splice(_t,1),I.pipesCount-=1,I.pipesCount===1&&(I.pipes=I.pipes[0]),F.emit("unpipe",this),this)},P.prototype.on=function(F,I){var Y=p.prototype.on.call(this,F,I);if(F==="data")this._readableState.flowing!==!1&&this.resume();else if(F==="readable"){var rt=this._readableState;!rt.endEmitted&&!rt.readableListening&&(rt.readableListening=rt.needReadable=!0,rt.emittedReadable=!1,rt.reading?rt.length&&st(this):R(St,this))}return Y},P.prototype.addListener=P.prototype.on;function St(F){x("readable nexttick read 0"),F.read(0)}P.prototype.resume=function(){var F=this._readableState;return F.flowing||(x("resume"),F.flowing=!0,qt(this,F)),this};function qt(F,I){I.resumeScheduled||(I.resumeScheduled=!0,R(U,F,I))}function U(F,I){I.reading||(x("resume read 0"),F.read(0)),I.resumeScheduled=!1,I.awaitDrain=0,F.emit("resume"),M(F),I.flowing&&!I.reading&&F.read(0)}P.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function M(F){var I=F._readableState;for(x("flow",I.flowing);I.flowing&&F.read()!==null;);}P.prototype.wrap=function(F){var I=this._readableState,Y=!1,rt=this;F.on("end",function(){if(x("wrapped end"),I.decoder&&!I.ended){var K=I.decoder.end();K&&K.length&&rt.push(K)}rt.push(null)}),F.on("data",function(K){if(x("wrapped data"),I.decoder&&(K=I.decoder.write(K)),!(I.objectMode&&K==null)&&!(!I.objectMode&&(!K||!K.length))){var re=rt.push(K);re||(Y=!0,F.pause())}});for(var ht in F)this[ht]===void 0&&typeof F[ht]=="function"&&(this[ht]=function(K){return function(){return F[K].apply(F,arguments)}}(ht));var _t=["error","close","destroy","pause","resume"];return Wt(_t,function(K){F.on(K,rt.emit.bind(rt,K))}),rt._read=function(K){x("wrapped _read",K),Y&&(Y=!1,F.resume())},rt},P._fromList=J;function J(F,I){if(I.length===0)return null;var Y;return I.objectMode?Y=I.buffer.shift():!F||F>=I.length?(I.decoder?Y=I.buffer.join(""):I.buffer.length===1?Y=I.buffer.head.data:Y=I.buffer.concat(I.length),I.buffer.clear()):Y=ut(F,I.buffer,I.decoder),Y}function ut(F,I,Y){var rt;return F<I.head.data.length?(rt=I.head.data.slice(0,F),I.head.data=I.head.data.slice(F)):F===I.head.data.length?rt=I.shift():rt=Y?xt(F,I):wt(F,I),rt}function xt(F,I){var Y=I.head,rt=1,ht=Y.data;for(F-=ht.length;Y=Y.next;){var _t=Y.data,K=F>_t.length?_t.length:F;if(K===_t.length?ht+=_t:ht+=_t.slice(0,F),F-=K,F===0){K===_t.length?(++rt,Y.next?I.head=Y.next:I.head=I.tail=null):(I.head=Y,Y.data=_t.slice(K));break}++rt}return I.length-=rt,ht}function wt(F,I){var Y=g.allocUnsafe(F),rt=I.head,ht=1;for(rt.data.copy(Y),F-=rt.data.length;rt=rt.next;){var _t=rt.data,K=F>_t.length?_t.length:F;if(_t.copy(Y,Y.length-F,0,K),F-=K,F===0){K===_t.length?(++ht,rt.next?I.head=rt.next:I.head=I.tail=null):(I.head=rt,rt.data=_t.slice(K));break}++ht}return I.length-=ht,Y}function Et(F){var I=F._readableState;if(I.length>0)throw new Error('"endReadable()" called on non-empty stream');I.endEmitted||(I.ended=!0,R(bt,I,F))}function bt(F,I){!F.endEmitted&&F.length===0&&(F.endEmitted=!0,I.readable=!1,I.emit("end"))}function Wt(F,I){for(var Y=0,rt=F.length;Y<rt;Y++)I(F[Y],Y)}function Mt(F,I){for(var Y=0,rt=F.length;Y<rt;Y++)if(F[Y]===I)return Y;return-1}}).call(T,v(6))},function(z,T,v){(function(S){!S.version||S.version.indexOf("v0.")===0||S.version.indexOf("v1.")===0&&S.version.indexOf("v1.8.")!==0?z.exports=R:z.exports=S.nextTick;function R(E,N,w,p){if(typeof E!="function")throw new TypeError('"callback" argument must be a function');var f=arguments.length,g,u;switch(f){case 0:case 1:return S.nextTick(E);case 2:return S.nextTick(function(){E.call(null,N)});case 3:return S.nextTick(function(){E.call(null,N,w)});case 4:return S.nextTick(function(){E.call(null,N,w,p)});default:for(g=new Array(f-1),u=0;u<g.length;)g[u++]=arguments[u];return S.nextTick(function(){E.apply(null,g)})}}}).call(T,v(6))},function(z,T){var v={}.toString;z.exports=Array.isArray||function(S){return v.call(S)=="[object Array]"}},function(z,T,v){(function(S){var R=v(2),E=R.Buffer,N=R.SlowBuffer,w=R.kMaxLength||2147483647;T.alloc=function(f,g,u){if(typeof E.alloc=="function")return E.alloc(f,g,u);if(typeof u=="number")throw new TypeError("encoding must not be number");if(typeof f!="number")throw new TypeError("size must be a number");if(f>w)throw new RangeError("size is too large");var b=u,x=g;x===void 0&&(b=void 0,x=0);var k=new E(f);if(typeof x=="string")for(var D=new E(x,b),A=D.length,$=-1;++$<f;)k[$]=D[$%A];else k.fill(x);return k},T.allocUnsafe=function(f){if(typeof E.allocUnsafe=="function")return E.allocUnsafe(f);if(typeof f!="number")throw new TypeError("size must be a number");if(f>w)throw new RangeError("size is too large");return new E(f)},T.from=function(f,g,u){if(typeof E.from=="function"&&(!S.Uint8Array||Uint8Array.from!==E.from))return E.from(f,g,u);if(typeof f=="number")throw new TypeError('"value" argument must not be a number');if(typeof f=="string")return new E(f,g);if(typeof ArrayBuffer<"u"&&f instanceof ArrayBuffer){var b=g;if(arguments.length===1)return new E(f);typeof b>"u"&&(b=0);var x=u;if(typeof x>"u"&&(x=f.byteLength-b),b>=f.byteLength)throw new RangeError("'offset' is out of bounds");if(x>f.byteLength-b)throw new RangeError("'length' is out of bounds");return new E(f.slice(b,b+x))}if(E.isBuffer(f)){var k=new E(f.length);return f.copy(k,0,0,f.length),k}if(f){if(Array.isArray(f)||typeof ArrayBuffer<"u"&&f.buffer instanceof ArrayBuffer||"length"in f)return new E(f);if(f.type==="Buffer"&&Array.isArray(f.data))return new E(f.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},T.allocUnsafeSlow=function(f){if(typeof E.allocUnsafeSlow=="function")return E.allocUnsafeSlow(f);if(typeof f!="number")throw new TypeError("size must be a number");if(f>=w)throw new RangeError("size is too large");return new N(f)}}).call(T,function(){return this}())},function(z,T,v){(function(S){function R(W){return Array.isArray?Array.isArray(W):P(W)==="[object Array]"}T.isArray=R;function E(W){return typeof W=="boolean"}T.isBoolean=E;function N(W){return W===null}T.isNull=N;function w(W){return W==null}T.isNullOrUndefined=w;function p(W){return typeof W=="number"}T.isNumber=p;function f(W){return typeof W=="string"}T.isString=f;function g(W){return typeof W=="symbol"}T.isSymbol=g;function u(W){return W===void 0}T.isUndefined=u;function b(W){return P(W)==="[object RegExp]"}T.isRegExp=b;function x(W){return typeof W=="object"&&W!==null}T.isObject=x;function k(W){return P(W)==="[object Date]"}T.isDate=k;function D(W){return P(W)==="[object Error]"||W instanceof Error}T.isError=D;function A(W){return typeof W=="function"}T.isFunction=A;function $(W){return W===null||typeof W=="boolean"||typeof W=="number"||typeof W=="string"||typeof W=="symbol"||typeof W>"u"}T.isPrimitive=$,T.isBuffer=S.isBuffer;function P(W){return Object.prototype.toString.call(W)}}).call(T,v(1))},function(z,T){},function(z,T,v){v(2).Buffer;var S=v(17);z.exports=R;function R(){this.head=null,this.tail=null,this.length=0}R.prototype.push=function(E){var N={data:E,next:null};this.length>0?this.tail.next=N:this.head=N,this.tail=N,++this.length},R.prototype.unshift=function(E){var N={data:E,next:this.head};this.length===0&&(this.tail=N),this.head=N,++this.length},R.prototype.shift=function(){if(this.length!==0){var E=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,E}},R.prototype.clear=function(){this.head=this.tail=null,this.length=0},R.prototype.join=function(E){if(this.length===0)return"";for(var N=this.head,w=""+N.data;N=N.next;)w+=E+N.data;return w},R.prototype.concat=function(E){if(this.length===0)return S.alloc(0);if(this.length===1)return this.head.data;for(var N=S.allocUnsafe(E>>>0),w=this.head,p=0;w;)w.data.copy(N,p),p+=w.data.length,w=w.next;return N}},function(z,T,v){var S=Object.keys||function(k){var D=[];for(var A in k)D.push(A);return D};z.exports=u;var R=v(15),E=v(18);E.inherits=v(12);var N=v(14),w=v(22);E.inherits(u,N);for(var p=S(w.prototype),f=0;f<p.length;f++){var g=p[f];u.prototype[g]||(u.prototype[g]=w.prototype[g])}function u(k){if(!(this instanceof u))return new u(k);N.call(this,k),w.call(this,k),k&&k.readable===!1&&(this.readable=!1),k&&k.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,k&&k.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",b)}function b(){this.allowHalfOpen||this._writableState.ended||R(x,this)}function x(k){k.end()}},function(z,T,v){(function(S){z.exports=A;var R=v(15),E=!S.browser&&["v0.10","v0.9."].indexOf(S.version.slice(0,5))>-1?setImmediate:R,N;A.WritableState=k;var w=v(18);w.inherits=v(12);var p={deprecate:v(23)},f;(function(){try{f=v(11)}catch{}finally{f||(f=v(8).EventEmitter)}})();var g=v(2).Buffer,u=v(17);w.inherits(A,f);function b(){}function x(U,M,J){this.chunk=U,this.encoding=M,this.callback=J,this.next=null}function k(U,M){N=N||v(21),U=U||{},this.objectMode=!!U.objectMode,M instanceof N&&(this.objectMode=this.objectMode||!!U.writableObjectMode);var J=U.highWaterMark,ut=this.objectMode?16:16*1024;this.highWaterMark=J||J===0?J:ut,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var xt=U.decodeStrings===!1;this.decodeStrings=!xt,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(wt){B(M,wt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new qt(this)}k.prototype.getBuffer=function(){for(var M=this.bufferedRequest,J=[];M;)J.push(M),M=M.next;return J},function(){try{Object.defineProperty(k.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}}();var D;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(U){return D.call(this,U)?!0:U&&U._writableState instanceof k}})):D=function(U){return U instanceof this};function A(U){if(N=N||v(21),!D.call(A,this)&&!(this instanceof N))return new A(U);this._writableState=new k(U,this),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev)),f.call(this)}A.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function $(U,M){var J=new Error("write after end");U.emit("error",J),R(M,J)}function P(U,M,J,ut){var xt=!0,wt=!1;return J===null?wt=new TypeError("May not write null values to stream"):typeof J!="string"&&J!==void 0&&!M.objectMode&&(wt=new TypeError("Invalid non-string/buffer chunk")),wt&&(U.emit("error",wt),R(ut,wt),xt=!1),xt}A.prototype.write=function(U,M,J){var ut=this._writableState,xt=!1,wt=g.isBuffer(U);return typeof M=="function"&&(J=M,M=null),wt?M="buffer":M||(M=ut.defaultEncoding),typeof J!="function"&&(J=b),ut.ended?$(this,J):(wt||P(this,ut,U,J))&&(ut.pendingcb++,xt=pt(this,ut,wt,U,M,J)),xt},A.prototype.cork=function(){var U=this._writableState;U.corked++},A.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,!U.writing&&!U.corked&&!U.finished&&!U.bufferProcessing&&U.bufferedRequest&&Rt(this,U))},A.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=M.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((M+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+M);return this._writableState.defaultEncoding=M,this};function W(U,M,J){return!U.objectMode&&U.decodeStrings!==!1&&typeof M=="string"&&(M=u.from(M,J)),M}function pt(U,M,J,ut,xt,wt){J||(ut=W(M,ut,xt),g.isBuffer(ut)&&(xt="buffer"));var Et=M.objectMode?1:ut.length;M.length+=Et;var bt=M.length<M.highWaterMark;if(bt||(M.needDrain=!0),M.writing||M.corked){var Wt=M.lastBufferedRequest;M.lastBufferedRequest=new x(ut,xt,wt),Wt?Wt.next=M.lastBufferedRequest:M.bufferedRequest=M.lastBufferedRequest,M.bufferedRequestCount+=1}else G(U,M,!1,Et,ut,xt,wt);return bt}function G(U,M,J,ut,xt,wt,Et){M.writelen=ut,M.writecb=Et,M.writing=!0,M.sync=!0,J?U._writev(xt,M.onwrite):U._write(xt,wt,M.onwrite),M.sync=!1}function Ft(U,M,J,ut,xt){--M.pendingcb,J?R(xt,ut):xt(ut),U._writableState.errorEmitted=!0,U.emit("error",ut)}function dt(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}function B(U,M){var J=U._writableState,ut=J.sync,xt=J.writecb;if(dt(J),M)Ft(U,J,ut,M,xt);else{var wt=vt(J);!wt&&!J.corked&&!J.bufferProcessing&&J.bufferedRequest&&Rt(U,J),ut?E(tt,U,J,wt,xt):tt(U,J,wt,xt)}}function tt(U,M,J,ut){J||st(U,M),M.pendingcb--,ut(),Ot(U,M)}function st(U,M){M.length===0&&M.needDrain&&(M.needDrain=!1,U.emit("drain"))}function Rt(U,M){M.bufferProcessing=!0;var J=M.bufferedRequest;if(U._writev&&J&&J.next){var ut=M.bufferedRequestCount,xt=new Array(ut),wt=M.corkedRequestsFree;wt.entry=J;for(var Et=0;J;)xt[Et]=J,J=J.next,Et+=1;G(U,M,!0,M.length,xt,"",wt.finish),M.pendingcb++,M.lastBufferedRequest=null,wt.next?(M.corkedRequestsFree=wt.next,wt.next=null):M.corkedRequestsFree=new qt(M)}else{for(;J;){var bt=J.chunk,Wt=J.encoding,Mt=J.callback,F=M.objectMode?1:bt.length;if(G(U,M,!1,F,bt,Wt,Mt),J=J.next,M.writing)break}J===null&&(M.lastBufferedRequest=null)}M.bufferedRequestCount=0,M.bufferedRequest=J,M.bufferProcessing=!1}A.prototype._write=function(U,M,J){J(new Error("_write() is not implemented"))},A.prototype._writev=null,A.prototype.end=function(U,M,J){var ut=this._writableState;typeof U=="function"?(J=U,U=null,M=null):typeof M=="function"&&(J=M,M=null),U!=null&&this.write(U,M),ut.corked&&(ut.corked=1,this.uncork()),!ut.ending&&!ut.finished&&St(this,ut,J)};function vt(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function At(U,M){M.prefinished||(M.prefinished=!0,U.emit("prefinish"))}function Ot(U,M){var J=vt(M);return J&&(M.pendingcb===0?(At(U,M),M.finished=!0,U.emit("finish")):At(U,M)),J}function St(U,M,J){M.ending=!0,Ot(U,M),J&&(M.finished?R(J):U.once("finish",J)),M.ended=!0,U.writable=!1}function qt(U){var M=this;this.next=null,this.entry=null,this.finish=function(J){var ut=M.entry;for(M.entry=null;ut;){var xt=ut.callback;U.pendingcb--,xt(J),ut=ut.next}U.corkedRequestsFree?U.corkedRequestsFree.next=M:U.corkedRequestsFree=M}}}).call(T,v(6))},function(z,T){(function(v){z.exports=S;function S(E,N){if(R("noDeprecation"))return E;var w=!1;function p(){if(!w){if(R("throwDeprecation"))throw new Error(N);R("traceDeprecation")?console.trace(N):console.warn(N),w=!0}return E.apply(this,arguments)}return p}function R(E){try{if(!v.localStorage)return!1}catch{return!1}var N=v.localStorage[E];return N==null?!1:String(N).toLowerCase()==="true"}}).call(T,function(){return this}())},function(z,T,v){var S=v(2).Buffer,R=S.isEncoding||function(g){switch(g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function E(g){if(g&&!R(g))throw new Error("Unknown encoding: "+g)}var N=T.StringDecoder=function(g){switch(this.encoding=(g||"utf8").toLowerCase().replace(/[-_]/,""),E(g),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=p;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=f;break;default:this.write=w;return}this.charBuffer=new S(6),this.charReceived=0,this.charLength=0};N.prototype.write=function(g){for(var u="";this.charLength;){var b=g.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:g.length;if(g.copy(this.charBuffer,this.charReceived,0,b),this.charReceived+=b,this.charReceived<this.charLength)return"";g=g.slice(b,g.length),u=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var k=u.charCodeAt(u.length-1);if(k>=55296&&k<=56319){this.charLength+=this.surrogateSize,u="";continue}if(this.charReceived=this.charLength=0,g.length===0)return u;break}this.detectIncompleteChar(g);var x=g.length;this.charLength&&(g.copy(this.charBuffer,0,g.length-this.charReceived,x),x-=this.charReceived),u+=g.toString(this.encoding,0,x);var x=u.length-1,k=u.charCodeAt(x);if(k>=55296&&k<=56319){var D=this.surrogateSize;return this.charLength+=D,this.charReceived+=D,this.charBuffer.copy(this.charBuffer,D,0,D),g.copy(this.charBuffer,0,0,D),u.substring(0,x)}return u},N.prototype.detectIncompleteChar=function(g){for(var u=g.length>=3?3:g.length;u>0;u--){var b=g[g.length-u];if(u==1&&b>>5==6){this.charLength=2;break}if(u<=2&&b>>4==14){this.charLength=3;break}if(u<=3&&b>>3==30){this.charLength=4;break}}this.charReceived=u},N.prototype.end=function(g){var u="";if(g&&g.length&&(u=this.write(g)),this.charReceived){var b=this.charReceived,x=this.charBuffer,k=this.encoding;u+=x.slice(0,b).toString(k)}return u};function w(g){return g.toString(this.encoding)}function p(g){this.charReceived=g.length%2,this.charLength=this.charReceived?2:0}function f(g){this.charReceived=g.length%3,this.charLength=this.charReceived?3:0}},function(z,T,v){z.exports=w;var S=v(21),R=v(18);R.inherits=v(12),R.inherits(w,S);function E(f){this.afterTransform=function(g,u){return N(f,g,u)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function N(f,g,u){var b=f._transformState;b.transforming=!1;var x=b.writecb;if(!x)return f.emit("error",new Error("no writecb in Transform class"));b.writechunk=null,b.writecb=null,u!=null&&f.push(u),x(g);var k=f._readableState;k.reading=!1,(k.needReadable||k.length<k.highWaterMark)&&f._read(k.highWaterMark)}function w(f){if(!(this instanceof w))return new w(f);S.call(this,f),this._transformState=new E(this);var g=this;this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(u,b){p(g,u,b)}):p(g)})}w.prototype.push=function(f,g){return this._transformState.needTransform=!1,S.prototype.push.call(this,f,g)},w.prototype._transform=function(f,g,u){throw new Error("_transform() is not implemented")},w.prototype._write=function(f,g,u){var b=this._transformState;if(b.writecb=u,b.writechunk=f,b.writeencoding=g,!b.transforming){var x=this._readableState;(b.needTransform||x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}},w.prototype._read=function(f){var g=this._transformState;g.writechunk!==null&&g.writecb&&!g.transforming?(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform)):g.needTransform=!0};function p(f,g,u){if(g)return f.emit("error",g);u!=null&&f.push(u);var b=f._writableState,x=f._transformState;if(b.length)throw new Error("Calling transform done when ws.length != 0");if(x.transforming)throw new Error("Calling transform done when still transforming");return f.push(null)}},function(z,T,v){z.exports=E;var S=v(25),R=v(18);R.inherits=v(12),R.inherits(E,S);function E(N){if(!(this instanceof E))return new E(N);S.call(this,N)}E.prototype._transform=function(N,w,p){p(null,N)}},function(z,T,v){z.exports=v(22)},function(z,T,v){z.exports=v(21)},function(z,T,v){z.exports=v(25)},function(z,T,v){z.exports=v(26)},function(z,T,v){var S=v(32),R=v(33),E=v(38),N=v(39),w=v(40),p=v(41),f=v(42),g=Object.prototype.toString;function u(k){if(!(this instanceof u))return new u(k);this.options=R.assign({chunkSize:16384,windowBits:0,to:""},k||{});var D=this.options;D.raw&&D.windowBits>=0&&D.windowBits<16&&(D.windowBits=-D.windowBits,D.windowBits===0&&(D.windowBits=-15)),D.windowBits>=0&&D.windowBits<16&&!(k&&k.windowBits)&&(D.windowBits+=32),D.windowBits>15&&D.windowBits<48&&(D.windowBits&15)===0&&(D.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var A=S.inflateInit2(this.strm,D.windowBits);if(A!==N.Z_OK)throw new Error(w[A]);this.header=new f,S.inflateGetHeader(this.strm,this.header)}u.prototype.push=function(k,D){var A=this.strm,$=this.options.chunkSize,P=this.options.dictionary,W,pt,G,Ft,dt,B,tt=!1;if(this.ended)return!1;pt=D===~~D?D:D===!0?N.Z_FINISH:N.Z_NO_FLUSH,typeof k=="string"?A.input=E.binstring2buf(k):g.call(k)==="[object ArrayBuffer]"?A.input=new Uint8Array(k):A.input=k,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new R.Buf8($),A.next_out=0,A.avail_out=$),W=S.inflate(A,N.Z_NO_FLUSH),W===N.Z_NEED_DICT&&P&&(typeof P=="string"?B=E.string2buf(P):g.call(P)==="[object ArrayBuffer]"?B=new Uint8Array(P):B=P,W=S.inflateSetDictionary(this.strm,B)),W===N.Z_BUF_ERROR&&tt===!0&&(W=N.Z_OK,tt=!1),W!==N.Z_STREAM_END&&W!==N.Z_OK)return this.onEnd(W),this.ended=!0,!1;A.next_out&&(A.avail_out===0||W===N.Z_STREAM_END||A.avail_in===0&&(pt===N.Z_FINISH||pt===N.Z_SYNC_FLUSH))&&(this.options.to==="string"?(G=E.utf8border(A.output,A.next_out),Ft=A.next_out-G,dt=E.buf2string(A.output,G),A.next_out=Ft,A.avail_out=$-Ft,Ft&&R.arraySet(A.output,A.output,G,Ft,0),this.onData(dt)):this.onData(R.shrinkBuf(A.output,A.next_out))),A.avail_in===0&&A.avail_out===0&&(tt=!0)}while((A.avail_in>0||A.avail_out===0)&&W!==N.Z_STREAM_END);return W===N.Z_STREAM_END&&(pt=N.Z_FINISH),pt===N.Z_FINISH?(W=S.inflateEnd(this.strm),this.onEnd(W),this.ended=!0,W===N.Z_OK):(pt===N.Z_SYNC_FLUSH&&(this.onEnd(N.Z_OK),A.avail_out=0),!0)},u.prototype.onData=function(k){this.chunks.push(k)},u.prototype.onEnd=function(k){k===N.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=R.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg};function b(k,D){var A=new u(D);if(A.push(k,!0),A.err)throw A.msg||w[A.err];return A.result}function x(k,D){return D=D||{},D.raw=!0,b(k,D)}T.Inflate=u,T.inflate=b,T.inflateRaw=x,T.ungzip=b},function(z,T,v){var S=v(33),R=v(34),E=v(35),N=v(36),w=v(37),p=0,f=1,g=2,u=4,b=5,x=6,k=0,D=1,A=2,$=-2,P=-3,W=-4,pt=-5,G=8,Ft=1,dt=2,B=3,tt=4,st=5,Rt=6,vt=7,At=8,Ot=9,St=10,qt=11,U=12,M=13,J=14,ut=15,xt=16,wt=17,Et=18,bt=19,Wt=20,Mt=21,F=22,I=23,Y=24,rt=25,ht=26,_t=27,K=28,re=29,gt=30,oe=31,fe=32,_e=852,m=592,c=15,l=c;function _(j){return(j>>>24&255)+(j>>>8&65280)+((j&65280)<<8)+((j&255)<<24)}function C(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new S.Buf16(320),this.work=new S.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Z(j){var it;return!j||!j.state?$:(it=j.state,j.total_in=j.total_out=it.total=0,j.msg="",it.wrap&&(j.adler=it.wrap&1),it.mode=Ft,it.last=0,it.havedict=0,it.dmax=32768,it.head=null,it.hold=0,it.bits=0,it.lencode=it.lendyn=new S.Buf32(_e),it.distcode=it.distdyn=new S.Buf32(m),it.sane=1,it.back=-1,k)}function q(j){var it;return!j||!j.state?$:(it=j.state,it.wsize=0,it.whave=0,it.wnext=0,Z(j))}function kt(j,it){var y,at;return!j||!j.state||(at=j.state,it<0?(y=0,it=-it):(y=(it>>4)+1,it<48&&(it&=15)),it&&(it<8||it>15))?$:(at.window!==null&&at.wbits!==it&&(at.window=null),at.wrap=y,at.wbits=it,q(j))}function Dt(j,it){var y,at;return j?(at=new C,j.state=at,at.window=null,y=kt(j,it),y!==k&&(j.state=null),y):$}function Pt(j){return Dt(j,l)}var Gt=!0,Ct,Fe;function Je(j){if(Gt){var it;for(Ct=new S.Buf32(512),Fe=new S.Buf32(32),it=0;it<144;)j.lens[it++]=8;for(;it<256;)j.lens[it++]=9;for(;it<280;)j.lens[it++]=7;for(;it<288;)j.lens[it++]=8;for(w(f,j.lens,0,288,Ct,0,j.work,{bits:9}),it=0;it<32;)j.lens[it++]=5;w(g,j.lens,0,32,Fe,0,j.work,{bits:5}),Gt=!1}j.lencode=Ct,j.lenbits=9,j.distcode=Fe,j.distbits=5}function Ue(j,it,y,at){var Bt,nt=j.state;return nt.window===null&&(nt.wsize=1<<nt.wbits,nt.wnext=0,nt.whave=0,nt.window=new S.Buf8(nt.wsize)),at>=nt.wsize?(S.arraySet(nt.window,it,y-nt.wsize,nt.wsize,0),nt.wnext=0,nt.whave=nt.wsize):(Bt=nt.wsize-nt.wnext,Bt>at&&(Bt=at),S.arraySet(nt.window,it,y-at,Bt,nt.wnext),at-=Bt,at?(S.arraySet(nt.window,it,y-at,at,0),nt.wnext=at,nt.whave=nt.wsize):(nt.wnext+=Bt,nt.wnext===nt.wsize&&(nt.wnext=0),nt.whave<nt.wsize&&(nt.whave+=Bt))),0}function ze(j,it){var y,at,Bt,nt,ce,ot,Jt,X,V,Ke,Ut,ct,je,be,Ht=0,Tt,ne,ue,ie,Qe,We,Xt,le,ee=new S.Buf8(4),Ie,me,wr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!j||!j.state||!j.output||!j.input&&j.avail_in!==0)return $;y=j.state,y.mode===U&&(y.mode=M),ce=j.next_out,Bt=j.output,Jt=j.avail_out,nt=j.next_in,at=j.input,ot=j.avail_in,X=y.hold,V=y.bits,Ke=ot,Ut=Jt,le=k;t:for(;;)switch(y.mode){case Ft:if(y.wrap===0){y.mode=M;break}for(;V<16;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}if(y.wrap&2&&X===35615){y.check=0,ee[0]=X&255,ee[1]=X>>>8&255,y.check=E(y.check,ee,2,0),X=0,V=0,y.mode=dt;break}if(y.flags=0,y.head&&(y.head.done=!1),!(y.wrap&1)||(((X&255)<<8)+(X>>8))%31){j.msg="incorrect header check",y.mode=gt;break}if((X&15)!==G){j.msg="unknown compression method",y.mode=gt;break}if(X>>>=4,V-=4,Xt=(X&15)+8,y.wbits===0)y.wbits=Xt;else if(Xt>y.wbits){j.msg="invalid window size",y.mode=gt;break}y.dmax=1<<Xt,j.adler=y.check=1,y.mode=X&512?St:U,X=0,V=0;break;case dt:for(;V<16;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}if(y.flags=X,(y.flags&255)!==G){j.msg="unknown compression method",y.mode=gt;break}if(y.flags&57344){j.msg="unknown header flags set",y.mode=gt;break}y.head&&(y.head.text=X>>8&1),y.flags&512&&(ee[0]=X&255,ee[1]=X>>>8&255,y.check=E(y.check,ee,2,0)),X=0,V=0,y.mode=B;case B:for(;V<32;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}y.head&&(y.head.time=X),y.flags&512&&(ee[0]=X&255,ee[1]=X>>>8&255,ee[2]=X>>>16&255,ee[3]=X>>>24&255,y.check=E(y.check,ee,4,0)),X=0,V=0,y.mode=tt;case tt:for(;V<16;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}y.head&&(y.head.xflags=X&255,y.head.os=X>>8),y.flags&512&&(ee[0]=X&255,ee[1]=X>>>8&255,y.check=E(y.check,ee,2,0)),X=0,V=0,y.mode=st;case st:if(y.flags&1024){for(;V<16;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}y.length=X,y.head&&(y.head.extra_len=X),y.flags&512&&(ee[0]=X&255,ee[1]=X>>>8&255,y.check=E(y.check,ee,2,0)),X=0,V=0}else y.head&&(y.head.extra=null);y.mode=Rt;case Rt:if(y.flags&1024&&(ct=y.length,ct>ot&&(ct=ot),ct&&(y.head&&(Xt=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),S.arraySet(y.head.extra,at,nt,ct,Xt)),y.flags&512&&(y.check=E(y.check,at,ct,nt)),ot-=ct,nt+=ct,y.length-=ct),y.length))break t;y.length=0,y.mode=vt;case vt:if(y.flags&2048){if(ot===0)break t;ct=0;do Xt=at[nt+ct++],y.head&&Xt&&y.length<65536&&(y.head.name+=String.fromCharCode(Xt));while(Xt&&ct<ot);if(y.flags&512&&(y.check=E(y.check,at,ct,nt)),ot-=ct,nt+=ct,Xt)break t}else y.head&&(y.head.name=null);y.length=0,y.mode=At;case At:if(y.flags&4096){if(ot===0)break t;ct=0;do Xt=at[nt+ct++],y.head&&Xt&&y.length<65536&&(y.head.comment+=String.fromCharCode(Xt));while(Xt&&ct<ot);if(y.flags&512&&(y.check=E(y.check,at,ct,nt)),ot-=ct,nt+=ct,Xt)break t}else y.head&&(y.head.comment=null);y.mode=Ot;case Ot:if(y.flags&512){for(;V<16;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}if(X!==(y.check&65535)){j.msg="header crc mismatch",y.mode=gt;break}X=0,V=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),j.adler=y.check=0,y.mode=U;break;case St:for(;V<32;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}j.adler=y.check=_(X),X=0,V=0,y.mode=qt;case qt:if(y.havedict===0)return j.next_out=ce,j.avail_out=Jt,j.next_in=nt,j.avail_in=ot,y.hold=X,y.bits=V,A;j.adler=y.check=1,y.mode=U;case U:if(it===b||it===x)break t;case M:if(y.last){X>>>=V&7,V-=V&7,y.mode=_t;break}for(;V<3;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}switch(y.last=X&1,X>>>=1,V-=1,X&3){case 0:y.mode=J;break;case 1:if(Je(y),y.mode=Wt,it===x){X>>>=2,V-=2;break t}break;case 2:y.mode=wt;break;case 3:j.msg="invalid block type",y.mode=gt}X>>>=2,V-=2;break;case J:for(X>>>=V&7,V-=V&7;V<32;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}if((X&65535)!==(X>>>16^65535)){j.msg="invalid stored block lengths",y.mode=gt;break}if(y.length=X&65535,X=0,V=0,y.mode=ut,it===x)break t;case ut:y.mode=xt;case xt:if(ct=y.length,ct){if(ct>ot&&(ct=ot),ct>Jt&&(ct=Jt),ct===0)break t;S.arraySet(Bt,at,nt,ct,ce),ot-=ct,nt+=ct,Jt-=ct,ce+=ct,y.length-=ct;break}y.mode=U;break;case wt:for(;V<14;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}if(y.nlen=(X&31)+257,X>>>=5,V-=5,y.ndist=(X&31)+1,X>>>=5,V-=5,y.ncode=(X&15)+4,X>>>=4,V-=4,y.nlen>286||y.ndist>30){j.msg="too many length or distance symbols",y.mode=gt;break}y.have=0,y.mode=Et;case Et:for(;y.have<y.ncode;){for(;V<3;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}y.lens[wr[y.have++]]=X&7,X>>>=3,V-=3}for(;y.have<19;)y.lens[wr[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,Ie={bits:y.lenbits},le=w(p,y.lens,0,19,y.lencode,0,y.work,Ie),y.lenbits=Ie.bits,le){j.msg="invalid code lengths set",y.mode=gt;break}y.have=0,y.mode=bt;case bt:for(;y.have<y.nlen+y.ndist;){for(;Ht=y.lencode[X&(1<<y.lenbits)-1],Tt=Ht>>>24,ne=Ht>>>16&255,ue=Ht&65535,!(Tt<=V);){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}if(ue<16)X>>>=Tt,V-=Tt,y.lens[y.have++]=ue;else{if(ue===16){for(me=Tt+2;V<me;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}if(X>>>=Tt,V-=Tt,y.have===0){j.msg="invalid bit length repeat",y.mode=gt;break}Xt=y.lens[y.have-1],ct=3+(X&3),X>>>=2,V-=2}else if(ue===17){for(me=Tt+3;V<me;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}X>>>=Tt,V-=Tt,Xt=0,ct=3+(X&7),X>>>=3,V-=3}else{for(me=Tt+7;V<me;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}X>>>=Tt,V-=Tt,Xt=0,ct=11+(X&127),X>>>=7,V-=7}if(y.have+ct>y.nlen+y.ndist){j.msg="invalid bit length repeat",y.mode=gt;break}for(;ct--;)y.lens[y.have++]=Xt}}if(y.mode===gt)break;if(y.lens[256]===0){j.msg="invalid code -- missing end-of-block",y.mode=gt;break}if(y.lenbits=9,Ie={bits:y.lenbits},le=w(f,y.lens,0,y.nlen,y.lencode,0,y.work,Ie),y.lenbits=Ie.bits,le){j.msg="invalid literal/lengths set",y.mode=gt;break}if(y.distbits=6,y.distcode=y.distdyn,Ie={bits:y.distbits},le=w(g,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,Ie),y.distbits=Ie.bits,le){j.msg="invalid distances set",y.mode=gt;break}if(y.mode=Wt,it===x)break t;case Wt:y.mode=Mt;case Mt:if(ot>=6&&Jt>=258){j.next_out=ce,j.avail_out=Jt,j.next_in=nt,j.avail_in=ot,y.hold=X,y.bits=V,N(j,Ut),ce=j.next_out,Bt=j.output,Jt=j.avail_out,nt=j.next_in,at=j.input,ot=j.avail_in,X=y.hold,V=y.bits,y.mode===U&&(y.back=-1);break}for(y.back=0;Ht=y.lencode[X&(1<<y.lenbits)-1],Tt=Ht>>>24,ne=Ht>>>16&255,ue=Ht&65535,!(Tt<=V);){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}if(ne&&(ne&240)===0){for(ie=Tt,Qe=ne,We=ue;Ht=y.lencode[We+((X&(1<<ie+Qe)-1)>>ie)],Tt=Ht>>>24,ne=Ht>>>16&255,ue=Ht&65535,!(ie+Tt<=V);){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}X>>>=ie,V-=ie,y.back+=ie}if(X>>>=Tt,V-=Tt,y.back+=Tt,y.length=ue,ne===0){y.mode=ht;break}if(ne&32){y.back=-1,y.mode=U;break}if(ne&64){j.msg="invalid literal/length code",y.mode=gt;break}y.extra=ne&15,y.mode=F;case F:if(y.extra){for(me=y.extra;V<me;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}y.length+=X&(1<<y.extra)-1,X>>>=y.extra,V-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=I;case I:for(;Ht=y.distcode[X&(1<<y.distbits)-1],Tt=Ht>>>24,ne=Ht>>>16&255,ue=Ht&65535,!(Tt<=V);){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}if((ne&240)===0){for(ie=Tt,Qe=ne,We=ue;Ht=y.distcode[We+((X&(1<<ie+Qe)-1)>>ie)],Tt=Ht>>>24,ne=Ht>>>16&255,ue=Ht&65535,!(ie+Tt<=V);){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}X>>>=ie,V-=ie,y.back+=ie}if(X>>>=Tt,V-=Tt,y.back+=Tt,ne&64){j.msg="invalid distance code",y.mode=gt;break}y.offset=ue,y.extra=ne&15,y.mode=Y;case Y:if(y.extra){for(me=y.extra;V<me;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}y.offset+=X&(1<<y.extra)-1,X>>>=y.extra,V-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){j.msg="invalid distance too far back",y.mode=gt;break}y.mode=rt;case rt:if(Jt===0)break t;if(ct=Ut-Jt,y.offset>ct){if(ct=y.offset-ct,ct>y.whave&&y.sane){j.msg="invalid distance too far back",y.mode=gt;break}ct>y.wnext?(ct-=y.wnext,je=y.wsize-ct):je=y.wnext-ct,ct>y.length&&(ct=y.length),be=y.window}else be=Bt,je=ce-y.offset,ct=y.length;ct>Jt&&(ct=Jt),Jt-=ct,y.length-=ct;do Bt[ce++]=be[je++];while(--ct);y.length===0&&(y.mode=Mt);break;case ht:if(Jt===0)break t;Bt[ce++]=y.length,Jt--,y.mode=Mt;break;case _t:if(y.wrap){for(;V<32;){if(ot===0)break t;ot--,X|=at[nt++]<<V,V+=8}if(Ut-=Jt,j.total_out+=Ut,y.total+=Ut,Ut&&(j.adler=y.check=y.flags?E(y.check,Bt,Ut,ce-Ut):R(y.check,Bt,Ut,ce-Ut)),Ut=Jt,(y.flags?X:_(X))!==y.check){j.msg="incorrect data check",y.mode=gt;break}X=0,V=0}y.mode=K;case K:if(y.wrap&&y.flags){for(;V<32;){if(ot===0)break t;ot--,X+=at[nt++]<<V,V+=8}if(X!==(y.total&4294967295)){j.msg="incorrect length check",y.mode=gt;break}X=0,V=0}y.mode=re;case re:le=D;break t;case gt:le=P;break t;case oe:return W;case fe:default:return $}return j.next_out=ce,j.avail_out=Jt,j.next_in=nt,j.avail_in=ot,y.hold=X,y.bits=V,(y.wsize||Ut!==j.avail_out&&y.mode<gt&&(y.mode<_t||it!==u))&&Ue(j,j.output,j.next_out,Ut-j.avail_out),Ke-=j.avail_in,Ut-=j.avail_out,j.total_in+=Ke,j.total_out+=Ut,y.total+=Ut,y.wrap&&Ut&&(j.adler=y.check=y.flags?E(y.check,Bt,Ut,j.next_out-Ut):R(y.check,Bt,Ut,j.next_out-Ut)),j.data_type=y.bits+(y.last?64:0)+(y.mode===U?128:0)+(y.mode===Wt||y.mode===ut?256:0),(Ke===0&&Ut===0||it===u)&&le===k&&(le=pt),le}function Cr(j){if(!j||!j.state)return $;var it=j.state;return it.window&&(it.window=null),j.state=null,k}function Mr(j,it){var y;return!j||!j.state||(y=j.state,(y.wrap&2)===0)?$:(y.head=it,it.done=!1,k)}function Pr(j,it){var y=it.length,at,Bt,nt;return!j||!j.state||(at=j.state,at.wrap!==0&&at.mode!==qt)?$:at.mode===qt&&(Bt=1,Bt=R(Bt,it,y,0),Bt!==at.check)?P:(nt=Ue(j,it,y,y),nt?(at.mode=oe,W):(at.havedict=1,k))}T.inflateReset=q,T.inflateReset2=kt,T.inflateResetKeep=Z,T.inflateInit=Pt,T.inflateInit2=Dt,T.inflate=ze,T.inflateEnd=Cr,T.inflateGetHeader=Mr,T.inflateSetDictionary=Pr,T.inflateInfo="pako inflate (from Nodeca project)"},function(z,T){var v=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";T.assign=function(E){for(var N=Array.prototype.slice.call(arguments,1);N.length;){var w=N.shift();if(!!w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var p in w)w.hasOwnProperty(p)&&(E[p]=w[p])}}return E},T.shrinkBuf=function(E,N){return E.length===N?E:E.subarray?E.subarray(0,N):(E.length=N,E)};var S={arraySet:function(E,N,w,p,f){if(N.subarray&&E.subarray){E.set(N.subarray(w,w+p),f);return}for(var g=0;g<p;g++)E[f+g]=N[w+g]},flattenChunks:function(E){var N,w,p,f,g,u;for(p=0,N=0,w=E.length;N<w;N++)p+=E[N].length;for(u=new Uint8Array(p),f=0,N=0,w=E.length;N<w;N++)g=E[N],u.set(g,f),f+=g.length;return u}},R={arraySet:function(E,N,w,p,f){for(var g=0;g<p;g++)E[f+g]=N[w+g]},flattenChunks:function(E){return[].concat.apply([],E)}};T.setTyped=function(E){E?(T.Buf8=Uint8Array,T.Buf16=Uint16Array,T.Buf32=Int32Array,T.assign(T,S)):(T.Buf8=Array,T.Buf16=Array,T.Buf32=Array,T.assign(T,R))},T.setTyped(v)},function(z,T){function v(S,R,E,N){for(var w=S&65535|0,p=S>>>16&65535|0,f=0;E!==0;){f=E>2e3?2e3:E,E-=f;do w=w+R[N++]|0,p=p+w|0;while(--f);w%=65521,p%=65521}return w|p<<16|0}z.exports=v},function(z,T){function v(){for(var E,N=[],w=0;w<256;w++){E=w;for(var p=0;p<8;p++)E=E&1?3988292384^E>>>1:E>>>1;N[w]=E}return N}var S=v();function R(E,N,w,p){var f=S,g=p+w;E^=-1;for(var u=p;u<g;u++)E=E>>>8^f[(E^N[u])&255];return E^-1}z.exports=R},function(z,T){var v=30,S=12;z.exports=function(E,N){var w,p,f,g,u,b,x,k,D,A,$,P,W,pt,G,Ft,dt,B,tt,st,Rt,vt,At,Ot,St;w=E.state,p=E.next_in,Ot=E.input,f=p+(E.avail_in-5),g=E.next_out,St=E.output,u=g-(N-E.avail_out),b=g+(E.avail_out-257),x=w.dmax,k=w.wsize,D=w.whave,A=w.wnext,$=w.window,P=w.hold,W=w.bits,pt=w.lencode,G=w.distcode,Ft=(1<<w.lenbits)-1,dt=(1<<w.distbits)-1;t:do{W<15&&(P+=Ot[p++]<<W,W+=8,P+=Ot[p++]<<W,W+=8),B=pt[P&Ft];e:for(;;){if(tt=B>>>24,P>>>=tt,W-=tt,tt=B>>>16&255,tt===0)St[g++]=B&65535;else if(tt&16){st=B&65535,tt&=15,tt&&(W<tt&&(P+=Ot[p++]<<W,W+=8),st+=P&(1<<tt)-1,P>>>=tt,W-=tt),W<15&&(P+=Ot[p++]<<W,W+=8,P+=Ot[p++]<<W,W+=8),B=G[P&dt];r:for(;;){if(tt=B>>>24,P>>>=tt,W-=tt,tt=B>>>16&255,tt&16){if(Rt=B&65535,tt&=15,W<tt&&(P+=Ot[p++]<<W,W+=8,W<tt&&(P+=Ot[p++]<<W,W+=8)),Rt+=P&(1<<tt)-1,Rt>x){E.msg="invalid distance too far back",w.mode=v;break t}if(P>>>=tt,W-=tt,tt=g-u,Rt>tt){if(tt=Rt-tt,tt>D&&w.sane){E.msg="invalid distance too far back",w.mode=v;break t}if(vt=0,At=$,A===0){if(vt+=k-tt,tt<st){st-=tt;do St[g++]=$[vt++];while(--tt);vt=g-Rt,At=St}}else if(A<tt){if(vt+=k+A-tt,tt-=A,tt<st){st-=tt;do St[g++]=$[vt++];while(--tt);if(vt=0,A<st){tt=A,st-=tt;do St[g++]=$[vt++];while(--tt);vt=g-Rt,At=St}}}else if(vt+=A-tt,tt<st){st-=tt;do St[g++]=$[vt++];while(--tt);vt=g-Rt,At=St}for(;st>2;)St[g++]=At[vt++],St[g++]=At[vt++],St[g++]=At[vt++],st-=3;st&&(St[g++]=At[vt++],st>1&&(St[g++]=At[vt++]))}else{vt=g-Rt;do St[g++]=St[vt++],St[g++]=St[vt++],St[g++]=St[vt++],st-=3;while(st>2);st&&(St[g++]=St[vt++],st>1&&(St[g++]=St[vt++]))}}else if((tt&64)===0){B=G[(B&65535)+(P&(1<<tt)-1)];continue r}else{E.msg="invalid distance code",w.mode=v;break t}break}}else if((tt&64)===0){B=pt[(B&65535)+(P&(1<<tt)-1)];continue e}else if(tt&32){w.mode=S;break t}else{E.msg="invalid literal/length code",w.mode=v;break t}break}}while(p<f&&g<b);st=W>>3,p-=st,W-=st<<3,P&=(1<<W)-1,E.next_in=p,E.next_out=g,E.avail_in=p<f?5+(f-p):5-(p-f),E.avail_out=g<b?257+(b-g):257-(g-b),w.hold=P,w.bits=W}},function(z,T,v){var S=v(33),R=15,E=852,N=592,w=0,p=1,f=2,g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],b=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],x=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];z.exports=function(D,A,$,P,W,pt,G,Ft){var dt=Ft.bits,B=0,tt=0,st=0,Rt=0,vt=0,At=0,Ot=0,St=0,qt=0,U=0,M,J,ut,xt,wt,Et=null,bt=0,Wt,Mt=new S.Buf16(R+1),F=new S.Buf16(R+1),I=null,Y=0,rt,ht,_t;for(B=0;B<=R;B++)Mt[B]=0;for(tt=0;tt<P;tt++)Mt[A[$+tt]]++;for(vt=dt,Rt=R;Rt>=1&&Mt[Rt]===0;Rt--);if(vt>Rt&&(vt=Rt),Rt===0)return W[pt++]=1<<24|64<<16|0,W[pt++]=1<<24|64<<16|0,Ft.bits=1,0;for(st=1;st<Rt&&Mt[st]===0;st++);for(vt<st&&(vt=st),St=1,B=1;B<=R;B++)if(St<<=1,St-=Mt[B],St<0)return-1;if(St>0&&(D===w||Rt!==1))return-1;for(F[1]=0,B=1;B<R;B++)F[B+1]=F[B]+Mt[B];for(tt=0;tt<P;tt++)A[$+tt]!==0&&(G[F[A[$+tt]]++]=tt);if(D===w?(Et=I=G,Wt=19):D===p?(Et=g,bt-=257,I=u,Y-=257,Wt=256):(Et=b,I=x,Wt=-1),U=0,tt=0,B=st,wt=pt,At=vt,Ot=0,ut=-1,qt=1<<vt,xt=qt-1,D===p&&qt>E||D===f&&qt>N)return 1;for(;;){rt=B-Ot,G[tt]<Wt?(ht=0,_t=G[tt]):G[tt]>Wt?(ht=I[Y+G[tt]],_t=Et[bt+G[tt]]):(ht=32+64,_t=0),M=1<<B-Ot,J=1<<At,st=J;do J-=M,W[wt+(U>>Ot)+J]=rt<<24|ht<<16|_t|0;while(J!==0);for(M=1<<B-1;U&M;)M>>=1;if(M!==0?(U&=M-1,U+=M):U=0,tt++,--Mt[B]===0){if(B===Rt)break;B=A[$+G[tt]]}if(B>vt&&(U&xt)!==ut){for(Ot===0&&(Ot=vt),wt+=st,At=B-Ot,St=1<<At;At+Ot<Rt&&(St-=Mt[At+Ot],!(St<=0));)At++,St<<=1;if(qt+=1<<At,D===p&&qt>E||D===f&&qt>N)return 1;ut=U&xt,W[ut]=vt<<24|At<<16|wt-pt|0}}return U!==0&&(W[wt+U]=B-Ot<<24|64<<16|0),Ft.bits=vt,0}},function(z,T,v){var S=v(33),R=!0,E=!0;try{String.fromCharCode.apply(null,[0])}catch{R=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{E=!1}for(var N=new S.Buf8(256),w=0;w<256;w++)N[w]=w>=252?6:w>=248?5:w>=240?4:w>=224?3:w>=192?2:1;N[254]=N[254]=1,T.string2buf=function(f){var g,u,b,x,k,D=f.length,A=0;for(x=0;x<D;x++)u=f.charCodeAt(x),(u&64512)===55296&&x+1<D&&(b=f.charCodeAt(x+1),(b&64512)===56320&&(u=65536+(u-55296<<10)+(b-56320),x++)),A+=u<128?1:u<2048?2:u<65536?3:4;for(g=new S.Buf8(A),k=0,x=0;k<A;x++)u=f.charCodeAt(x),(u&64512)===55296&&x+1<D&&(b=f.charCodeAt(x+1),(b&64512)===56320&&(u=65536+(u-55296<<10)+(b-56320),x++)),u<128?g[k++]=u:u<2048?(g[k++]=192|u>>>6,g[k++]=128|u&63):u<65536?(g[k++]=224|u>>>12,g[k++]=128|u>>>6&63,g[k++]=128|u&63):(g[k++]=240|u>>>18,g[k++]=128|u>>>12&63,g[k++]=128|u>>>6&63,g[k++]=128|u&63);return g};function p(f,g){if(g<65537&&(f.subarray&&E||!f.subarray&&R))return String.fromCharCode.apply(null,S.shrinkBuf(f,g));for(var u="",b=0;b<g;b++)u+=String.fromCharCode(f[b]);return u}T.buf2binstring=function(f){return p(f,f.length)},T.binstring2buf=function(f){for(var g=new S.Buf8(f.length),u=0,b=g.length;u<b;u++)g[u]=f.charCodeAt(u);return g},T.buf2string=function(f,g){var u,b,x,k,D=g||f.length,A=new Array(D*2);for(b=0,u=0;u<D;){if(x=f[u++],x<128){A[b++]=x;continue}if(k=N[x],k>4){A[b++]=65533,u+=k-1;continue}for(x&=k===2?31:k===3?15:7;k>1&&u<D;)x=x<<6|f[u++]&63,k--;if(k>1){A[b++]=65533;continue}x<65536?A[b++]=x:(x-=65536,A[b++]=55296|x>>10&1023,A[b++]=56320|x&1023)}return p(A,b)},T.utf8border=function(f,g){var u;for(g=g||f.length,g>f.length&&(g=f.length),u=g-1;u>=0&&(f[u]&192)===128;)u--;return u<0||u===0?g:u+N[f[u]]>g?u:g}},function(z,T){z.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(z,T){z.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(z,T){function v(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}z.exports=v},function(z,T){function v(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}z.exports=v}])})})($t);var hi={},pi={};(function(lt){var Nt=$r&&$r.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,R){S.__proto__=R}||function(S,R){for(var E in R)R.hasOwnProperty(E)&&(S[E]=R[E])};return function(S,R){v(S,R);function E(){this.constructor=S}S.prototype=R===null?Object.create(R):(E.prototype=R.prototype,new E)}}();lt.__esModule=!0;var z;(function(v){v[v.EPERM=1]="EPERM",v[v.ENOENT=2]="ENOENT",v[v.EIO=5]="EIO",v[v.EBADF=9]="EBADF",v[v.EACCES=13]="EACCES",v[v.EBUSY=16]="EBUSY",v[v.EEXIST=17]="EEXIST",v[v.ENOTDIR=20]="ENOTDIR",v[v.EISDIR=21]="EISDIR",v[v.EINVAL=22]="EINVAL",v[v.EFBIG=27]="EFBIG",v[v.ENOSPC=28]="ENOSPC",v[v.EROFS=30]="EROFS",v[v.ENOTEMPTY=39]="ENOTEMPTY",v[v.ENOTSUP=95]="ENOTSUP"})(z=lt.ErrorCode||(lt.ErrorCode={})),lt.ErrorStrings={},lt.ErrorStrings[z.EPERM]="Operation not permitted.",lt.ErrorStrings[z.ENOENT]="No such file or directory.",lt.ErrorStrings[z.EIO]="Input/output error.",lt.ErrorStrings[z.EBADF]="Bad file descriptor.",lt.ErrorStrings[z.EACCES]="Permission denied.",lt.ErrorStrings[z.EBUSY]="Resource busy or locked.",lt.ErrorStrings[z.EEXIST]="File exists.",lt.ErrorStrings[z.ENOTDIR]="File is not a directory.",lt.ErrorStrings[z.EISDIR]="File is a directory.",lt.ErrorStrings[z.EINVAL]="Invalid argument.",lt.ErrorStrings[z.EFBIG]="File is too big.",lt.ErrorStrings[z.ENOSPC]="No space left on disk.",lt.ErrorStrings[z.EROFS]="Cannot modify a read-only file system.",lt.ErrorStrings[z.ENOTEMPTY]="Directory is not empty.",lt.ErrorStrings[z.ENOTSUP]="Operation is not supported.";var T=function(v){Nt(S,v);function S(R,E,N){E===void 0&&(E=lt.ErrorStrings[R]);var w=v.call(this,E)||this;return w.syscall="",w.errno=R,w.code=z[R],w.path=N,w.stack=new Error().stack,w.message="Error: "+w.code+": "+E+(w.path?", '"+w.path+"'":""),w}return S.fromJSON=function(R){var E=new S(0);return E.errno=R.errno,E.code=R.code,E.path=R.path,E.stack=R.stack,E.message=R.message,E},S.fromBuffer=function(R,E){return E===void 0&&(E=0),S.fromJSON(JSON.parse(R.toString("utf8",E+4,E+4+R.readUInt32LE(E))))},S.FileError=function(R,E){return new S(R,lt.ErrorStrings[R],E)},S.ENOENT=function(R){return this.FileError(z.ENOENT,R)},S.EEXIST=function(R){return this.FileError(z.EEXIST,R)},S.EISDIR=function(R){return this.FileError(z.EISDIR,R)},S.ENOTDIR=function(R){return this.FileError(z.ENOTDIR,R)},S.EPERM=function(R){return this.FileError(z.EPERM,R)},S.ENOTEMPTY=function(R){return this.FileError(z.ENOTEMPTY,R)},S.prototype.toString=function(){return this.message},S.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},S.prototype.writeToBuffer=function(R,E){R===void 0&&(R=Buffer.alloc(this.bufferSize())),E===void 0&&(E=0);var N=R.write(JSON.stringify(this.toJSON()),E+4);return R.writeUInt32LE(N,E),R},S.prototype.bufferSize=function(){return 4+Buffer.byteLength(JSON.stringify(this.toJSON()))},S}(Error);lt.ApiError=T})(pi);(function(lt){lt.__esModule=!0;var Nt=pi,z;(function(v){v[v.NOP=0]="NOP",v[v.THROW_EXCEPTION=1]="THROW_EXCEPTION",v[v.TRUNCATE_FILE=2]="TRUNCATE_FILE",v[v.CREATE_FILE=3]="CREATE_FILE"})(z=lt.ActionType||(lt.ActionType={}));var T=function(){function v(S){if(this.flagStr=S,v.validFlagStrs.indexOf(S)<0)throw new Nt.ApiError(Nt.ErrorCode.EINVAL,"Invalid flag: "+S)}return v.getFileFlag=function(S){return v.flagCache.hasOwnProperty(S)?v.flagCache[S]:v.flagCache[S]=new v(S)},v.prototype.getFlagString=function(){return this.flagStr},v.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},v.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},v.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},v.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},v.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},v.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},v.prototype.pathExistsAction=function(){return this.isExclusive()?z.THROW_EXCEPTION:this.isTruncating()?z.TRUNCATE_FILE:z.NOP},v.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?z.CREATE_FILE:z.THROW_EXCEPTION},v}();T.flagCache={},T.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"],lt.FileFlag=T})(hi);var fa={};(function(lt){lt.__esModule=!0;function Nt(T,v,S,R,E){return T<v||S<v?T>S?S+1:T+1:R===E?v:v+1}function z(T,v){if(T===v)return 0;if(T.length>v.length){var S=T;T=v,v=S}for(var R=T.length,E=v.length;R>0&&T.charCodeAt(R-1)===v.charCodeAt(E-1);)R--,E--;for(var N=0;N<R&&T.charCodeAt(N)===v.charCodeAt(N);)N++;if(R-=N,E-=N,R===0||E===1)return E;for(var w=new Array(R<<1),p=0;p<R;)w[R+p]=T.charCodeAt(N+p),w[p]=++p;var f,g,u,b,x;for(f=0;f+3<E;)for(var k=v.charCodeAt(N+(g=f)),D=v.charCodeAt(N+(u=f+1)),A=v.charCodeAt(N+(b=f+2)),$=v.charCodeAt(N+(x=f+3)),P=f+=4,p=0;p<R;){var W=w[R+p],pt=w[p];g=Nt(pt,g,u,k,W),u=Nt(g,u,b,D,W),b=Nt(u,b,x,A,W),P=Nt(b,x,P,$,W),w[p++]=P,x=b,b=u,u=g,g=pt}for(var G=0;f<E;){var k=v.charCodeAt(N+(g=f));G=++f;for(var p=0;p<R;p++){var pt=w[p];w[p]=G=pt<g||G<g?pt>G?G+1:pt+1:k===w[R+p]?g:g+1,g=pt}}return G}lt.default=z})(fa);typeof navigator<"u"&&(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident"));function ua(lt){return Buffer.from(lt)}var ca=ua;window.Buffer=$t.exports.BFSRequire("buffer").Buffer;function da(lt,Nt,z){$t.exports.FileSystem.InMemory.Create({},function(T,v){$t.exports.FileSystem.IndexedDB.Create({storeName:"RetroGames"},(S,R)=>{S&&console.log(S),$t.exports.initialize(v);const E=$t.exports.BFSRequire("fs");R.readFile(`/${lt}/${Nt}`,null,hi.FileFlag.getFileFlag("r"),(N,w)=>{E.writeFileSync(`/${Nt}`,w),z(v)})})})}function ya(lt,Nt=null){$t.exports.FileSystem.IndexedDB.Create({storeName:"RetroArch"},(z,T)=>{$t.exports.FileSystem.InMemory.Create({},function(v,S){$t.exports.FileSystem.AsyncMirror.Create({sync:S,async:T},function(R,E){$t.exports.initialize(E),console.log("amfs ok"),fetch("assets/frontend/bundle.zip").then(N=>N.arrayBuffer()).then(N=>{const w=Buffer.from(N);$t.exports.FileSystem.ZipFS.Create({zipData:w},(p,f)=>{console.log("zip",p),$t.exports.FileSystem.MountableFileSystem.Create({"/home/web_user/retroarch/userdata":E,"/home/web_user/retroarch/bundle":f,"/home/web_user/retroarch/userdata/content/downloads":lt},(g,u)=>{$t.exports.initialize(u);const b=new $t.exports.EmscriptenFS;window.FS.mount(b,{root:"/home"},"/home"),console.log("WEBPLAYER: filesystem initialization successful"),Nt&&Nt()})})})})})})}const Be={};function va(){return new Promise((lt,Nt)=>{$t.exports.FileSystem.IndexedDB.Create({storeName:"RetroGames"},(z,T)=>{$t.exports.initialize(T),$t.exports.FileSystem.IndexedDB.Create({storeName:"RetroArch"},(v,S)=>{$t.exports.initialize(S),$t.exports.FileSystem.MountableFileSystem.Create({"/":T,"/userdata":S},(R,E)=>{R&&Nt(R),$t.exports.initialize(E),Be.localFs=$t.exports.BFSRequire("fs"),lt(null)})})})})}function la(lt,Nt,z){const T=lt.files;let v=T.length;for(let S=0;S<T.length;S++){const R=new FileReader;R.readAsArrayBuffer(T[S]),R.onload=()=>{const E=T[S].name;pa(`${Nt}/${E}`,R.result).then(()=>{z&&--v===0&&z()})}}}function ga(lt,Nt,z){const T=Nt.target,v=`/${lt}`;ha(v).then(()=>la(T,v,z))}function ha(lt){return new Promise((Nt,z)=>{Be.localFs.exists(lt,T=>{T?Nt(!0):Be.localFs.mkdir(lt,v=>{v&&z(v),Nt(!0)})})})}function pa(lt,Nt){return new Promise((z,T)=>{Be.localFs.writeFile(lt,ca(Nt),v=>{v&&T(v),z(null)})})}function wa(){const lt=localStorage.getItem("rawebapp");lt&&(Be.save=JSON.parse(lt))}function ma(lt){localStorage.setItem("rawebapp",JSON.stringify({...Be.save,...lt}))}function Sa(lt,Nt){Be.localFs.readFile(`${lt}/${Nt}`,"utf8",(z,T)=>{const v=document.createElement("a");v.href=window.URL.createObjectURL(new Blob([T],{type:"text/plain"})),v.download=Nt,v.click()})}function Ea(lt,Nt){Be.localFs.unlink(lt,z=>{if(z)throw z;Nt()})}export{pa as a,ma as b,Sa as c,Ea as d,ha as e,wa as f,da as g,ya as h,va as i,Be as l,ga as s};
